{
    "__type__": "Deck",
    "children": [],
    "crowdanki_uuid": "203d6ceb-8f30-11eb-a999-d45d6450590b",
    "deck_config_uuid": "52ca97d1-8f2f-11eb-8a99-d45d6450590b",
    "deck_configurations": [
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "52ca97d1-8f2f-11eb-8a99-d45d6450590b",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    10.0
                ],
                "leechAction": 0,
                "leechFails": 8,
                "minInt": 1,
                "mult": 0.0
            },
            "maxTaken": 60,
            "name": "Default",
            "new": {
                "bury": false,
                "delays": [
                    1.0,
                    10.0
                ],
                "initialFactor": 2500,
                "ints": [
                    1,
                    4,
                    0
                ],
                "order": 1,
                "perDay": 9992,
                "separate": true,
                "weeklySchedule": [
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true
                ]
            },
            "newMix": 0,
            "newPerDayMinimum": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "fuzz": 0.05,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 36500,
                "minSpace": 1,
                "perDay": 200
            },
            "reviewOrder": 0,
            "timer": 0
        }
    ],
    "desc": "",
    "dyn": 0,
    "extendNew": 0,
    "extendRev": 0,
    "media_files": [
        "_BoardVsEngine.html",
        "_ChessTempoViewer.html",
        "_ChessTempoViewerB.html",
        "_board.html",
        "_board2.html"
    ],
    "mid": 1613423784194,
    "name": "Example Chess decks::Lichess Study",
    "note_models": [
        {
            "__type__": "NoteModel",
            "assetManager": {
                "enabled": true,
                "indentSize": 4,
                "insertStub": false,
                "scripts": [
                    {
                        "id": "AnkiPersistenceId",
                        "storage": {
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "AnkiPersistenceTag"
                    },
                    {
                        "id": "1599241824911",
                        "storage": {
                            "code": "const elements = closet.anki.getQaChildNodes()\nconst memory = chooseMemory('closet__1')\nconst filterManager = closet.FilterManager.make(preset, memory.map)\n\nconst output = [[\n    elements,\n    memory,\n    filterManager,\n]]\n\n/* here goes the setup - change it to fit your own needs */\n\nfilterManager.install(\n    closet.recipes.shuffle({ tagname: 'mix' }),\n    closet.recipes.order({ tagname: 'ord' }),\n    closet.recipes.cloze({ tagname: 'c' }),\n    closet.recipes.multipleChoice({ tagname: 'mc' }),\n    closet.browser.recipes.rect({ tagname: 'rect' }),\n)",
                            "conditions": [],
                            "description": "This is the configuration of how Closet will behave.\nTo get inspiration you can visit the homepage: closetengine.com.",
                            "enabled": false,
                            "version": "v0.1"
                        },
                        "tag": "ClosetUserScript"
                    },
                    {
                        "id": "Kanjax_id",
                        "storage": {
                            "code": "if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery-2.2.2.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery-2.2.2.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery.bpopup.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery.bpopup.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_kanjax_with_koohii.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_kanjax_with_koohii.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);",
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "Kanjax_tag"
                    },
                    {
                        "id": "jQuery_id",
                        "storage": {
                            "code": "/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.5.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(D).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function ke(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\\s*(?:[^=]|=\\s*.checked.)/i,je=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function qe(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Le(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function He(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(je,\"\"),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join(\"|\"),\"i\");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",n.style.height=\"9px\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=[\"Webkit\",\"Moz\",\"ms\"],ze=E.createElement(\"div\").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",y.checkOn=\"\"!==rt.value,y.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",y.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(\" \")}function yt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=yt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+vt(yt(n))+\" \").indexOf(t))return!0;return!1}});var xt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var St=/\\[\\]$/,kt=/\\r?\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)Dt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\/\\//,Rt={},Mt={},It=\"*/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+\"//\"+Wt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(jt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Et.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&\"withCredentials\"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):(\"number\"==typeof f.top&&(f.top+=\"px\"),\"number\"==typeof f.left&&(f.left+=\"px\"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});",
                            "conditions": [],
                            "enabled": true,
                            "position": "external"
                        },
                        "tag": "jQuery_tag"
                    },
                    {
                        "code": "// chessboard.js v1.0.0\n// https://github.com/oakmac/chessboardjs/\n//\n// Copyright (c) 2019, Chris Oakman\n// Released under the MIT license\n// https://github.com/oakmac/chessboardjs/blob/master/LICENSE.md\n\n// start anonymous scope\n;(function () {\n  'use strict'\n\n  var $ = window['jQuery']\n\n  // ---------------------------------------------------------------------------\n  // Constants\n  // ---------------------------------------------------------------------------\n\n  var COLUMNS = 'abcdefgh'.split('')\n  var DEFAULT_DRAG_THROTTLE_RATE = 20\n  var ELLIPSIS = ''\n  var MINIMUM_JQUERY_VERSION = '1.8.3'\n  var RUN_ASSERTS = false\n  var START_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'\n  var START_POSITION = fenToObj(START_FEN)\n\n  // default animation speeds\n  var DEFAULT_APPEAR_SPEED = 200\n  var DEFAULT_MOVE_SPEED = 200\n  var DEFAULT_SNAPBACK_SPEED = 60\n  var DEFAULT_SNAP_SPEED = 30\n  var DEFAULT_TRASH_SPEED = 100\n\n  // use unique class names to prevent clashing with anything else on the page\n  // and simplify selectors\n  // NOTE: these should never change\n  var CSS = {}\n  CSS['alpha'] = 'alpha-d2270'\n  CSS['black'] = 'black-3c85d'\n  CSS['board'] = 'board-b72b1'\n  CSS['chessboard'] = 'chessboard-63f37'\n  CSS['clearfix'] = 'clearfix-7da63'\n  CSS['highlight1'] = 'highlight1-32417'\n  CSS['highlight2'] = 'highlight2-9c5d2'\n  CSS['notation'] = 'notation-322f9'\n  CSS['numeric'] = 'numeric-fc462'\n  CSS['piece'] = 'piece-417db'\n  CSS['row'] = 'row-5277c'\n  CSS['sparePieces'] = 'spare-pieces-7492f'\n  CSS['sparePiecesBottom'] = 'spare-pieces-bottom-ae20f'\n  CSS['sparePiecesTop'] = 'spare-pieces-top-4028b'\n  CSS['square'] = 'square-55d63'\n  CSS['white'] = 'white-1e1d7'\n\n  // ---------------------------------------------------------------------------\n  // Misc Util Functions\n  // ---------------------------------------------------------------------------\n\n  function throttle (f, interval, scope) {\n    var timeout = 0\n    var shouldFire = false\n    var args = []\n\n    var handleTimeout = function () {\n      timeout = 0\n      if (shouldFire) {\n        shouldFire = false\n        fire()\n      }\n    }\n\n    var fire = function () {\n      timeout = window.setTimeout(handleTimeout, interval)\n      f.apply(scope, args)\n    }\n\n    return function (_args) {\n      args = arguments\n      if (!timeout) {\n        fire()\n      } else {\n        shouldFire = true\n      }\n    }\n  }\n\n  // function debounce (f, interval, scope) {\n  //   var timeout = 0\n  //   return function (_args) {\n  //     window.clearTimeout(timeout)\n  //     var args = arguments\n  //     timeout = window.setTimeout(function () {\n  //       f.apply(scope, args)\n  //     }, interval)\n  //   }\n  // }\n\n  function uuid () {\n    return 'xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx'.replace(/x/g, function (c) {\n      var r = (Math.random() * 16) | 0\n      return r.toString(16)\n    })\n  }\n\n  function deepCopy (thing) {\n    return JSON.parse(JSON.stringify(thing))\n  }\n\n  function parseSemVer (version) {\n    var tmp = version.split('.')\n    return {\n      major: parseInt(tmp[0], 10),\n      minor: parseInt(tmp[1], 10),\n      patch: parseInt(tmp[2], 10)\n    }\n  }\n\n  // returns true if version is >= minimum\n  function validSemanticVersion (version, minimum) {\n    version = parseSemVer(version)\n    minimum = parseSemVer(minimum)\n\n    var versionNum = (version.major * 100000 * 100000) +\n                     (version.minor * 100000) +\n                     version.patch\n    var minimumNum = (minimum.major * 100000 * 100000) +\n                     (minimum.minor * 100000) +\n                     minimum.patch\n\n    return versionNum >= minimumNum\n  }\n\n  function interpolateTemplate (str, obj) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) continue\n      var keyTemplateStr = '{' + key + '}'\n      var value = obj[key]\n      while (str.indexOf(keyTemplateStr) !== -1) {\n        str = str.replace(keyTemplateStr, value)\n      }\n    }\n    return str\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(interpolateTemplate('abc', {a: 'x'}) === 'abc')\n    console.assert(interpolateTemplate('{a}bc', {}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {p: 'q'}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {a: 'x'}) === 'xbc')\n    console.assert(interpolateTemplate('{a}bc{a}bc', {a: 'x'}) === 'xbcxbc')\n    console.assert(interpolateTemplate('{a}{a}{b}', {a: 'x', b: 'y'}) === 'xxy')\n  }\n\n  // ---------------------------------------------------------------------------\n  // Predicates\n  // ---------------------------------------------------------------------------\n\n  function isString (s) {\n    return typeof s === 'string'\n  }\n\n  function isFunction (f) {\n    return typeof f === 'function'\n  }\n\n  function isInteger (n) {\n    return typeof n === 'number' &&\n           isFinite(n) &&\n           Math.floor(n) === n\n  }\n\n  function validAnimationSpeed (speed) {\n    if (speed === 'fast' || speed === 'slow') return true\n    if (!isInteger(speed)) return false\n    return speed >= 0\n  }\n\n  function validThrottleRate (rate) {\n    return isInteger(rate) &&\n           rate >= 1\n  }\n\n  function validMove (move) {\n    // move should be a string\n    if (!isString(move)) return false\n\n    // move should be in the form of \"e2-e4\", \"f6-d5\"\n    var squares = move.split('-')\n    if (squares.length !== 2) return false\n\n    return validSquare(squares[0]) && validSquare(squares[1])\n  }\n\n  function validSquare (square) {\n    return isString(square) && square.search(/^[a-h][1-8]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validSquare('a1'))\n    console.assert(validSquare('e2'))\n    console.assert(!validSquare('D2'))\n    console.assert(!validSquare('g9'))\n    console.assert(!validSquare('a'))\n    console.assert(!validSquare(true))\n    console.assert(!validSquare(null))\n    console.assert(!validSquare({}))\n  }\n\n  function validPieceCode (code) {\n    return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPieceCode('bP'))\n    console.assert(validPieceCode('bK'))\n    console.assert(validPieceCode('wK'))\n    console.assert(validPieceCode('wR'))\n    console.assert(!validPieceCode('WR'))\n    console.assert(!validPieceCode('Wr'))\n    console.assert(!validPieceCode('a'))\n    console.assert(!validPieceCode(true))\n    console.assert(!validPieceCode(null))\n    console.assert(!validPieceCode({}))\n  }\n\n  function validFen (fen) {\n    if (!isString(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    // expand the empty square numbers to just 1s\n    fen = expandFenEmptySquares(fen)\n\n    // FEN should be 8 sections separated by slashes\n    var chunks = fen.split('/')\n    if (chunks.length !== 8) return false\n\n    // check each section\n    for (var i = 0; i < 8; i++) {\n      if (chunks[i].length !== 8 ||\n          chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validFen(START_FEN))\n    console.assert(validFen('8/8/8/8/8/8/8/8'))\n    console.assert(validFen('r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R'))\n    console.assert(validFen('3r3r/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('3r3z/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('anbqkbnr/8/8/8/8/8/PPPPPPPP/8'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBN'))\n    console.assert(!validFen('888888/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen('888888/pppppppp/74/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen({}))\n  }\n\n  function validPositionObject (pos) {\n    if (!$.isPlainObject(pos)) return false\n\n    for (var i in pos) {\n      if (!pos.hasOwnProperty(i)) continue\n\n      if (!validSquare(i) || !validPieceCode(pos[i])) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPositionObject(START_POSITION))\n    console.assert(validPositionObject({}))\n    console.assert(validPositionObject({e2: 'wP'}))\n    console.assert(validPositionObject({e2: 'wP', d2: 'wP'}))\n    console.assert(!validPositionObject({e2: 'BP'}))\n    console.assert(!validPositionObject({y2: 'wP'}))\n    console.assert(!validPositionObject(null))\n    console.assert(!validPositionObject('start'))\n    console.assert(!validPositionObject(START_FEN))\n  }\n\n  function isTouchDevice () {\n    return 'ontouchstart' in document.documentElement\n  }\n\n  function validJQueryVersion () {\n    return typeof window.$ &&\n           $.fn &&\n           $.fn.jquery &&\n           validSemanticVersion($.fn.jquery, MINIMUM_JQUERY_VERSION)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Chess Util Functions\n  // ---------------------------------------------------------------------------\n\n  // convert FEN piece code to bP, wK, etc\n  function fenToPieceCode (piece) {\n    // black piece\n    if (piece.toLowerCase() === piece) {\n      return 'b' + piece.toUpperCase()\n    }\n\n    // white piece\n    return 'w' + piece.toUpperCase()\n  }\n\n  // convert bP, wK, etc code to FEN structure\n  function pieceCodeToFen (piece) {\n    var pieceCodeLetters = piece.split('')\n\n    // white piece\n    if (pieceCodeLetters[0] === 'w') {\n      return pieceCodeLetters[1].toUpperCase()\n    }\n\n    // black piece\n    return pieceCodeLetters[1].toLowerCase()\n  }\n\n  // convert FEN string to position object\n  // returns false if the FEN string is invalid\n  function fenToObj (fen) {\n    if (!validFen(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    var rows = fen.split('/')\n    var position = {}\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      var row = rows[i].split('')\n      var colIdx = 0\n\n      // loop through each character in the FEN section\n      for (var j = 0; j < row.length; j++) {\n        // number / empty squares\n        if (row[j].search(/[1-8]/) !== -1) {\n          var numEmptySquares = parseInt(row[j], 10)\n          colIdx = colIdx + numEmptySquares\n        } else {\n          // piece\n          var square = COLUMNS[colIdx] + currentRow\n          position[square] = fenToPieceCode(row[j])\n          colIdx = colIdx + 1\n        }\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    return position\n  }\n\n  // position object to FEN string\n  // returns false if the obj is not a valid position object\n  function objToFen (obj) {\n    if (!validPositionObject(obj)) return false\n\n    var fen = ''\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var square = COLUMNS[j] + currentRow\n\n        // piece exists\n        if (obj.hasOwnProperty(square)) {\n          fen = fen + pieceCodeToFen(obj[square])\n        } else {\n          // empty space\n          fen = fen + '1'\n        }\n      }\n\n      if (i !== 7) {\n        fen = fen + '/'\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    // squeeze the empty numbers together\n    fen = squeezeFenEmptySquares(fen)\n\n    return fen\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(objToFen(START_POSITION) === START_FEN)\n    console.assert(objToFen({}) === '8/8/8/8/8/8/8/8')\n    console.assert(objToFen({a2: 'wP', 'b2': 'bP'}) === '8/8/8/8/8/8/Pp6/8')\n  }\n\n  function squeezeFenEmptySquares (fen) {\n    return fen.replace(/11111111/g, '8')\n      .replace(/1111111/g, '7')\n      .replace(/111111/g, '6')\n      .replace(/11111/g, '5')\n      .replace(/1111/g, '4')\n      .replace(/111/g, '3')\n      .replace(/11/g, '2')\n  }\n\n  function expandFenEmptySquares (fen) {\n    return fen.replace(/8/g, '11111111')\n      .replace(/7/g, '1111111')\n      .replace(/6/g, '111111')\n      .replace(/5/g, '11111')\n      .replace(/4/g, '1111')\n      .replace(/3/g, '111')\n      .replace(/2/g, '11')\n  }\n\n  // returns the distance between two squares\n  function squareDistance (squareA, squareB) {\n    var squareAArray = squareA.split('')\n    var squareAx = COLUMNS.indexOf(squareAArray[0]) + 1\n    var squareAy = parseInt(squareAArray[1], 10)\n\n    var squareBArray = squareB.split('')\n    var squareBx = COLUMNS.indexOf(squareBArray[0]) + 1\n    var squareBy = parseInt(squareBArray[1], 10)\n\n    var xDelta = Math.abs(squareAx - squareBx)\n    var yDelta = Math.abs(squareAy - squareBy)\n\n    if (xDelta >= yDelta) return xDelta\n    return yDelta\n  }\n\n  // returns the square of the closest instance of piece\n  // returns false if no instance of piece is found in position\n  function findClosestPiece (position, piece, square) {\n    // create array of closest squares from square\n    var closestSquares = createRadius(square)\n\n    // search through the position in order of distance for the piece\n    for (var i = 0; i < closestSquares.length; i++) {\n      var s = closestSquares[i]\n\n      if (position.hasOwnProperty(s) && position[s] === piece) {\n        return s\n      }\n    }\n\n    return false\n  }\n\n  // returns an array of closest squares from square\n  function createRadius (square) {\n    var squares = []\n\n    // calculate distance of all squares\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var s = COLUMNS[i] + (j + 1)\n\n        // skip the square we're starting from\n        if (square === s) continue\n\n        squares.push({\n          square: s,\n          distance: squareDistance(square, s)\n        })\n      }\n    }\n\n    // sort by distance\n    squares.sort(function (a, b) {\n      return a.distance - b.distance\n    })\n\n    // just return the square code\n    var surroundingSquares = []\n    for (i = 0; i < squares.length; i++) {\n      surroundingSquares.push(squares[i].square)\n    }\n\n    return surroundingSquares\n  }\n\n  // given a position and a set of moves, return a new position\n  // with the moves executed\n  function calculatePositionFromMoves (position, moves) {\n    var newPosition = deepCopy(position)\n\n    for (var i in moves) {\n      if (!moves.hasOwnProperty(i)) continue\n\n      // skip the move if the position doesn't have a piece on the source square\n      if (!newPosition.hasOwnProperty(i)) continue\n\n      var piece = newPosition[i]\n      delete newPosition[i]\n      newPosition[moves[i]] = piece\n    }\n\n    return newPosition\n  }\n\n  // TODO: add some asserts here for calculatePositionFromMoves\n\n  // ---------------------------------------------------------------------------\n  // HTML\n  // ---------------------------------------------------------------------------\n\n  function buildContainerHTML (hasSparePieces) {\n    var html = '<div class=\"{chessboard}\">'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesTop}\"></div>'\n    }\n\n    html += '<div class=\"{board}\"></div>'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesBottom}\"></div>'\n    }\n\n    html += '</div>'\n\n    return interpolateTemplate(html, CSS)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Config\n  // ---------------------------------------------------------------------------\n\n  function expandConfigArgumentShorthand (config) {\n    if (config === 'start') {\n      config = {position: deepCopy(START_POSITION)}\n    } else if (validFen(config)) {\n      config = {position: fenToObj(config)}\n    } else if (validPositionObject(config)) {\n      config = {position: deepCopy(config)}\n    }\n\n    // config must be an object\n    if (!$.isPlainObject(config)) config = {}\n\n    return config\n  }\n\n  // validate config / set default options\n  function expandConfig (config) {\n    // default for orientation is white\n    if (config.orientation !== 'black') config.orientation = 'white'\n\n    // default for showNotation is true\n    if (config.showNotation !== false) config.showNotation = true\n\n    // default for draggable is false\n    if (config.draggable !== true) config.draggable = false\n\n    // default for dropOffBoard is 'snapback'\n    if (config.dropOffBoard !== 'trash') config.dropOffBoard = 'snapback'\n\n    // default for sparePieces is false\n    if (config.sparePieces !== true) config.sparePieces = false\n\n    // draggable must be true if sparePieces is enabled\n    if (config.sparePieces) config.draggable = true\n\n    // default piece theme is wikipedia\n    if (!config.hasOwnProperty('pieceTheme') ||\n        (!isString(config.pieceTheme) && !isFunction(config.pieceTheme))) {\n      config.pieceTheme = 'img/chesspieces/wikipedia/{piece}.png'\n    }\n\n    // animation speeds\n    if (!validAnimationSpeed(config.appearSpeed)) config.appearSpeed = DEFAULT_APPEAR_SPEED\n    if (!validAnimationSpeed(config.moveSpeed)) config.moveSpeed = DEFAULT_MOVE_SPEED\n    if (!validAnimationSpeed(config.snapbackSpeed)) config.snapbackSpeed = DEFAULT_SNAPBACK_SPEED\n    if (!validAnimationSpeed(config.snapSpeed)) config.snapSpeed = DEFAULT_SNAP_SPEED\n    if (!validAnimationSpeed(config.trashSpeed)) config.trashSpeed = DEFAULT_TRASH_SPEED\n\n    // throttle rate\n    if (!validThrottleRate(config.dragThrottleRate)) config.dragThrottleRate = DEFAULT_DRAG_THROTTLE_RATE\n\n    return config\n  }\n\n  // ---------------------------------------------------------------------------\n  // Dependencies\n  // ---------------------------------------------------------------------------\n\n  // check for a compatible version of jQuery\n  function checkJQuery () {\n    if (!validJQueryVersion()) {\n      var errorMsg = 'Chessboard Error 1005: Unable to find a valid version of jQuery. ' +\n        'Please include jQuery ' + MINIMUM_JQUERY_VERSION + ' or higher on the page' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg)\n      return false\n    }\n\n    return true\n  }\n\n  // return either boolean false or the $container element\n  function checkContainerArg (containerElOrString) {\n    if (containerElOrString === '') {\n      var errorMsg1 = 'Chessboard Error 1001: ' +\n        'The first argument to Chessboard() cannot be an empty string.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg1)\n      return false\n    }\n\n    // convert containerEl to query selector if it is a string\n    if (isString(containerElOrString) &&\n        containerElOrString.charAt(0) !== '#') {\n      containerElOrString = '#' + containerElOrString\n    }\n\n    // containerEl must be something that becomes a jQuery collection of size 1\n    var $container = $(containerElOrString)\n    if ($container.length !== 1) {\n      var errorMsg2 = 'Chessboard Error 1003: ' +\n        'The first argument to Chessboard() must be the ID of a DOM node, ' +\n        'an ID query selector, or a single DOM node.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg2)\n      return false\n    }\n\n    return $container\n  }\n\n  // ---------------------------------------------------------------------------\n  // Constructor\n  // ---------------------------------------------------------------------------\n\n  function constructor (containerElOrString, config) {\n    // first things first: check basic dependencies\n    if (!checkJQuery()) return null\n    var $container = checkContainerArg(containerElOrString)\n    if (!$container) return null\n\n    // ensure the config object is what we expect\n    config = expandConfigArgumentShorthand(config)\n    config = expandConfig(config)\n\n    // DOM elements\n    var $board = null\n    var $draggedPiece = null\n    var $sparePiecesTop = null\n    var $sparePiecesBottom = null\n\n    // constructor return object\n    var widget = {}\n\n    // -------------------------------------------------------------------------\n    // Stateful\n    // -------------------------------------------------------------------------\n\n    var boardBorderSize = 2\n    var currentOrientation = 'white'\n    var currentPosition = {}\n    var draggedPiece = null\n    var draggedPieceLocation = null\n    var draggedPieceSource = null\n    var isDragging = false\n    var sparePiecesElsIds = {}\n    var squareElsIds = {}\n    var squareElsOffsets = {}\n    var squareSize = 16\n\n    // -------------------------------------------------------------------------\n    // Validation / Errors\n    // -------------------------------------------------------------------------\n\n    function error (code, msg, obj) {\n      // do nothing if showErrors is not set\n      if (\n        config.hasOwnProperty('showErrors') !== true ||\n          config.showErrors === false\n      ) {\n        return\n      }\n\n      var errorText = 'Chessboard Error ' + code + ': ' + msg\n\n      // print to console\n      if (\n        config.showErrors === 'console' &&\n          typeof console === 'object' &&\n          typeof console.log === 'function'\n      ) {\n        console.log(errorText)\n        if (arguments.length >= 2) {\n          console.log(obj)\n        }\n        return\n      }\n\n      // alert errors\n      if (config.showErrors === 'alert') {\n        if (obj) {\n          errorText += '\\n\\n' + JSON.stringify(obj)\n        }\n        window.alert(errorText)\n        return\n      }\n\n      // custom function\n      if (isFunction(config.showErrors)) {\n        config.showErrors(code, msg, obj)\n      }\n    }\n\n    function setInitialState () {\n      currentOrientation = config.orientation\n\n      // make sure position is valid\n      if (config.hasOwnProperty('position')) {\n        if (config.position === 'start') {\n          currentPosition = deepCopy(START_POSITION)\n        } else if (validFen(config.position)) {\n          currentPosition = fenToObj(config.position)\n        } else if (validPositionObject(config.position)) {\n          currentPosition = deepCopy(config.position)\n        } else {\n          error(\n            7263,\n            'Invalid value passed to config.position.',\n            config.position\n          )\n        }\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // DOM Misc\n    // -------------------------------------------------------------------------\n\n    // calculates square size based on the width of the container\n    // got a little CSS black magic here, so let me explain:\n    // get the width of the container element (could be anything), reduce by 1 for\n    // fudge factor, and then keep reducing until we find an exact mod 8 for\n    // our square size\n    function calculateSquareSize () {\n      var containerWidth = parseInt($container.width(), 10)\n\n      // defensive, prevent infinite loop\n      if (!containerWidth || containerWidth <= 0) {\n        return 0\n      }\n\n      // pad one pixel\n      var boardWidth = containerWidth - 1\n\n      while (boardWidth % 8 !== 0 && boardWidth > 0) {\n        boardWidth = boardWidth - 1\n      }\n\n      return boardWidth / 8\n    }\n\n    // create random IDs for elements\n    function createElIds () {\n      // squares on the board\n      for (var i = 0; i < COLUMNS.length; i++) {\n        for (var j = 1; j <= 8; j++) {\n          var square = COLUMNS[i] + j\n          squareElsIds[square] = square + '-' + uuid()\n        }\n      }\n\n      // spare pieces\n      var pieces = 'KQRNBP'.split('')\n      for (i = 0; i < pieces.length; i++) {\n        var whitePiece = 'w' + pieces[i]\n        var blackPiece = 'b' + pieces[i]\n        sparePiecesElsIds[whitePiece] = whitePiece + '-' + uuid()\n        sparePiecesElsIds[blackPiece] = blackPiece + '-' + uuid()\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Markup Building\n    // -------------------------------------------------------------------------\n\n    function buildBoardHTML (orientation) {\n      if (orientation !== 'black') {\n        orientation = 'white'\n      }\n\n      var html = ''\n\n      // algebraic notation / orientation\n      var alpha = deepCopy(COLUMNS)\n      var row = 8\n      if (orientation === 'black') {\n        alpha.reverse()\n        row = 1\n      }\n\n      var squareColor = 'white'\n      for (var i = 0; i < 8; i++) {\n        html += '<div class=\"{row}\">'\n        for (var j = 0; j < 8; j++) {\n          var square = alpha[j] + row\n\n          html += '<div class=\"{square} ' + CSS[squareColor] + ' ' +\n            'square-' + square + '\" ' +\n            'style=\"width:' + squareSize + 'px;height:' + squareSize + 'px;\" ' +\n            'id=\"' + squareElsIds[square] + '\" ' +\n            'data-square=\"' + square + '\">'\n\n          if (config.showNotation) {\n            // alpha notation\n            if ((orientation === 'white' && row === 1) ||\n                (orientation === 'black' && row === 8)) {\n              html += '<div class=\"{notation} {alpha}\">' + alpha[j] + '</div>'\n            }\n\n            // numeric notation\n            if (j === 0) {\n              html += '<div class=\"{notation} {numeric}\">' + row + '</div>'\n            }\n          }\n\n          html += '</div>' // end .square\n\n          squareColor = (squareColor === 'white') ? 'black' : 'white'\n        }\n        html += '<div class=\"{clearfix}\"></div></div>'\n\n        squareColor = (squareColor === 'white') ? 'black' : 'white'\n\n        if (orientation === 'white') {\n          row = row - 1\n        } else {\n          row = row + 1\n        }\n      }\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildPieceImgSrc (piece) {\n      if (isFunction(config.pieceTheme)) {\n        return config.pieceTheme(piece)\n      }\n\n      if (isString(config.pieceTheme)) {\n        return interpolateTemplate(config.pieceTheme, {piece: piece})\n      }\n\n      // NOTE: this should never happen\n      error(8272, 'Unable to build image source for config.pieceTheme.')\n      return ''\n    }\n\n    function buildPieceHTML (piece, hidden, id) {\n      var html = '<img src=\"' + buildPieceImgSrc(piece) + '\" '\n      if (isString(id) && id !== '') {\n        html += 'id=\"' + id + '\" '\n      }\n      html += 'alt=\"\" ' +\n        'class=\"{piece}\" ' +\n        'data-piece=\"' + piece + '\" ' +\n        'style=\"width:' + squareSize + 'px;' + 'height:' + squareSize + 'px;'\n\n      if (hidden) {\n        html += 'display:none;'\n      }\n\n      html += '\" />'\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildSparePiecesHTML (color) {\n      var pieces = ['wK', 'wQ', 'wR', 'wB', 'wN', 'wP']\n      if (color === 'black') {\n        pieces = ['bK', 'bQ', 'bR', 'bB', 'bN', 'bP']\n      }\n\n      var html = ''\n      for (var i = 0; i < pieces.length; i++) {\n        html += buildPieceHTML(pieces[i], false, sparePiecesElsIds[pieces[i]])\n      }\n\n      return html\n    }\n\n    // -------------------------------------------------------------------------\n    // Animations\n    // -------------------------------------------------------------------------\n\n    function animateSquareToSquare (src, dest, piece, completeFn) {\n      // get information about the source and destination squares\n      var $srcSquare = $('#' + squareElsIds[src])\n      var srcSquarePosition = $srcSquare.offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destSquarePosition = $destSquare.offset()\n\n      // create the animated piece and absolutely position it\n      // over the source square\n      var animatedPieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, animatedPieceId))\n      var $animatedPiece = $('#' + animatedPieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        top: srcSquarePosition.top,\n        left: srcSquarePosition.left\n      })\n\n      // remove original piece from source square\n      $srcSquare.find('.' + CSS.piece).remove()\n\n      function onFinishAnimation1 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation1\n      }\n      $animatedPiece.animate(destSquarePosition, opts)\n    }\n\n    function animateSparePieceToSquare (piece, dest, completeFn) {\n      var srcOffset = $('#' + sparePiecesElsIds[piece]).offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destOffset = $destSquare.offset()\n\n      // create the animate piece\n      var pieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, pieceId))\n      var $animatedPiece = $('#' + pieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        left: srcOffset.left,\n        top: srcOffset.top\n      })\n\n      // on complete\n      function onFinishAnimation2 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.find('.' + CSS.piece).remove()\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation2\n      }\n      $animatedPiece.animate(destOffset, opts)\n    }\n\n    // execute an array of animations\n    function doAnimations (animations, oldPos, newPos) {\n      if (animations.length === 0) return\n\n      var numFinished = 0\n      function onFinishAnimation3 () {\n        // exit if all the animations aren't finished\n        numFinished = numFinished + 1\n        if (numFinished !== animations.length) return\n\n        drawPositionInstant()\n\n        // run their onMoveEnd function\n        if (isFunction(config.onMoveEnd)) {\n          config.onMoveEnd(deepCopy(oldPos), deepCopy(newPos))\n        }\n      }\n\n      for (var i = 0; i < animations.length; i++) {\n        var animation = animations[i]\n\n        // clear a piece\n        if (animation.type === 'clear') {\n          $('#' + squareElsIds[animation.square] + ' .' + CSS.piece)\n            .fadeOut(config.trashSpeed, onFinishAnimation3)\n\n        // add a piece with no spare pieces - fade the piece onto the square\n        } else if (animation.type === 'add' && !config.sparePieces) {\n          $('#' + squareElsIds[animation.square])\n            .append(buildPieceHTML(animation.piece, true))\n            .find('.' + CSS.piece)\n            .fadeIn(config.appearSpeed, onFinishAnimation3)\n\n        // add a piece with spare pieces - animate from the spares\n        } else if (animation.type === 'add' && config.sparePieces) {\n          animateSparePieceToSquare(animation.piece, animation.square, onFinishAnimation3)\n\n        // move a piece from squareA to squareB\n        } else if (animation.type === 'move') {\n          animateSquareToSquare(animation.source, animation.destination, animation.piece, onFinishAnimation3)\n        }\n      }\n    }\n\n    // calculate an array of animations that need to happen in order to get\n    // from pos1 to pos2\n    function calculateAnimations (pos1, pos2) {\n      // make copies of both\n      pos1 = deepCopy(pos1)\n      pos2 = deepCopy(pos2)\n\n      var animations = []\n      var squaresMovedTo = {}\n\n      // remove pieces that are the same in both positions\n      for (var i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        if (pos1.hasOwnProperty(i) && pos1[i] === pos2[i]) {\n          delete pos1[i]\n          delete pos2[i]\n        }\n      }\n\n      // find all the \"move\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        var closestPiece = findClosestPiece(pos1, pos2[i], i)\n        if (closestPiece) {\n          animations.push({\n            type: 'move',\n            source: closestPiece,\n            destination: i,\n            piece: pos2[i]\n          })\n\n          delete pos1[closestPiece]\n          delete pos2[i]\n          squaresMovedTo[i] = true\n        }\n      }\n\n      // \"add\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'add',\n          square: i,\n          piece: pos2[i]\n        })\n\n        delete pos2[i]\n      }\n\n      // \"clear\" animations\n      for (i in pos1) {\n        if (!pos1.hasOwnProperty(i)) continue\n\n        // do not clear a piece if it is on a square that is the result\n        // of a \"move\", ie: a piece capture\n        if (squaresMovedTo.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'clear',\n          square: i,\n          piece: pos1[i]\n        })\n\n        delete pos1[i]\n      }\n\n      return animations\n    }\n\n    // -------------------------------------------------------------------------\n    // Control Flow\n    // -------------------------------------------------------------------------\n\n    function drawPositionInstant () {\n      // clear the board\n      $board.find('.' + CSS.piece).remove()\n\n      // add the pieces\n      for (var i in currentPosition) {\n        if (!currentPosition.hasOwnProperty(i)) continue\n\n        $('#' + squareElsIds[i]).append(buildPieceHTML(currentPosition[i]))\n      }\n    }\n\n    function drawBoard () {\n      $board.html(buildBoardHTML(currentOrientation, squareSize, config.showNotation))\n      drawPositionInstant()\n\n      if (config.sparePieces) {\n        if (currentOrientation === 'white') {\n          $sparePiecesTop.html(buildSparePiecesHTML('black'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('white'))\n        } else {\n          $sparePiecesTop.html(buildSparePiecesHTML('white'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('black'))\n        }\n      }\n    }\n\n    function setCurrentPosition (position) {\n      var oldPos = deepCopy(currentPosition)\n      var newPos = deepCopy(position)\n      var oldFen = objToFen(oldPos)\n      var newFen = objToFen(newPos)\n\n      // do nothing if no change in position\n      if (oldFen === newFen) return\n\n      // run their onChange function\n      if (isFunction(config.onChange)) {\n        config.onChange(oldPos, newPos)\n      }\n\n      // update state\n      currentPosition = position\n    }\n\n    function isXYOnSquare (x, y) {\n      for (var i in squareElsOffsets) {\n        if (!squareElsOffsets.hasOwnProperty(i)) continue\n\n        var s = squareElsOffsets[i]\n        if (x >= s.left &&\n            x < s.left + squareSize &&\n            y >= s.top &&\n            y < s.top + squareSize) {\n          return i\n        }\n      }\n\n      return 'offboard'\n    }\n\n    // records the XY coords of every square into memory\n    function captureSquareOffsets () {\n      squareElsOffsets = {}\n\n      for (var i in squareElsIds) {\n        if (!squareElsIds.hasOwnProperty(i)) continue\n\n        squareElsOffsets[i] = $('#' + squareElsIds[i]).offset()\n      }\n    }\n\n    function removeSquareHighlights () {\n      $board\n        .find('.' + CSS.square)\n        .removeClass(CSS.highlight1 + ' ' + CSS.highlight2)\n    }\n\n    function snapbackDraggedPiece () {\n      // there is no \"snapback\" for spare pieces\n      if (draggedPieceSource === 'spare') {\n        trashDraggedPiece()\n        return\n      }\n\n      removeSquareHighlights()\n\n      // animation complete\n      function complete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // run their onSnapbackEnd function\n        if (isFunction(config.onSnapbackEnd)) {\n          config.onSnapbackEnd(\n            draggedPiece,\n            draggedPieceSource,\n            deepCopy(currentPosition),\n            currentOrientation\n          )\n        }\n      }\n\n      // get source square position\n      var sourceSquarePosition = $('#' + squareElsIds[draggedPieceSource]).offset()\n\n      // animate the piece to the target square\n      var opts = {\n        duration: config.snapbackSpeed,\n        complete: complete\n      }\n      $draggedPiece.animate(sourceSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function trashDraggedPiece () {\n      removeSquareHighlights()\n\n      // remove the source piece\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      setCurrentPosition(newPosition)\n\n      // redraw the position\n      drawPositionInstant()\n\n      // hide the dragged piece\n      $draggedPiece.fadeOut(config.trashSpeed)\n\n      // set state\n      isDragging = false\n    }\n\n    function dropDraggedPieceOnSquare (square) {\n      removeSquareHighlights()\n\n      // update position\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      newPosition[square] = draggedPiece\n      setCurrentPosition(newPosition)\n\n      // get target square information\n      var targetSquarePosition = $('#' + squareElsIds[square]).offset()\n\n      // animation complete\n      function onAnimationComplete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // execute their onSnapEnd function\n        if (isFunction(config.onSnapEnd)) {\n          config.onSnapEnd(draggedPieceSource, square, draggedPiece)\n        }\n      }\n\n      // snap the piece to the target square\n      var opts = {\n        duration: config.snapSpeed,\n        complete: onAnimationComplete\n      }\n      $draggedPiece.animate(targetSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function beginDraggingPiece (source, piece, x, y) {\n      // run their custom onDragStart function\n      // their custom onDragStart function can cancel drag start\n      if (isFunction(config.onDragStart) &&\n          config.onDragStart(source, piece, deepCopy(currentPosition), currentOrientation) === false) {\n        return\n      }\n\n      // set state\n      isDragging = true\n      draggedPiece = piece\n      draggedPieceSource = source\n\n      // if the piece came from spare pieces, location is offboard\n      if (source === 'spare') {\n        draggedPieceLocation = 'offboard'\n      } else {\n        draggedPieceLocation = source\n      }\n\n      // capture the x, y coords of all squares in memory\n      captureSquareOffsets()\n\n      // create the dragged piece\n      $draggedPiece.attr('src', buildPieceImgSrc(piece)).css({\n        display: '',\n        position: 'absolute',\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      if (source !== 'spare') {\n        // highlight the source square and hide the piece\n        $('#' + squareElsIds[source])\n          .addClass(CSS.highlight1)\n          .find('.' + CSS.piece)\n          .css('display', 'none')\n      }\n    }\n\n    function updateDraggedPiece (x, y) {\n      // put the dragged piece over the mouse cursor\n      $draggedPiece.css({\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      // get location\n      var location = isXYOnSquare(x, y)\n\n      // do nothing if the location has not changed\n      if (location === draggedPieceLocation) return\n\n      // remove highlight from previous square\n      if (validSquare(draggedPieceLocation)) {\n        $('#' + squareElsIds[draggedPieceLocation]).removeClass(CSS.highlight2)\n      }\n\n      // add highlight to new square\n      if (validSquare(location)) {\n        $('#' + squareElsIds[location]).addClass(CSS.highlight2)\n      }\n\n      // run onDragMove\n      if (isFunction(config.onDragMove)) {\n        config.onDragMove(\n          location,\n          draggedPieceLocation,\n          draggedPieceSource,\n          draggedPiece,\n          deepCopy(currentPosition),\n          currentOrientation\n        )\n      }\n\n      // update state\n      draggedPieceLocation = location\n    }\n\n    function stopDraggedPiece (location) {\n      // determine what the action should be\n      var action = 'drop'\n      if (location === 'offboard' && config.dropOffBoard === 'snapback') {\n        action = 'snapback'\n      }\n      if (location === 'offboard' && config.dropOffBoard === 'trash') {\n        action = 'trash'\n      }\n\n      // run their onDrop function, which can potentially change the drop action\n      if (isFunction(config.onDrop)) {\n        var newPosition = deepCopy(currentPosition)\n\n        // source piece is a spare piece and position is off the board\n        // if (draggedPieceSource === 'spare' && location === 'offboard') {...}\n        // position has not changed; do nothing\n\n        // source piece is a spare piece and position is on the board\n        if (draggedPieceSource === 'spare' && validSquare(location)) {\n          // add the piece to the board\n          newPosition[location] = draggedPiece\n        }\n\n        // source piece was on the board and position is off the board\n        if (validSquare(draggedPieceSource) && location === 'offboard') {\n          // remove the piece from the board\n          delete newPosition[draggedPieceSource]\n        }\n\n        // source piece was on the board and position is on the board\n        if (validSquare(draggedPieceSource) && validSquare(location)) {\n          // move the piece\n          delete newPosition[draggedPieceSource]\n          newPosition[location] = draggedPiece\n        }\n\n        var oldPosition = deepCopy(currentPosition)\n\n        var result = config.onDrop(\n          draggedPieceSource,\n          location,\n          draggedPiece,\n          newPosition,\n          oldPosition,\n          currentOrientation\n        )\n        if (result === 'snapback' || result === 'trash') {\n          action = result\n        }\n      }\n\n      // do it!\n      if (action === 'snapback') {\n        snapbackDraggedPiece()\n      } else if (action === 'trash') {\n        trashDraggedPiece()\n      } else if (action === 'drop') {\n        dropDraggedPieceOnSquare(location)\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    // clear the board\n    widget.clear = function (useAnimation) {\n      widget.position({}, useAnimation)\n    }\n\n    // remove the widget from the page\n    widget.destroy = function () {\n      // remove markup\n      $container.html('')\n      $draggedPiece.remove()\n\n      // remove event handlers\n      $container.unbind()\n    }\n\n    // shorthand method to get the current FEN\n    widget.fen = function () {\n      return widget.position('fen')\n    }\n\n    // flip orientation\n    widget.flip = function () {\n      return widget.orientation('flip')\n    }\n\n    // move pieces\n    // TODO: this method should be variadic as well as accept an array of moves\n    widget.move = function () {\n      // no need to throw an error here; just do nothing\n      // TODO: this should return the current position\n      if (arguments.length === 0) return\n\n      var useAnimation = true\n\n      // collect the moves into an object\n      var moves = {}\n      for (var i = 0; i < arguments.length; i++) {\n        // any \"false\" to this function means no animations\n        if (arguments[i] === false) {\n          useAnimation = false\n          continue\n        }\n\n        // skip invalid arguments\n        if (!validMove(arguments[i])) {\n          error(2826, 'Invalid move passed to the move method.', arguments[i])\n          continue\n        }\n\n        var tmp = arguments[i].split('-')\n        moves[tmp[0]] = tmp[1]\n      }\n\n      // calculate position from moves\n      var newPos = calculatePositionFromMoves(currentPosition, moves)\n\n      // update the board\n      widget.position(newPos, useAnimation)\n\n      // return the new position object\n      return newPos\n    }\n\n    widget.orientation = function (arg) {\n      // no arguments, return the current orientation\n      if (arguments.length === 0) {\n        return currentOrientation\n      }\n\n      // set to white or black\n      if (arg === 'white' || arg === 'black') {\n        currentOrientation = arg\n        drawBoard()\n        return currentOrientation\n      }\n\n      // flip orientation\n      if (arg === 'flip') {\n        currentOrientation = currentOrientation === 'white' ? 'black' : 'white'\n        drawBoard()\n        return currentOrientation\n      }\n\n      error(5482, 'Invalid value passed to the orientation method.', arg)\n    }\n\n    widget.position = function (position, useAnimation) {\n      // no arguments, return the current position\n      if (arguments.length === 0) {\n        return deepCopy(currentPosition)\n      }\n\n      // get position as FEN\n      if (isString(position) && position.toLowerCase() === 'fen') {\n        return objToFen(currentPosition)\n      }\n\n      // start position\n      if (isString(position) && position.toLowerCase() === 'start') {\n        position = deepCopy(START_POSITION)\n      }\n\n      // convert FEN to position object\n      if (validFen(position)) {\n        position = fenToObj(position)\n      }\n\n      // validate position object\n      if (!validPositionObject(position)) {\n        error(6482, 'Invalid value passed to the position method.', position)\n        return\n      }\n\n      // default for useAnimations is true\n      if (useAnimation !== false) useAnimation = true\n\n      if (useAnimation) {\n        // start the animations\n        var animations = calculateAnimations(currentPosition, position)\n        doAnimations(animations, currentPosition, position)\n\n        // set the new position\n        setCurrentPosition(position)\n      } else {\n        // instant update\n        setCurrentPosition(position)\n        drawPositionInstant()\n      }\n    }\n\n    widget.resize = function () {\n      // calulate the new square size\n      squareSize = calculateSquareSize()\n\n      // set board width\n      $board.css('width', squareSize * 8 + 'px')\n\n      // set drag piece size\n      $draggedPiece.css({\n        height: squareSize,\n        width: squareSize\n      })\n\n      // spare pieces\n      if (config.sparePieces) {\n        $container\n          .find('.' + CSS.sparePieces)\n          .css('paddingLeft', squareSize + boardBorderSize + 'px')\n      }\n\n      // redraw the board\n      drawBoard()\n    }\n\n    // set the starting position\n    widget.start = function (useAnimation) {\n      widget.position('start', useAnimation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Browser Events\n    // -------------------------------------------------------------------------\n\n    function stopDefault (evt) {\n      evt.preventDefault()\n    }\n\n    function mousedownSquare (evt) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      beginDraggingPiece(square, currentPosition[square], evt.pageX, evt.pageY)\n    }\n\n    function touchstartSquare (e) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        square,\n        currentPosition[square],\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousedownSparePiece (evt) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      beginDraggingPiece('spare', piece, evt.pageX, evt.pageY)\n    }\n\n    function touchstartSparePiece (e) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        'spare',\n        piece,\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousemoveWindow (evt) {\n      if (isDragging) {\n        updateDraggedPiece(evt.pageX, evt.pageY)\n      }\n    }\n\n    var throttledMousemoveWindow = throttle(mousemoveWindow, config.dragThrottleRate)\n\n    function touchmoveWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // prevent screen from scrolling\n      evt.preventDefault()\n\n      updateDraggedPiece(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n    }\n\n    var throttledTouchmoveWindow = throttle(touchmoveWindow, config.dragThrottleRate)\n\n    function mouseupWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.pageX, evt.pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function touchendWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function mouseenterSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide a onMouseoverSquare function\n      if (!isFunction(config.onMouseoverSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoverSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    function mouseleaveSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide an onMouseoutSquare function\n      if (!isFunction(config.onMouseoutSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoutSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    function addEvents () {\n      // prevent \"image drag\"\n      $('body').on('mousedown mousemove', '.' + CSS.piece, stopDefault)\n\n      // mouse drag pieces\n      $board.on('mousedown', '.' + CSS.square, mousedownSquare)\n      $container.on('mousedown', '.' + CSS.sparePieces + ' .' + CSS.piece, mousedownSparePiece)\n\n      // mouse enter / leave square\n      $board\n        .on('mouseenter', '.' + CSS.square, mouseenterSquare)\n        .on('mouseleave', '.' + CSS.square, mouseleaveSquare)\n\n      // piece drag\n      var $window = $(window)\n      $window\n        .on('mousemove', throttledMousemoveWindow)\n        .on('mouseup', mouseupWindow)\n\n      // touch drag pieces\n      if (isTouchDevice()) {\n        $board.on('touchstart', '.' + CSS.square, touchstartSquare)\n        $container.on('touchstart', '.' + CSS.sparePieces + ' .' + CSS.piece, touchstartSparePiece)\n        $window\n          .on('touchmove', throttledTouchmoveWindow)\n          .on('touchend', touchendWindow)\n      }\n    }\n\n    function initDOM () {\n      // create unique IDs for all the elements we will create\n      createElIds()\n\n      // build board and save it in memory\n      $container.html(buildContainerHTML(config.sparePieces))\n      $board = $container.find('.' + CSS.board)\n\n      if (config.sparePieces) {\n        $sparePiecesTop = $container.find('.' + CSS.sparePiecesTop)\n        $sparePiecesBottom = $container.find('.' + CSS.sparePiecesBottom)\n      }\n\n      // create the drag piece\n      var draggedPieceId = uuid()\n      $('body').append(buildPieceHTML('wP', true, draggedPieceId))\n      $draggedPiece = $('#' + draggedPieceId)\n\n      // TODO: need to remove this dragged piece element if the board is no\n      // longer in the DOM\n\n      // get the border size\n      boardBorderSize = parseInt($board.css('borderLeftWidth'), 10)\n\n      // set the size and draw the board\n      widget.resize()\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    setInitialState()\n    initDOM()\n    addEvents()\n\n    // return the widget object\n    return widget\n  } // end constructor\n\n  // TODO: do module exports here\n  window['Chessboard'] = constructor\n\n  // support legacy ChessBoard name\n  window['ChessBoard'] = window['Chessboard']\n\n  // expose util functions\n  window['Chessboard']['fenToObj'] = fenToObj\n  window['Chessboard']['objToFen'] = objToFen\n})() // end anonymous wrapper\n",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "chessboard.js v1.0.0",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    },
                    {
                        "code": "/*\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n/* minified license below  */\n\n/* @license\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * Released under the BSD license\n * https://github.com/jhlywa/chess.js/blob/master/LICENSE\n */\n\nvar Chess = function(fen) {\n\n  /* jshint indent: false */\n\n  var BLACK = 'b';\n  var WHITE = 'w';\n\n  var EMPTY = -1;\n\n  var PAWN = 'p';\n  var KNIGHT = 'n';\n  var BISHOP = 'b';\n  var ROOK = 'r';\n  var QUEEN = 'q';\n  var KING = 'k';\n\n  var SYMBOLS = 'pnbrqkPNBRQK';\n\n  var DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n\n  var POSSIBLE_RESULTS = ['1-0', '0-1', '1/2-1/2', '*'];\n\n  var PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15]\n  };\n\n  var PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14,  18, 33, 31,  14],\n    b: [-17, -15,  17,  15],\n    r: [-16,   1,  16,  -1],\n    q: [-17, -16, -15,   1,  17, 16, 15,  -1],\n    k: [-17, -16, -15,   1,  17, 16, 15,  -1]\n  };\n\n  var ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20\n  ];\n\n  var RAYS = [\n     17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,\n      0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,\n      0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,\n      0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,\n      0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,\n      1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,\n      0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,\n      0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,\n      0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,\n      0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,\n    -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17\n  ];\n\n  var SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 };\n\n  var FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q'\n  };\n\n  var BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64\n  };\n\n  var RANK_1 = 7;\n  var RANK_2 = 6;\n  var RANK_3 = 5;\n  var RANK_4 = 4;\n  var RANK_5 = 3;\n  var RANK_6 = 2;\n  var RANK_7 = 1;\n  var RANK_8 = 0;\n\n  var SQUARES = {\n    a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,\n    a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,\n    a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,\n    a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,\n    a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,\n    a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,\n    a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n  };\n\n  var ROOKS = {\n    w: [{square: SQUARES.a1, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h1, flag: BITS.KSIDE_CASTLE}],\n    b: [{square: SQUARES.a8, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h8, flag: BITS.KSIDE_CASTLE}]\n  };\n\n  var board = new Array(128);\n  var kings = {w: EMPTY, b: EMPTY};\n  var turn = WHITE;\n  var castling = {w: 0, b: 0};\n  var ep_square = EMPTY;\n  var half_moves = 0;\n  var move_number = 1;\n  var history = [];\n  var header = {};\n\n  /* if the user passes in a fen string, load it, else default to\n   * starting position\n   */\n  if (typeof fen === 'undefined') {\n    load(DEFAULT_POSITION);\n  } else {\n    load(fen);\n  }\n\n  function clear() {\n    board = new Array(128);\n    kings = {w: EMPTY, b: EMPTY};\n    turn = WHITE;\n    castling = {w: 0, b: 0};\n    ep_square = EMPTY;\n    half_moves = 0;\n    move_number = 1;\n    history = [];\n    header = {};\n    update_setup(generate_fen());\n  }\n\n  function reset() {\n    load(DEFAULT_POSITION);\n  }\n\n  function load(fen) {\n    var tokens = fen.split(/\\s+/);\n    var position = tokens[0];\n    var square = 0;\n\n    if (!validate_fen(fen).valid) {\n      return false;\n    }\n\n    clear();\n\n    for (var i = 0; i < position.length; i++) {\n      var piece = position.charAt(i);\n\n      if (piece === '/') {\n        square += 8;\n      } else if (is_digit(piece)) {\n        square += parseInt(piece, 10);\n      } else {\n        var color = (piece < 'a') ? WHITE : BLACK;\n        put({type: piece.toLowerCase(), color: color}, algebraic(square));\n        square++;\n      }\n    }\n\n    turn = tokens[1];\n\n    if (tokens[2].indexOf('K') > -1) {\n      castling.w |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      castling.w |= BITS.QSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      castling.b |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      castling.b |= BITS.QSIDE_CASTLE;\n    }\n\n    ep_square = (tokens[3] === '-') ? EMPTY : SQUARES[tokens[3]];\n    half_moves = parseInt(tokens[4], 10);\n    move_number = parseInt(tokens[5], 10);\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  /* TODO: this function is pretty much crap - it validates structure but\n   * completely ignores content (e.g. doesn't verify that each side has a king)\n   * ... we should rewrite this, and ditch the silly error_number field while\n   * we're at it\n   */\n  function validate_fen(fen) {\n    var errors = {\n       0: 'No errors.',\n       1: 'FEN string must contain six space-delimited fields.',\n       2: '6th field (move number) must be a positive integer.',\n       3: '5th field (half move counter) must be a non-negative integer.',\n       4: '4th field (en-passant square) is invalid.',\n       5: '3rd field (castling availability) is invalid.',\n       6: '2nd field (side to move) is invalid.',\n       7: '1st field (piece positions) does not contain 8 \\'/\\'-delimited rows.',\n       8: '1st field (piece positions) is invalid [consecutive numbers].',\n       9: '1st field (piece positions) is invalid [invalid piece].',\n      10: '1st field (piece positions) is invalid [row too large].',\n      11: 'Illegal en-passant square',\n    };\n\n    /* 1st criterion: 6 space-seperated fields? */\n    var tokens = fen.split(/\\s+/);\n    if (tokens.length !== 6) {\n      return {valid: false, error_number: 1, error: errors[1]};\n    }\n\n    /* 2nd criterion: move number field is a integer value > 0? */\n    if (isNaN(tokens[5]) || (parseInt(tokens[5], 10) <= 0)) {\n      return {valid: false, error_number: 2, error: errors[2]};\n    }\n\n    /* 3rd criterion: half move counter is an integer >= 0? */\n    if (isNaN(tokens[4]) || (parseInt(tokens[4], 10) < 0)) {\n      return {valid: false, error_number: 3, error: errors[3]};\n    }\n\n    /* 4th criterion: 4th field is a valid e.p.-string? */\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n      return {valid: false, error_number: 4, error: errors[4]};\n    }\n\n    /* 5th criterion: 3th field is a valid castle-string? */\n    if( !/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {\n      return {valid: false, error_number: 5, error: errors[5]};\n    }\n\n    /* 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)? */\n    if (!/^(w|b)$/.test(tokens[1])) {\n      return {valid: false, error_number: 6, error: errors[6]};\n    }\n\n    /* 7th criterion: 1st field contains 8 rows? */\n    var rows = tokens[0].split('/');\n    if (rows.length !== 8) {\n      return {valid: false, error_number: 7, error: errors[7]};\n    }\n\n    /* 8th criterion: every row is valid? */\n    for (var i = 0; i < rows.length; i++) {\n      /* check for right sum of fields AND not two numbers in succession */\n      var sum_fields = 0;\n      var previous_was_number = false;\n\n      for (var k = 0; k < rows[i].length; k++) {\n        if (!isNaN(rows[i][k])) {\n          if (previous_was_number) {\n            return {valid: false, error_number: 8, error: errors[8]};\n          }\n          sum_fields += parseInt(rows[i][k], 10);\n          previous_was_number = true;\n        } else {\n          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n            return {valid: false, error_number: 9, error: errors[9]};\n          }\n          sum_fields += 1;\n          previous_was_number = false;\n        }\n      }\n      if (sum_fields !== 8) {\n        return {valid: false, error_number: 10, error: errors[10]};\n      }\n    }\n\n    if ((tokens[3][1] == '3' && tokens[1] == 'w') ||\n        (tokens[3][1] == '6' && tokens[1] == 'b')) {\n          return {valid: false, error_number: 11, error: errors[11]};\n    }\n\n    /* everything's okay! */\n    return {valid: true, error_number: 0, error: errors[0]};\n  }\n\n  function generate_fen() {\n    var empty = 0;\n    var fen = '';\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      if (board[i] == null) {\n        empty++;\n      } else {\n        if (empty > 0) {\n          fen += empty;\n          empty = 0;\n        }\n        var color = board[i].color;\n        var piece = board[i].type;\n\n        fen += (color === WHITE) ?\n                 piece.toUpperCase() : piece.toLowerCase();\n      }\n\n      if ((i + 1) & 0x88) {\n        if (empty > 0) {\n          fen += empty;\n        }\n\n        if (i !== SQUARES.h1) {\n          fen += '/';\n        }\n\n        empty = 0;\n        i += 8;\n      }\n    }\n\n    var cflags = '';\n    if (castling[WHITE] & BITS.KSIDE_CASTLE) { cflags += 'K'; }\n    if (castling[WHITE] & BITS.QSIDE_CASTLE) { cflags += 'Q'; }\n    if (castling[BLACK] & BITS.KSIDE_CASTLE) { cflags += 'k'; }\n    if (castling[BLACK] & BITS.QSIDE_CASTLE) { cflags += 'q'; }\n\n    /* do we have an empty castling flag? */\n    cflags = cflags || '-';\n    var epflags = (ep_square === EMPTY) ? '-' : algebraic(ep_square);\n\n    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ');\n  }\n\n  function set_header(args) {\n    for (var i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' &&\n          typeof args[i + 1] === 'string') {\n        header[args[i]] = args[i + 1];\n      }\n    }\n    return header;\n  }\n\n  /* called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object.  if the FEN is\n   * equal to the default position, the SetUp and FEN are deleted\n   * the setup is only updated if history.length is zero, ie moves haven't been\n   * made.\n   */\n  function update_setup(fen) {\n    if (history.length > 0) return;\n\n    if (fen !== DEFAULT_POSITION) {\n      header['SetUp'] = '1';\n      header['FEN'] = fen;\n    } else {\n      delete header['SetUp'];\n      delete header['FEN'];\n    }\n  }\n\n  function get(square) {\n    var piece = board[SQUARES[square]];\n    return (piece) ? {type: piece.type, color: piece.color} : null;\n  }\n\n  function put(piece, square) {\n    /* check for valid piece object */\n    if (!('type' in piece && 'color' in piece)) {\n      return false;\n    }\n\n    /* check for piece */\n    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {\n      return false;\n    }\n\n    /* check for valid square */\n    if (!(square in SQUARES)) {\n      return false;\n    }\n\n    var sq = SQUARES[square];\n\n    /* don't let the user place more than one king */\n    if (piece.type == KING &&\n        !(kings[piece.color] == EMPTY || kings[piece.color] == sq)) {\n      return false;\n    }\n\n    board[sq] = {type: piece.type, color: piece.color};\n    if (piece.type === KING) {\n      kings[piece.color] = sq;\n    }\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  function remove(square) {\n    var piece = get(square);\n    board[SQUARES[square]] = null;\n    if (piece && piece.type === KING) {\n      kings[piece.color] = EMPTY;\n    }\n\n    update_setup(generate_fen());\n\n    return piece;\n  }\n\n  function build_move(board, from, to, flags, promotion) {\n    var move = {\n      color: turn,\n      from: from,\n      to: to,\n      flags: flags,\n      piece: board[from].type\n    };\n\n    if (promotion) {\n      move.flags |= BITS.PROMOTION;\n      move.promotion = promotion;\n    }\n\n    if (board[to]) {\n      move.captured = board[to].type;\n    } else if (flags & BITS.EP_CAPTURE) {\n        move.captured = PAWN;\n    }\n    return move;\n  }\n\n  function generate_moves(options) {\n    function add_move(board, moves, from, to, flags) {\n      /* if pawn promotion */\n      if (board[from].type === PAWN &&\n         (rank(to) === RANK_8 || rank(to) === RANK_1)) {\n          var pieces = [QUEEN, ROOK, BISHOP, KNIGHT];\n          for (var i = 0, len = pieces.length; i < len; i++) {\n            moves.push(build_move(board, from, to, flags, pieces[i]));\n          }\n      } else {\n       moves.push(build_move(board, from, to, flags));\n      }\n    }\n\n    var moves = [];\n    var us = turn;\n    var them = swap_color(us);\n    var second_rank = {b: RANK_7, w: RANK_2};\n\n    var first_sq = SQUARES.a8;\n    var last_sq = SQUARES.h1;\n    var single_square = false;\n\n    /* do we want legal moves? */\n    var legal = (typeof options !== 'undefined' && 'legal' in options) ?\n                options.legal : true;\n\n    /* are we generating moves for a single square? */\n    if (typeof options !== 'undefined' && 'square' in options) {\n      if (options.square in SQUARES) {\n        first_sq = last_sq = SQUARES[options.square];\n        single_square = true;\n      } else {\n        /* invalid square */\n        return [];\n      }\n    }\n\n    for (var i = first_sq; i <= last_sq; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece == null || piece.color !== us) {\n        continue;\n      }\n\n      if (piece.type === PAWN) {\n        /* single square, non-capturing */\n        var square = i + PAWN_OFFSETS[us][0];\n        if (board[square] == null) {\n            add_move(board, moves, i, square, BITS.NORMAL);\n\n          /* double square */\n          var square = i + PAWN_OFFSETS[us][1];\n          if (second_rank[us] === rank(i) && board[square] == null) {\n            add_move(board, moves, i, square, BITS.BIG_PAWN);\n          }\n        }\n\n        /* pawn captures */\n        for (j = 2; j < 4; j++) {\n          var square = i + PAWN_OFFSETS[us][j];\n          if (square & 0x88) continue;\n\n          if (board[square] != null &&\n              board[square].color === them) {\n              add_move(board, moves, i, square, BITS.CAPTURE);\n          } else if (square === ep_square) {\n              add_move(board, moves, i, ep_square, BITS.EP_CAPTURE);\n          }\n        }\n      } else {\n        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {\n          var offset = PIECE_OFFSETS[piece.type][j];\n          var square = i;\n\n          while (true) {\n            square += offset;\n            if (square & 0x88) break;\n\n            if (board[square] == null) {\n              add_move(board, moves, i, square, BITS.NORMAL);\n            } else {\n              if (board[square].color === us) break;\n              add_move(board, moves, i, square, BITS.CAPTURE);\n              break;\n            }\n\n            /* break, if knight or king */\n            if (piece.type === 'n' || piece.type === 'k') break;\n          }\n        }\n      }\n    }\n\n    /* check for castling if: a) we're generating all moves, or b) we're doing\n     * single square move generation on the king's square\n     */\n    if ((!single_square) || last_sq === kings[us]) {\n      /* king-side castling */\n      if (castling[us] & BITS.KSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from + 2;\n\n        if (board[castling_from + 1] == null &&\n            board[castling_to]       == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from + 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us] , castling_to,\n                   BITS.KSIDE_CASTLE);\n        }\n      }\n\n      /* queen-side castling */\n      if (castling[us] & BITS.QSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from - 2;\n\n        if (board[castling_from - 1] == null &&\n            board[castling_from - 2] == null &&\n            board[castling_from - 3] == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from - 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us], castling_to,\n                   BITS.QSIDE_CASTLE);\n        }\n      }\n    }\n\n    /* return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal) {\n      return moves;\n    }\n\n    /* filter out illegal moves */\n    var legal_moves = [];\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(us)) {\n        legal_moves.push(moves[i]);\n      }\n      undo_move();\n    }\n\n    return legal_moves;\n  }\n\n  /* convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} sloppy Use the sloppy SAN generator to work around over\n   * disambiguation bugs in Fritz and Chessbase.  See below:\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  function move_to_san(move, sloppy) {\n\n    var output = '';\n\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O';\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O';\n    } else {\n      var disambiguator = get_disambiguator(move, sloppy);\n\n      if (move.piece !== PAWN) {\n        output += move.piece.toUpperCase() + disambiguator;\n      }\n\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0];\n        }\n        output += 'x';\n      }\n\n      output += algebraic(move.to);\n\n      if (move.flags & BITS.PROMOTION) {\n        output += '=' + move.promotion.toUpperCase();\n      }\n    }\n\n    make_move(move);\n    if (in_check()) {\n      if (in_checkmate()) {\n        output += '#';\n      } else {\n        output += '+';\n      }\n    }\n    undo_move();\n\n    return output;\n  }\n\n  // parses all of the decorators out of a SAN string\n  function stripped_san(move) {\n    return move.replace(/=/,'').replace(/[+#]?[?!]*$/,'');\n  }\n\n  function attacked(color, square) {\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      /* if empty square or wrong color */\n      if (board[i] == null || board[i].color !== color) continue;\n\n      var piece = board[i];\n      var difference = i - square;\n      var index = difference + 119;\n\n      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {\n        if (piece.type === PAWN) {\n          if (difference > 0) {\n            if (piece.color === WHITE) return true;\n          } else {\n            if (piece.color === BLACK) return true;\n          }\n          continue;\n        }\n\n        /* if the piece is a knight or a king */\n        if (piece.type === 'n' || piece.type === 'k') return true;\n\n        var offset = RAYS[index];\n        var j = i + offset;\n\n        var blocked = false;\n        while (j !== square) {\n          if (board[j] != null) { blocked = true; break; }\n          j += offset;\n        }\n\n        if (!blocked) return true;\n      }\n    }\n\n    return false;\n  }\n\n  function king_attacked(color) {\n    return attacked(swap_color(color), kings[color]);\n  }\n\n  function in_check() {\n    return king_attacked(turn);\n  }\n\n  function in_checkmate() {\n    return in_check() && generate_moves().length === 0;\n  }\n\n  function in_stalemate() {\n    return !in_check() && generate_moves().length === 0;\n  }\n\n  function insufficient_material() {\n    var pieces = {};\n    var bishops = [];\n    var num_pieces = 0;\n    var sq_color = 0;\n\n    for (var i = SQUARES.a8; i<= SQUARES.h1; i++) {\n      sq_color = (sq_color + 1) % 2;\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece) {\n        pieces[piece.type] = (piece.type in pieces) ?\n                              pieces[piece.type] + 1 : 1;\n        if (piece.type === BISHOP) {\n          bishops.push(sq_color);\n        }\n        num_pieces++;\n      }\n    }\n\n    /* k vs. k */\n    if (num_pieces === 2) { return true; }\n\n    /* k vs. kn .... or .... k vs. kb */\n    else if (num_pieces === 3 && (pieces[BISHOP] === 1 ||\n                                 pieces[KNIGHT] === 1)) { return true; }\n\n    /* kb vs. kb where any number of bishops are all on the same color */\n    else if (num_pieces === pieces[BISHOP] + 2) {\n      var sum = 0;\n      var len = bishops.length;\n      for (var i = 0; i < len; i++) {\n        sum += bishops[i];\n      }\n      if (sum === 0 || sum === len) { return true; }\n    }\n\n    return false;\n  }\n\n  function in_threefold_repetition() {\n    /* TODO: while this function is fine for casual use, a better\n     * implementation would use a Zobrist key (instead of FEN). the\n     * Zobrist key would be maintained in the make_move/undo_move functions,\n     * avoiding the costly that we do below.\n     */\n    var moves = [];\n    var positions = {};\n    var repetition = false;\n\n    while (true) {\n      var move = undo_move();\n      if (!move) break;\n      moves.push(move);\n    }\n\n    while (true) {\n      /* remove the last two fields in the FEN string, they're not needed\n       * when checking for draw by rep */\n      var fen = generate_fen().split(' ').slice(0,4).join(' ');\n\n      /* has the position occurred three or move times */\n      positions[fen] = (fen in positions) ? positions[fen] + 1 : 1;\n      if (positions[fen] >= 3) {\n        repetition = true;\n      }\n\n      if (!moves.length) {\n        break;\n      }\n      make_move(moves.pop());\n    }\n\n    return repetition;\n  }\n\n  function push(move) {\n    history.push({\n      move: move,\n      kings: {b: kings.b, w: kings.w},\n      turn: turn,\n      castling: {b: castling.b, w: castling.w},\n      ep_square: ep_square,\n      half_moves: half_moves,\n      move_number: move_number\n    });\n  }\n\n  function make_move(move) {\n    var us = turn;\n    var them = swap_color(us);\n    push(move);\n\n    board[move.to] = board[move.from];\n    board[move.from] = null;\n\n    /* if ep capture, remove the captured pawn */\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (turn === BLACK) {\n        board[move.to - 16] = null;\n      } else {\n        board[move.to + 16] = null;\n      }\n    }\n\n    /* if pawn promotion, replace with new piece */\n    if (move.flags & BITS.PROMOTION) {\n      board[move.to] = {type: move.promotion, color: us};\n    }\n\n    /* if we moved the king */\n    if (board[move.to].type === KING) {\n      kings[board[move.to].color] = move.to;\n\n      /* if we castled, move the rook next to the king */\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        var castling_to = move.to - 1;\n        var castling_from = move.to + 1;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        var castling_to = move.to + 1;\n        var castling_from = move.to - 2;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      }\n\n      /* turn off castling */\n      castling[us] = '';\n    }\n\n    /* turn off castling if we move a rook */\n    if (castling[us]) {\n      for (var i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (move.from === ROOKS[us][i].square &&\n            castling[us] & ROOKS[us][i].flag) {\n          castling[us] ^= ROOKS[us][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* turn off castling if we capture a rook */\n    if (castling[them]) {\n      for (var i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (move.to === ROOKS[them][i].square &&\n            castling[them] & ROOKS[them][i].flag) {\n          castling[them] ^= ROOKS[them][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* if big pawn move, update the en passant square */\n    if (move.flags & BITS.BIG_PAWN) {\n      if (turn === 'b') {\n        ep_square = move.to - 16;\n      } else {\n        ep_square = move.to + 16;\n      }\n    } else {\n      ep_square = EMPTY;\n    }\n\n    /* reset the 50 move counter if a pawn is moved or a piece is captured */\n    if (move.piece === PAWN) {\n      half_moves = 0;\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      half_moves = 0;\n    } else {\n      half_moves++;\n    }\n\n    if (turn === BLACK) {\n      move_number++;\n    }\n    turn = swap_color(turn);\n  }\n\n  function undo_move() {\n    var old = history.pop();\n    if (old == null) { return null; }\n\n    var move = old.move;\n    kings = old.kings;\n    turn = old.turn;\n    castling = old.castling;\n    ep_square = old.ep_square;\n    half_moves = old.half_moves;\n    move_number = old.move_number;\n\n    var us = turn;\n    var them = swap_color(turn);\n\n    board[move.from] = board[move.to];\n    board[move.from].type = move.piece;  // to undo any promotions\n    board[move.to] = null;\n\n    if (move.flags & BITS.CAPTURE) {\n      board[move.to] = {type: move.captured, color: them};\n    } else if (move.flags & BITS.EP_CAPTURE) {\n      var index;\n      if (us === BLACK) {\n        index = move.to - 16;\n      } else {\n        index = move.to + 16;\n      }\n      board[index] = {type: PAWN, color: them};\n    }\n\n\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      var castling_to, castling_from;\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castling_to = move.to + 1;\n        castling_from = move.to - 1;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        castling_to = move.to - 2;\n        castling_from = move.to + 1;\n      }\n\n      board[castling_to] = board[castling_from];\n      board[castling_from] = null;\n    }\n\n    return move;\n  }\n\n  /* this function is used to uniquely identify ambiguous moves */\n  function get_disambiguator(move, sloppy) {\n    var moves = generate_moves({legal: !sloppy});\n\n    var from = move.from;\n    var to = move.to;\n    var piece = move.piece;\n\n    var ambiguities = 0;\n    var same_rank = 0;\n    var same_file = 0;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      var ambig_from = moves[i].from;\n      var ambig_to = moves[i].to;\n      var ambig_piece = moves[i].piece;\n\n      /* if a move of the same piece type ends on the same to square, we'll\n       * need to add a disambiguator to the algebraic notation\n       */\n      if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {\n        ambiguities++;\n\n        if (rank(from) === rank(ambig_from)) {\n          same_rank++;\n        }\n\n        if (file(from) === file(ambig_from)) {\n          same_file++;\n        }\n      }\n    }\n\n    if (ambiguities > 0) {\n      /* if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      if (same_rank > 0 && same_file > 0) {\n        return algebraic(from);\n      }\n      /* if the moving piece rests on the same file, use the rank symbol as the\n       * disambiguator\n       */\n      else if (same_file > 0) {\n        return algebraic(from).charAt(1);\n      }\n      /* else use the file symbol */\n      else {\n        return algebraic(from).charAt(0);\n      }\n    }\n\n    return '';\n  }\n\n  function ascii() {\n    var s = '   +------------------------+\\n';\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* display the rank */\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |';\n      }\n\n      /* empty piece */\n      if (board[i] == null) {\n        s += ' . ';\n      } else {\n        var piece = board[i].type;\n        var color = board[i].color;\n        var symbol = (color === WHITE) ?\n                     piece.toUpperCase() : piece.toLowerCase();\n        s += ' ' + symbol + ' ';\n      }\n\n      if ((i + 1) & 0x88) {\n        s += '|\\n';\n        i += 8;\n      }\n    }\n    s += '   +------------------------+\\n';\n    s += '     a  b  c  d  e  f  g  h\\n';\n\n    return s;\n  }\n\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  function move_from_san(move, sloppy) {\n    // strip off any move decorations: e.g Nf3+?!\n    var clean_move = stripped_san(move);\n\n    // if we're using the sloppy parser run a regex to grab piece, to, and from\n    // this should parse invalid SAN like: Pe2-e4, Rc1c4, Qf3xf7\n    if (sloppy) {\n      var matches = clean_move.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);\n      if (matches) {\n        var piece = matches[1];\n        var from = matches[2];\n        var to = matches[3];\n        var promotion = matches[4];\n      }\n    }\n\n    var moves = generate_moves();\n    for (var i = 0, len = moves.length; i < len; i++) {\n      // try the strict parser first, then the sloppy parser if requested\n      // by the user\n      if ((clean_move === stripped_san(move_to_san(moves[i]))) ||\n          (sloppy && clean_move === stripped_san(move_to_san(moves[i], true)))) {\n        return moves[i];\n      } else {\n        if (matches &&\n            (!piece || piece.toLowerCase() == moves[i].piece) &&\n            SQUARES[from] == moves[i].from &&\n            SQUARES[to] == moves[i].to &&\n            (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n          return moves[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n\n  /*****************************************************************************\n   * UTILITY FUNCTIONS\n   ****************************************************************************/\n  function rank(i) {\n    return i >> 4;\n  }\n\n  function file(i) {\n    return i & 15;\n  }\n\n  function algebraic(i){\n    var f = file(i), r = rank(i);\n    return 'abcdefgh'.substring(f,f+1) + '87654321'.substring(r,r+1);\n  }\n\n  function swap_color(c) {\n    return c === WHITE ? BLACK : WHITE;\n  }\n\n  function is_digit(c) {\n    return '0123456789'.indexOf(c) !== -1;\n  }\n\n  /* pretty = external move object */\n  function make_pretty(ugly_move) {\n    var move = clone(ugly_move);\n    move.san = move_to_san(move, false);\n    move.to = algebraic(move.to);\n    move.from = algebraic(move.from);\n\n    var flags = '';\n\n    for (var flag in BITS) {\n      if (BITS[flag] & move.flags) {\n        flags += FLAGS[flag];\n      }\n    }\n    move.flags = flags;\n\n    return move;\n  }\n\n  function clone(obj) {\n    var dupe = (obj instanceof Array) ? [] : {};\n\n    for (var property in obj) {\n      if (typeof property === 'object') {\n        dupe[property] = clone(obj[property]);\n      } else {\n        dupe[property] = obj[property];\n      }\n    }\n\n    return dupe;\n  }\n\n  function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  /*****************************************************************************\n   * DEBUGGING UTILITIES\n   ****************************************************************************/\n  function perft(depth) {\n    var moves = generate_moves({legal: false});\n    var nodes = 0;\n    var color = turn;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(color)) {\n        if (depth - 1 > 0) {\n          var child_nodes = perft(depth - 1);\n          nodes += child_nodes;\n        } else {\n          nodes++;\n        }\n      }\n      undo_move();\n    }\n\n    return nodes;\n  }\n\n  return {\n    /***************************************************************************\n     * PUBLIC CONSTANTS (is there a better way to do this?)\n     **************************************************************************/\n    WHITE: WHITE,\n    BLACK: BLACK,\n    PAWN: PAWN,\n    KNIGHT: KNIGHT,\n    BISHOP: BISHOP,\n    ROOK: ROOK,\n    QUEEN: QUEEN,\n    KING: KING,\n    SQUARES: (function() {\n                /* from the ECMA-262 spec (section 12.6.4):\n                 * \"The mechanics of enumerating the properties ... is\n                 * implementation dependent\"\n                 * so: for (var sq in SQUARES) { keys.push(sq); } might not be\n                 * ordered correctly\n                 */\n                var keys = [];\n                for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n                  if (i & 0x88) { i += 7; continue; }\n                  keys.push(algebraic(i));\n                }\n                return keys;\n              })(),\n    FLAGS: FLAGS,\n\n    /***************************************************************************\n     * PUBLIC API\n     **************************************************************************/\n    load: function(fen) {\n      return load(fen);\n    },\n\n    reset: function() {\n      return reset();\n    },\n\n    moves: function(options) {\n      /* The internal representation of a chess move is in 0x88 format, and\n       * not meant to be human-readable.  The code below converts the 0x88\n       * square coordinates to algebraic coordinates.  It also prunes an\n       * unnecessary move keys resulting from a verbose call.\n       */\n\n      var ugly_moves = generate_moves(options);\n      var moves = [];\n\n      for (var i = 0, len = ugly_moves.length; i < len; i++) {\n\n        /* does the user want a full move object (most likely not), or just\n         * SAN\n         */\n        if (typeof options !== 'undefined' && 'verbose' in options &&\n            options.verbose) {\n          moves.push(make_pretty(ugly_moves[i]));\n        } else {\n          moves.push(move_to_san(ugly_moves[i], false));\n        }\n      }\n\n      return moves;\n    },\n\n    in_check: function() {\n      return in_check();\n    },\n\n    in_checkmate: function() {\n      return in_checkmate();\n    },\n\n    in_stalemate: function() {\n      return in_stalemate();\n    },\n\n    in_draw: function() {\n      return half_moves >= 100 ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    insufficient_material: function() {\n      return insufficient_material();\n    },\n\n    in_threefold_repetition: function() {\n      return in_threefold_repetition();\n    },\n\n    game_over: function() {\n      return half_moves >= 100 ||\n             in_checkmate() ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    validate_fen: function(fen) {\n      return validate_fen(fen);\n    },\n\n    fen: function() {\n      return generate_fen();\n    },\n\n    pgn: function(options) {\n      /* using the specification from http://www.chessclub.com/help/PGN-spec\n       * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n       */\n      var newline = (typeof options === 'object' &&\n                     typeof options.newline_char === 'string') ?\n                     options.newline_char : '\\n';\n      var max_width = (typeof options === 'object' &&\n                       typeof options.max_width === 'number') ?\n                       options.max_width : 0;\n      var result = [];\n      var header_exists = false;\n\n      /* add the PGN header headerrmation */\n      for (var i in header) {\n        /* TODO: order of enumerated properties in header object is not\n         * guaranteed, see ECMA-262 spec (section 12.6.4)\n         */\n        result.push('[' + i + ' \\\"' + header[i] + '\\\"]' + newline);\n        header_exists = true;\n      }\n\n      if (header_exists && history.length) {\n        result.push(newline);\n      }\n\n      /* pop all of history onto reversed_history */\n      var reversed_history = [];\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      var moves = [];\n      var move_string = '';\n\n      /* build the list of moves.  a move_string looks like: \"3. e3 e6\" */\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n\n        /* if the position started with black to move, start PGN with 1. ... */\n        if (!history.length && move.color === 'b') {\n          move_string = move_number + '. ...';\n        } else if (move.color === 'w') {\n          /* store the previous generated move_string if we have one */\n          if (move_string.length) {\n            moves.push(move_string);\n          }\n          move_string = move_number + '.';\n        }\n\n        move_string = move_string + ' ' + move_to_san(move, false);\n        make_move(move);\n      }\n\n      /* are there any other leftover moves? */\n      if (move_string.length) {\n        moves.push(move_string);\n      }\n\n      /* is there a result? */\n      if (typeof header.Result !== 'undefined') {\n        moves.push(header.Result);\n      }\n\n      /* history should be back to what is was before we started generating PGN,\n       * so join together moves\n       */\n      if (max_width === 0) {\n        return result.join('') + moves.join(' ');\n      }\n\n      /* wrap the PGN output at max_width */\n      var current_width = 0;\n      for (var i = 0; i < moves.length; i++) {\n        /* if the current move will push past max_width */\n        if (current_width + moves[i].length > max_width && i !== 0) {\n\n          /* don't end the line with whitespace */\n          if (result[result.length - 1] === ' ') {\n            result.pop();\n          }\n\n          result.push(newline);\n          current_width = 0;\n        } else if (i !== 0) {\n          result.push(' ');\n          current_width++;\n        }\n        result.push(moves[i]);\n        current_width += moves[i].length;\n      }\n\n      return result.join('');\n    },\n\n    load_pgn: function(pgn, options) {\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      function mask(str) {\n        return str.replace(/\\\\/g, '\\\\');\n      }\n\n      function has_keys(object) {\n        for (var key in object) {\n          return true;\n        }\n        return false;\n      }\n\n      function parse_pgn_header(header, options) {\n        var newline_char = (typeof options === 'object' &&\n                            typeof options.newline_char === 'string') ?\n                            options.newline_char : '\\r?\\n';\n        var header_obj = {};\n        var headers = header.split(new RegExp(mask(newline_char)));\n        var key = '';\n        var value = '';\n\n        for (var i = 0; i < headers.length; i++) {\n          key = headers[i].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/, '$1');\n          value = headers[i].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\]$/, '$1');\n          if (trim(key).length > 0) {\n            header_obj[key] = value;\n          }\n        }\n\n        return header_obj;\n      }\n\n      var newline_char = (typeof options === 'object' &&\n                          typeof options.newline_char === 'string') ?\n                          options.newline_char : '\\r?\\n';\n      var regex = new RegExp('^(\\\\[(.|' + mask(newline_char) + ')*\\\\])' +\n                             '(' + mask(newline_char) + ')*' +\n                             '1.(' + mask(newline_char) + '|.)*$', 'g');\n\n      /* get header part of the PGN file */\n      var header_string = pgn.replace(regex, '$1');\n\n      /* no info part given, begins with moves */\n      if (header_string[0] !== '[') {\n        header_string = '';\n      }\n\n      reset();\n\n      /* parse PGN header */\n      var headers = parse_pgn_header(header_string, options);\n      for (var key in headers) {\n        set_header([key, headers[key]]);\n      }\n\n      /* load the starting position indicated by [Setup '1'] and\n      * [FEN position] */\n      if (headers['SetUp'] === '1') {\n          if (!(('FEN' in headers) && load(headers['FEN']))) {\n            return false;\n          }\n      }\n\n      /* delete header to get the moves */\n      var ms = pgn.replace(header_string, '').replace(new RegExp(mask(newline_char), 'g'), ' ');\n\n      /* delete comments */\n      ms = ms.replace(/(\\{[^}]+\\})+?/g, '');\n\n      /* delete recursive annotation variations */\n      var rav_regex = /(\\([^\\(\\)]+\\))+?/g\n      while (rav_regex.test(ms)) {\n        ms = ms.replace(rav_regex, '');\n      }\n\n      /* delete move numbers */\n      ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '');\n\n      /* delete ... indicating black to move */\n      ms = ms.replace(/\\.\\.\\./g, '');\n\n      /* delete numeric annotation glyphs */\n      ms = ms.replace(/\\$\\d+/g, '');\n\n      /* trim and get array of moves */\n      var moves = trim(ms).split(new RegExp(/\\s+/));\n\n      /* delete empty entries */\n      moves = moves.join(',').replace(/,,+/g, ',').split(',');\n      var move = '';\n\n      for (var half_move = 0; half_move < moves.length - 1; half_move++) {\n        move = move_from_san(moves[half_move], sloppy);\n\n        /* move not possible! (don't clear the board to examine to show the\n         * latest valid position)\n         */\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n\n      /* examine last move */\n      move = moves[moves.length - 1];\n      if (POSSIBLE_RESULTS.indexOf(move) > -1) {\n        if (has_keys(header) && typeof header.Result === 'undefined') {\n          set_header(['Result', move]);\n        }\n      }\n      else {\n        move = move_from_san(move, sloppy);\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n      return true;\n    },\n\n    header: function() {\n      return set_header(arguments);\n    },\n\n    ascii: function() {\n      return ascii();\n    },\n\n    turn: function() {\n      return turn;\n    },\n\n    move: function(move, options) {\n      /* The move function can be called with in the following parameters:\n       *\n       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string\n       *\n       * .move({ from: 'h7', <- where the 'move' is a move object (additional\n       *         to :'h8',      fields are ignored)\n       *         promotion: 'q',\n       *      })\n       */\n\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      var move_obj = null;\n\n      if (typeof move === 'string') {\n        move_obj = move_from_san(move, sloppy);\n      } else if (typeof move === 'object') {\n        var moves = generate_moves();\n\n        /* convert the pretty move object to an ugly move object */\n        for (var i = 0, len = moves.length; i < len; i++) {\n          if (move.from === algebraic(moves[i].from) &&\n              move.to === algebraic(moves[i].to) &&\n              (!('promotion' in moves[i]) ||\n              move.promotion === moves[i].promotion)) {\n            move_obj = moves[i];\n            break;\n          }\n        }\n      }\n\n      /* failed to find move */\n      if (!move_obj) {\n        return null;\n      }\n\n      /* need to make a copy of move because we can't generate SAN after the\n       * move is made\n       */\n      var pretty_move = make_pretty(move_obj);\n\n      make_move(move_obj);\n\n      return pretty_move;\n    },\n\n    undo: function() {\n      var move = undo_move();\n      return (move) ? make_pretty(move) : null;\n    },\n\n    clear: function() {\n      return clear();\n    },\n\n    put: function(piece, square) {\n      return put(piece, square);\n    },\n\n    get: function(square) {\n      return get(square);\n    },\n\n    remove: function(square) {\n      return remove(square);\n    },\n\n    perft: function(depth) {\n      return perft(depth);\n    },\n\n    square_color: function(square) {\n      if (square in SQUARES) {\n        var sq_0x88 = SQUARES[square];\n        return ((rank(sq_0x88) + file(sq_0x88)) % 2 === 0) ? 'light' : 'dark';\n      }\n\n      return null;\n    },\n\n    history: function(options) {\n      var reversed_history = [];\n      var move_history = [];\n      var verbose = (typeof options !== 'undefined' && 'verbose' in options &&\n                     options.verbose);\n\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n        if (verbose) {\n          move_history.push(make_pretty(move));\n        } else {\n          move_history.push(move_to_san(move));\n        }\n        make_move(move);\n      }\n\n      return move_history;\n    }\n\n  };\n};\n\n/* export Chess object if using node or any other CommonJS compatible\n * environment */\nif (typeof exports !== 'undefined') exports.Chess = Chess;\n/* export Chess object for any RequireJS compatible environment */\nif (typeof define !== 'undefined') define( function () { return Chess;  });",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "Chess",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    }
                ]
            },
            "assetManagerHtml": {
                "enabled": false,
                "fragments": [
                    {
                        "code": "{{Front}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the front side",
                        "enabled": true,
                        "label": "Front",
                        "name": "FrontSide",
                        "version": "v1"
                    },
                    {
                        "code": "{{FrontSide}}\n\n<hr id=\"answer\">\n\n{{Back}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the back side",
                        "enabled": true,
                        "label": "Back",
                        "name": "BackSide",
                        "version": "v1"
                    }
                ],
                "minify": false
            },
            "crowdanki_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "css": "body {\n  margin:0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: -webkit-box;\n\t-webkit-box-align: stretch;\n\t-webkit-box-pack: center;\n\t-webkit-box-orient: vertical;\n\tfont-size:22px;\n    text-align: center; /* ALIGN TEXT */\n}\n.card{text-align:center;\nfont-size:20px;\n}\n\n\n#board{\n\nmargin-left:auto;\nmargin-right:auto;\n\n}\niframe{\ndisplay:block;\n\nmargin-left:auto;margin-right:auto;\nheight:100vh;\nwidth:100vw;\nborder:0;\n}\n\n\n\n\n.mobile iframe{\n\nheight:96vh;\nwidth:96vw;\n}\n\n\n\n",
            "flds": [
                {
                    "font": "MS Shell Dlg 2",
                    "media": [],
                    "meta": null,
                    "name": "PGN",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "meta": null,
                    "name": "FEN",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "Title",
                    "ord": 2,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "Comments",
                    "ord": 3,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "meta": null,
                    "name": "playAllMoves",
                    "ord": 4,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Chess 2.0 your Move",
            "req": [
                [
                    0,
                    "any",
                    [
                        0,
                        1,
                        2,
                        3
                    ]
                ]
            ],
            "sortf": 0,
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ],
            "tmpls": [
                {
                    "afmt": "<iframe id=\"analysisBoard\"></iframe>\n\n\n<script>\nvar PGN = encodeURIComponent(`{{text:PGN}}`);\nvar FEN = encodeURIComponent(`{{text:FEN}}`);\n\ndocument.getElementById(\"analysisBoard\").src =`_ChessTempoViewerB.html?PGN=`+PGN+`&FEN=`+FEN+``;\n\n</script>\n",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "<iframe id=\"Board\"></iframe>\n\n\n\n<script>\nvar FEN = encodeURIComponent(`{{text:FEN}}`);\nvar Title = encodeURIComponent(`{{text:Title}}`);\nvar Comments = encodeURIComponent(`{{text:Comments}}`);\nvar PGN = `{{text:PGN}}`.replace(/\\[Puzzle_Length.*?\\]/, '').replace(/\\[Tactic_line.*?\\]/, ''); //compatability with chess.com puzzles\nvar PGN = encodeURIComponent(PGN);\n\n// determine whether to automatically respond or quiz you on the entire line, meaning you play both sides.\n\nvar playAllMoves = `false`;\n{{#playAllMoves}}\nplayAllMoves = `true`;\n{{/playAllMoves}}\n\ndocument.getElementById(\"Board\").src =`_board.html?PGN=`+PGN+`&FEN=`+FEN+`&Comments=`+Comments+`&Title=`+Title+`&playAllMoves=`+playAllMoves+``;\n</script>\n"
                }
            ],
            "type": 0,
            "vers": []
        },
        {
            "__type__": "NoteModel",
            "assetManager": {
                "enabled": true,
                "indentSize": 4,
                "insertStub": false,
                "scripts": [
                    {
                        "id": "AnkiPersistenceId",
                        "storage": {
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "AnkiPersistenceTag"
                    },
                    {
                        "id": "1599241824911",
                        "storage": {
                            "code": "const elements = closet.anki.getQaChildNodes()\nconst memory = chooseMemory('closet__1')\nconst filterManager = closet.FilterManager.make(preset, memory.map)\n\nconst output = [[\n    elements,\n    memory,\n    filterManager,\n]]\n\n/* here goes the setup - change it to fit your own needs */\n\nfilterManager.install(\n    closet.recipes.shuffle({ tagname: 'mix' }),\n    closet.recipes.order({ tagname: 'ord' }),\n    closet.recipes.cloze({ tagname: 'c' }),\n    closet.recipes.multipleChoice({ tagname: 'mc' }),\n    closet.browser.recipes.rect({ tagname: 'rect' }),\n)",
                            "conditions": [],
                            "description": "This is the configuration of how Closet will behave.\nTo get inspiration you can visit the homepage: closetengine.com.",
                            "enabled": false,
                            "version": "v0.1"
                        },
                        "tag": "ClosetUserScript"
                    },
                    {
                        "id": "Kanjax_id",
                        "storage": {
                            "code": "if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery-2.2.2.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery-2.2.2.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery.bpopup.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery.bpopup.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_kanjax_with_koohii.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_kanjax_with_koohii.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);",
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "Kanjax_tag"
                    },
                    {
                        "id": "jQuery_id",
                        "storage": {
                            "code": "/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.5.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(D).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function ke(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\\s*(?:[^=]|=\\s*.checked.)/i,je=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function qe(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Le(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function He(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(je,\"\"),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join(\"|\"),\"i\");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",n.style.height=\"9px\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=[\"Webkit\",\"Moz\",\"ms\"],ze=E.createElement(\"div\").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",y.checkOn=\"\"!==rt.value,y.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",y.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(\" \")}function yt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=yt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+vt(yt(n))+\" \").indexOf(t))return!0;return!1}});var xt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var St=/\\[\\]$/,kt=/\\r?\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)Dt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\/\\//,Rt={},Mt={},It=\"*/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+\"//\"+Wt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(jt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Et.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&\"withCredentials\"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):(\"number\"==typeof f.top&&(f.top+=\"px\"),\"number\"==typeof f.left&&(f.left+=\"px\"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});",
                            "conditions": [],
                            "enabled": true,
                            "position": "external"
                        },
                        "tag": "jQuery_tag"
                    },
                    {
                        "code": "// chessboard.js v1.0.0\n// https://github.com/oakmac/chessboardjs/\n//\n// Copyright (c) 2019, Chris Oakman\n// Released under the MIT license\n// https://github.com/oakmac/chessboardjs/blob/master/LICENSE.md\n\n// start anonymous scope\n;(function () {\n  'use strict'\n\n  var $ = window['jQuery']\n\n  // ---------------------------------------------------------------------------\n  // Constants\n  // ---------------------------------------------------------------------------\n\n  var COLUMNS = 'abcdefgh'.split('')\n  var DEFAULT_DRAG_THROTTLE_RATE = 20\n  var ELLIPSIS = ''\n  var MINIMUM_JQUERY_VERSION = '1.8.3'\n  var RUN_ASSERTS = false\n  var START_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'\n  var START_POSITION = fenToObj(START_FEN)\n\n  // default animation speeds\n  var DEFAULT_APPEAR_SPEED = 200\n  var DEFAULT_MOVE_SPEED = 200\n  var DEFAULT_SNAPBACK_SPEED = 60\n  var DEFAULT_SNAP_SPEED = 30\n  var DEFAULT_TRASH_SPEED = 100\n\n  // use unique class names to prevent clashing with anything else on the page\n  // and simplify selectors\n  // NOTE: these should never change\n  var CSS = {}\n  CSS['alpha'] = 'alpha-d2270'\n  CSS['black'] = 'black-3c85d'\n  CSS['board'] = 'board-b72b1'\n  CSS['chessboard'] = 'chessboard-63f37'\n  CSS['clearfix'] = 'clearfix-7da63'\n  CSS['highlight1'] = 'highlight1-32417'\n  CSS['highlight2'] = 'highlight2-9c5d2'\n  CSS['notation'] = 'notation-322f9'\n  CSS['numeric'] = 'numeric-fc462'\n  CSS['piece'] = 'piece-417db'\n  CSS['row'] = 'row-5277c'\n  CSS['sparePieces'] = 'spare-pieces-7492f'\n  CSS['sparePiecesBottom'] = 'spare-pieces-bottom-ae20f'\n  CSS['sparePiecesTop'] = 'spare-pieces-top-4028b'\n  CSS['square'] = 'square-55d63'\n  CSS['white'] = 'white-1e1d7'\n\n  // ---------------------------------------------------------------------------\n  // Misc Util Functions\n  // ---------------------------------------------------------------------------\n\n  function throttle (f, interval, scope) {\n    var timeout = 0\n    var shouldFire = false\n    var args = []\n\n    var handleTimeout = function () {\n      timeout = 0\n      if (shouldFire) {\n        shouldFire = false\n        fire()\n      }\n    }\n\n    var fire = function () {\n      timeout = window.setTimeout(handleTimeout, interval)\n      f.apply(scope, args)\n    }\n\n    return function (_args) {\n      args = arguments\n      if (!timeout) {\n        fire()\n      } else {\n        shouldFire = true\n      }\n    }\n  }\n\n  // function debounce (f, interval, scope) {\n  //   var timeout = 0\n  //   return function (_args) {\n  //     window.clearTimeout(timeout)\n  //     var args = arguments\n  //     timeout = window.setTimeout(function () {\n  //       f.apply(scope, args)\n  //     }, interval)\n  //   }\n  // }\n\n  function uuid () {\n    return 'xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx'.replace(/x/g, function (c) {\n      var r = (Math.random() * 16) | 0\n      return r.toString(16)\n    })\n  }\n\n  function deepCopy (thing) {\n    return JSON.parse(JSON.stringify(thing))\n  }\n\n  function parseSemVer (version) {\n    var tmp = version.split('.')\n    return {\n      major: parseInt(tmp[0], 10),\n      minor: parseInt(tmp[1], 10),\n      patch: parseInt(tmp[2], 10)\n    }\n  }\n\n  // returns true if version is >= minimum\n  function validSemanticVersion (version, minimum) {\n    version = parseSemVer(version)\n    minimum = parseSemVer(minimum)\n\n    var versionNum = (version.major * 100000 * 100000) +\n                     (version.minor * 100000) +\n                     version.patch\n    var minimumNum = (minimum.major * 100000 * 100000) +\n                     (minimum.minor * 100000) +\n                     minimum.patch\n\n    return versionNum >= minimumNum\n  }\n\n  function interpolateTemplate (str, obj) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) continue\n      var keyTemplateStr = '{' + key + '}'\n      var value = obj[key]\n      while (str.indexOf(keyTemplateStr) !== -1) {\n        str = str.replace(keyTemplateStr, value)\n      }\n    }\n    return str\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(interpolateTemplate('abc', {a: 'x'}) === 'abc')\n    console.assert(interpolateTemplate('{a}bc', {}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {p: 'q'}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {a: 'x'}) === 'xbc')\n    console.assert(interpolateTemplate('{a}bc{a}bc', {a: 'x'}) === 'xbcxbc')\n    console.assert(interpolateTemplate('{a}{a}{b}', {a: 'x', b: 'y'}) === 'xxy')\n  }\n\n  // ---------------------------------------------------------------------------\n  // Predicates\n  // ---------------------------------------------------------------------------\n\n  function isString (s) {\n    return typeof s === 'string'\n  }\n\n  function isFunction (f) {\n    return typeof f === 'function'\n  }\n\n  function isInteger (n) {\n    return typeof n === 'number' &&\n           isFinite(n) &&\n           Math.floor(n) === n\n  }\n\n  function validAnimationSpeed (speed) {\n    if (speed === 'fast' || speed === 'slow') return true\n    if (!isInteger(speed)) return false\n    return speed >= 0\n  }\n\n  function validThrottleRate (rate) {\n    return isInteger(rate) &&\n           rate >= 1\n  }\n\n  function validMove (move) {\n    // move should be a string\n    if (!isString(move)) return false\n\n    // move should be in the form of \"e2-e4\", \"f6-d5\"\n    var squares = move.split('-')\n    if (squares.length !== 2) return false\n\n    return validSquare(squares[0]) && validSquare(squares[1])\n  }\n\n  function validSquare (square) {\n    return isString(square) && square.search(/^[a-h][1-8]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validSquare('a1'))\n    console.assert(validSquare('e2'))\n    console.assert(!validSquare('D2'))\n    console.assert(!validSquare('g9'))\n    console.assert(!validSquare('a'))\n    console.assert(!validSquare(true))\n    console.assert(!validSquare(null))\n    console.assert(!validSquare({}))\n  }\n\n  function validPieceCode (code) {\n    return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPieceCode('bP'))\n    console.assert(validPieceCode('bK'))\n    console.assert(validPieceCode('wK'))\n    console.assert(validPieceCode('wR'))\n    console.assert(!validPieceCode('WR'))\n    console.assert(!validPieceCode('Wr'))\n    console.assert(!validPieceCode('a'))\n    console.assert(!validPieceCode(true))\n    console.assert(!validPieceCode(null))\n    console.assert(!validPieceCode({}))\n  }\n\n  function validFen (fen) {\n    if (!isString(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    // expand the empty square numbers to just 1s\n    fen = expandFenEmptySquares(fen)\n\n    // FEN should be 8 sections separated by slashes\n    var chunks = fen.split('/')\n    if (chunks.length !== 8) return false\n\n    // check each section\n    for (var i = 0; i < 8; i++) {\n      if (chunks[i].length !== 8 ||\n          chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validFen(START_FEN))\n    console.assert(validFen('8/8/8/8/8/8/8/8'))\n    console.assert(validFen('r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R'))\n    console.assert(validFen('3r3r/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('3r3z/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('anbqkbnr/8/8/8/8/8/PPPPPPPP/8'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBN'))\n    console.assert(!validFen('888888/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen('888888/pppppppp/74/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen({}))\n  }\n\n  function validPositionObject (pos) {\n    if (!$.isPlainObject(pos)) return false\n\n    for (var i in pos) {\n      if (!pos.hasOwnProperty(i)) continue\n\n      if (!validSquare(i) || !validPieceCode(pos[i])) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPositionObject(START_POSITION))\n    console.assert(validPositionObject({}))\n    console.assert(validPositionObject({e2: 'wP'}))\n    console.assert(validPositionObject({e2: 'wP', d2: 'wP'}))\n    console.assert(!validPositionObject({e2: 'BP'}))\n    console.assert(!validPositionObject({y2: 'wP'}))\n    console.assert(!validPositionObject(null))\n    console.assert(!validPositionObject('start'))\n    console.assert(!validPositionObject(START_FEN))\n  }\n\n  function isTouchDevice () {\n    return 'ontouchstart' in document.documentElement\n  }\n\n  function validJQueryVersion () {\n    return typeof window.$ &&\n           $.fn &&\n           $.fn.jquery &&\n           validSemanticVersion($.fn.jquery, MINIMUM_JQUERY_VERSION)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Chess Util Functions\n  // ---------------------------------------------------------------------------\n\n  // convert FEN piece code to bP, wK, etc\n  function fenToPieceCode (piece) {\n    // black piece\n    if (piece.toLowerCase() === piece) {\n      return 'b' + piece.toUpperCase()\n    }\n\n    // white piece\n    return 'w' + piece.toUpperCase()\n  }\n\n  // convert bP, wK, etc code to FEN structure\n  function pieceCodeToFen (piece) {\n    var pieceCodeLetters = piece.split('')\n\n    // white piece\n    if (pieceCodeLetters[0] === 'w') {\n      return pieceCodeLetters[1].toUpperCase()\n    }\n\n    // black piece\n    return pieceCodeLetters[1].toLowerCase()\n  }\n\n  // convert FEN string to position object\n  // returns false if the FEN string is invalid\n  function fenToObj (fen) {\n    if (!validFen(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    var rows = fen.split('/')\n    var position = {}\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      var row = rows[i].split('')\n      var colIdx = 0\n\n      // loop through each character in the FEN section\n      for (var j = 0; j < row.length; j++) {\n        // number / empty squares\n        if (row[j].search(/[1-8]/) !== -1) {\n          var numEmptySquares = parseInt(row[j], 10)\n          colIdx = colIdx + numEmptySquares\n        } else {\n          // piece\n          var square = COLUMNS[colIdx] + currentRow\n          position[square] = fenToPieceCode(row[j])\n          colIdx = colIdx + 1\n        }\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    return position\n  }\n\n  // position object to FEN string\n  // returns false if the obj is not a valid position object\n  function objToFen (obj) {\n    if (!validPositionObject(obj)) return false\n\n    var fen = ''\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var square = COLUMNS[j] + currentRow\n\n        // piece exists\n        if (obj.hasOwnProperty(square)) {\n          fen = fen + pieceCodeToFen(obj[square])\n        } else {\n          // empty space\n          fen = fen + '1'\n        }\n      }\n\n      if (i !== 7) {\n        fen = fen + '/'\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    // squeeze the empty numbers together\n    fen = squeezeFenEmptySquares(fen)\n\n    return fen\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(objToFen(START_POSITION) === START_FEN)\n    console.assert(objToFen({}) === '8/8/8/8/8/8/8/8')\n    console.assert(objToFen({a2: 'wP', 'b2': 'bP'}) === '8/8/8/8/8/8/Pp6/8')\n  }\n\n  function squeezeFenEmptySquares (fen) {\n    return fen.replace(/11111111/g, '8')\n      .replace(/1111111/g, '7')\n      .replace(/111111/g, '6')\n      .replace(/11111/g, '5')\n      .replace(/1111/g, '4')\n      .replace(/111/g, '3')\n      .replace(/11/g, '2')\n  }\n\n  function expandFenEmptySquares (fen) {\n    return fen.replace(/8/g, '11111111')\n      .replace(/7/g, '1111111')\n      .replace(/6/g, '111111')\n      .replace(/5/g, '11111')\n      .replace(/4/g, '1111')\n      .replace(/3/g, '111')\n      .replace(/2/g, '11')\n  }\n\n  // returns the distance between two squares\n  function squareDistance (squareA, squareB) {\n    var squareAArray = squareA.split('')\n    var squareAx = COLUMNS.indexOf(squareAArray[0]) + 1\n    var squareAy = parseInt(squareAArray[1], 10)\n\n    var squareBArray = squareB.split('')\n    var squareBx = COLUMNS.indexOf(squareBArray[0]) + 1\n    var squareBy = parseInt(squareBArray[1], 10)\n\n    var xDelta = Math.abs(squareAx - squareBx)\n    var yDelta = Math.abs(squareAy - squareBy)\n\n    if (xDelta >= yDelta) return xDelta\n    return yDelta\n  }\n\n  // returns the square of the closest instance of piece\n  // returns false if no instance of piece is found in position\n  function findClosestPiece (position, piece, square) {\n    // create array of closest squares from square\n    var closestSquares = createRadius(square)\n\n    // search through the position in order of distance for the piece\n    for (var i = 0; i < closestSquares.length; i++) {\n      var s = closestSquares[i]\n\n      if (position.hasOwnProperty(s) && position[s] === piece) {\n        return s\n      }\n    }\n\n    return false\n  }\n\n  // returns an array of closest squares from square\n  function createRadius (square) {\n    var squares = []\n\n    // calculate distance of all squares\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var s = COLUMNS[i] + (j + 1)\n\n        // skip the square we're starting from\n        if (square === s) continue\n\n        squares.push({\n          square: s,\n          distance: squareDistance(square, s)\n        })\n      }\n    }\n\n    // sort by distance\n    squares.sort(function (a, b) {\n      return a.distance - b.distance\n    })\n\n    // just return the square code\n    var surroundingSquares = []\n    for (i = 0; i < squares.length; i++) {\n      surroundingSquares.push(squares[i].square)\n    }\n\n    return surroundingSquares\n  }\n\n  // given a position and a set of moves, return a new position\n  // with the moves executed\n  function calculatePositionFromMoves (position, moves) {\n    var newPosition = deepCopy(position)\n\n    for (var i in moves) {\n      if (!moves.hasOwnProperty(i)) continue\n\n      // skip the move if the position doesn't have a piece on the source square\n      if (!newPosition.hasOwnProperty(i)) continue\n\n      var piece = newPosition[i]\n      delete newPosition[i]\n      newPosition[moves[i]] = piece\n    }\n\n    return newPosition\n  }\n\n  // TODO: add some asserts here for calculatePositionFromMoves\n\n  // ---------------------------------------------------------------------------\n  // HTML\n  // ---------------------------------------------------------------------------\n\n  function buildContainerHTML (hasSparePieces) {\n    var html = '<div class=\"{chessboard}\">'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesTop}\"></div>'\n    }\n\n    html += '<div class=\"{board}\"></div>'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesBottom}\"></div>'\n    }\n\n    html += '</div>'\n\n    return interpolateTemplate(html, CSS)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Config\n  // ---------------------------------------------------------------------------\n\n  function expandConfigArgumentShorthand (config) {\n    if (config === 'start') {\n      config = {position: deepCopy(START_POSITION)}\n    } else if (validFen(config)) {\n      config = {position: fenToObj(config)}\n    } else if (validPositionObject(config)) {\n      config = {position: deepCopy(config)}\n    }\n\n    // config must be an object\n    if (!$.isPlainObject(config)) config = {}\n\n    return config\n  }\n\n  // validate config / set default options\n  function expandConfig (config) {\n    // default for orientation is white\n    if (config.orientation !== 'black') config.orientation = 'white'\n\n    // default for showNotation is true\n    if (config.showNotation !== false) config.showNotation = true\n\n    // default for draggable is false\n    if (config.draggable !== true) config.draggable = false\n\n    // default for dropOffBoard is 'snapback'\n    if (config.dropOffBoard !== 'trash') config.dropOffBoard = 'snapback'\n\n    // default for sparePieces is false\n    if (config.sparePieces !== true) config.sparePieces = false\n\n    // draggable must be true if sparePieces is enabled\n    if (config.sparePieces) config.draggable = true\n\n    // default piece theme is wikipedia\n    if (!config.hasOwnProperty('pieceTheme') ||\n        (!isString(config.pieceTheme) && !isFunction(config.pieceTheme))) {\n      config.pieceTheme = 'img/chesspieces/wikipedia/{piece}.png'\n    }\n\n    // animation speeds\n    if (!validAnimationSpeed(config.appearSpeed)) config.appearSpeed = DEFAULT_APPEAR_SPEED\n    if (!validAnimationSpeed(config.moveSpeed)) config.moveSpeed = DEFAULT_MOVE_SPEED\n    if (!validAnimationSpeed(config.snapbackSpeed)) config.snapbackSpeed = DEFAULT_SNAPBACK_SPEED\n    if (!validAnimationSpeed(config.snapSpeed)) config.snapSpeed = DEFAULT_SNAP_SPEED\n    if (!validAnimationSpeed(config.trashSpeed)) config.trashSpeed = DEFAULT_TRASH_SPEED\n\n    // throttle rate\n    if (!validThrottleRate(config.dragThrottleRate)) config.dragThrottleRate = DEFAULT_DRAG_THROTTLE_RATE\n\n    return config\n  }\n\n  // ---------------------------------------------------------------------------\n  // Dependencies\n  // ---------------------------------------------------------------------------\n\n  // check for a compatible version of jQuery\n  function checkJQuery () {\n    if (!validJQueryVersion()) {\n      var errorMsg = 'Chessboard Error 1005: Unable to find a valid version of jQuery. ' +\n        'Please include jQuery ' + MINIMUM_JQUERY_VERSION + ' or higher on the page' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg)\n      return false\n    }\n\n    return true\n  }\n\n  // return either boolean false or the $container element\n  function checkContainerArg (containerElOrString) {\n    if (containerElOrString === '') {\n      var errorMsg1 = 'Chessboard Error 1001: ' +\n        'The first argument to Chessboard() cannot be an empty string.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg1)\n      return false\n    }\n\n    // convert containerEl to query selector if it is a string\n    if (isString(containerElOrString) &&\n        containerElOrString.charAt(0) !== '#') {\n      containerElOrString = '#' + containerElOrString\n    }\n\n    // containerEl must be something that becomes a jQuery collection of size 1\n    var $container = $(containerElOrString)\n    if ($container.length !== 1) {\n      var errorMsg2 = 'Chessboard Error 1003: ' +\n        'The first argument to Chessboard() must be the ID of a DOM node, ' +\n        'an ID query selector, or a single DOM node.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg2)\n      return false\n    }\n\n    return $container\n  }\n\n  // ---------------------------------------------------------------------------\n  // Constructor\n  // ---------------------------------------------------------------------------\n\n  function constructor (containerElOrString, config) {\n    // first things first: check basic dependencies\n    if (!checkJQuery()) return null\n    var $container = checkContainerArg(containerElOrString)\n    if (!$container) return null\n\n    // ensure the config object is what we expect\n    config = expandConfigArgumentShorthand(config)\n    config = expandConfig(config)\n\n    // DOM elements\n    var $board = null\n    var $draggedPiece = null\n    var $sparePiecesTop = null\n    var $sparePiecesBottom = null\n\n    // constructor return object\n    var widget = {}\n\n    // -------------------------------------------------------------------------\n    // Stateful\n    // -------------------------------------------------------------------------\n\n    var boardBorderSize = 2\n    var currentOrientation = 'white'\n    var currentPosition = {}\n    var draggedPiece = null\n    var draggedPieceLocation = null\n    var draggedPieceSource = null\n    var isDragging = false\n    var sparePiecesElsIds = {}\n    var squareElsIds = {}\n    var squareElsOffsets = {}\n    var squareSize = 16\n\n    // -------------------------------------------------------------------------\n    // Validation / Errors\n    // -------------------------------------------------------------------------\n\n    function error (code, msg, obj) {\n      // do nothing if showErrors is not set\n      if (\n        config.hasOwnProperty('showErrors') !== true ||\n          config.showErrors === false\n      ) {\n        return\n      }\n\n      var errorText = 'Chessboard Error ' + code + ': ' + msg\n\n      // print to console\n      if (\n        config.showErrors === 'console' &&\n          typeof console === 'object' &&\n          typeof console.log === 'function'\n      ) {\n        console.log(errorText)\n        if (arguments.length >= 2) {\n          console.log(obj)\n        }\n        return\n      }\n\n      // alert errors\n      if (config.showErrors === 'alert') {\n        if (obj) {\n          errorText += '\\n\\n' + JSON.stringify(obj)\n        }\n        window.alert(errorText)\n        return\n      }\n\n      // custom function\n      if (isFunction(config.showErrors)) {\n        config.showErrors(code, msg, obj)\n      }\n    }\n\n    function setInitialState () {\n      currentOrientation = config.orientation\n\n      // make sure position is valid\n      if (config.hasOwnProperty('position')) {\n        if (config.position === 'start') {\n          currentPosition = deepCopy(START_POSITION)\n        } else if (validFen(config.position)) {\n          currentPosition = fenToObj(config.position)\n        } else if (validPositionObject(config.position)) {\n          currentPosition = deepCopy(config.position)\n        } else {\n          error(\n            7263,\n            'Invalid value passed to config.position.',\n            config.position\n          )\n        }\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // DOM Misc\n    // -------------------------------------------------------------------------\n\n    // calculates square size based on the width of the container\n    // got a little CSS black magic here, so let me explain:\n    // get the width of the container element (could be anything), reduce by 1 for\n    // fudge factor, and then keep reducing until we find an exact mod 8 for\n    // our square size\n    function calculateSquareSize () {\n      var containerWidth = parseInt($container.width(), 10)\n\n      // defensive, prevent infinite loop\n      if (!containerWidth || containerWidth <= 0) {\n        return 0\n      }\n\n      // pad one pixel\n      var boardWidth = containerWidth - 1\n\n      while (boardWidth % 8 !== 0 && boardWidth > 0) {\n        boardWidth = boardWidth - 1\n      }\n\n      return boardWidth / 8\n    }\n\n    // create random IDs for elements\n    function createElIds () {\n      // squares on the board\n      for (var i = 0; i < COLUMNS.length; i++) {\n        for (var j = 1; j <= 8; j++) {\n          var square = COLUMNS[i] + j\n          squareElsIds[square] = square + '-' + uuid()\n        }\n      }\n\n      // spare pieces\n      var pieces = 'KQRNBP'.split('')\n      for (i = 0; i < pieces.length; i++) {\n        var whitePiece = 'w' + pieces[i]\n        var blackPiece = 'b' + pieces[i]\n        sparePiecesElsIds[whitePiece] = whitePiece + '-' + uuid()\n        sparePiecesElsIds[blackPiece] = blackPiece + '-' + uuid()\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Markup Building\n    // -------------------------------------------------------------------------\n\n    function buildBoardHTML (orientation) {\n      if (orientation !== 'black') {\n        orientation = 'white'\n      }\n\n      var html = ''\n\n      // algebraic notation / orientation\n      var alpha = deepCopy(COLUMNS)\n      var row = 8\n      if (orientation === 'black') {\n        alpha.reverse()\n        row = 1\n      }\n\n      var squareColor = 'white'\n      for (var i = 0; i < 8; i++) {\n        html += '<div class=\"{row}\">'\n        for (var j = 0; j < 8; j++) {\n          var square = alpha[j] + row\n\n          html += '<div class=\"{square} ' + CSS[squareColor] + ' ' +\n            'square-' + square + '\" ' +\n            'style=\"width:' + squareSize + 'px;height:' + squareSize + 'px;\" ' +\n            'id=\"' + squareElsIds[square] + '\" ' +\n            'data-square=\"' + square + '\">'\n\n          if (config.showNotation) {\n            // alpha notation\n            if ((orientation === 'white' && row === 1) ||\n                (orientation === 'black' && row === 8)) {\n              html += '<div class=\"{notation} {alpha}\">' + alpha[j] + '</div>'\n            }\n\n            // numeric notation\n            if (j === 0) {\n              html += '<div class=\"{notation} {numeric}\">' + row + '</div>'\n            }\n          }\n\n          html += '</div>' // end .square\n\n          squareColor = (squareColor === 'white') ? 'black' : 'white'\n        }\n        html += '<div class=\"{clearfix}\"></div></div>'\n\n        squareColor = (squareColor === 'white') ? 'black' : 'white'\n\n        if (orientation === 'white') {\n          row = row - 1\n        } else {\n          row = row + 1\n        }\n      }\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildPieceImgSrc (piece) {\n      if (isFunction(config.pieceTheme)) {\n        return config.pieceTheme(piece)\n      }\n\n      if (isString(config.pieceTheme)) {\n        return interpolateTemplate(config.pieceTheme, {piece: piece})\n      }\n\n      // NOTE: this should never happen\n      error(8272, 'Unable to build image source for config.pieceTheme.')\n      return ''\n    }\n\n    function buildPieceHTML (piece, hidden, id) {\n      var html = '<img src=\"' + buildPieceImgSrc(piece) + '\" '\n      if (isString(id) && id !== '') {\n        html += 'id=\"' + id + '\" '\n      }\n      html += 'alt=\"\" ' +\n        'class=\"{piece}\" ' +\n        'data-piece=\"' + piece + '\" ' +\n        'style=\"width:' + squareSize + 'px;' + 'height:' + squareSize + 'px;'\n\n      if (hidden) {\n        html += 'display:none;'\n      }\n\n      html += '\" />'\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildSparePiecesHTML (color) {\n      var pieces = ['wK', 'wQ', 'wR', 'wB', 'wN', 'wP']\n      if (color === 'black') {\n        pieces = ['bK', 'bQ', 'bR', 'bB', 'bN', 'bP']\n      }\n\n      var html = ''\n      for (var i = 0; i < pieces.length; i++) {\n        html += buildPieceHTML(pieces[i], false, sparePiecesElsIds[pieces[i]])\n      }\n\n      return html\n    }\n\n    // -------------------------------------------------------------------------\n    // Animations\n    // -------------------------------------------------------------------------\n\n    function animateSquareToSquare (src, dest, piece, completeFn) {\n      // get information about the source and destination squares\n      var $srcSquare = $('#' + squareElsIds[src])\n      var srcSquarePosition = $srcSquare.offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destSquarePosition = $destSquare.offset()\n\n      // create the animated piece and absolutely position it\n      // over the source square\n      var animatedPieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, animatedPieceId))\n      var $animatedPiece = $('#' + animatedPieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        top: srcSquarePosition.top,\n        left: srcSquarePosition.left\n      })\n\n      // remove original piece from source square\n      $srcSquare.find('.' + CSS.piece).remove()\n\n      function onFinishAnimation1 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation1\n      }\n      $animatedPiece.animate(destSquarePosition, opts)\n    }\n\n    function animateSparePieceToSquare (piece, dest, completeFn) {\n      var srcOffset = $('#' + sparePiecesElsIds[piece]).offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destOffset = $destSquare.offset()\n\n      // create the animate piece\n      var pieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, pieceId))\n      var $animatedPiece = $('#' + pieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        left: srcOffset.left,\n        top: srcOffset.top\n      })\n\n      // on complete\n      function onFinishAnimation2 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.find('.' + CSS.piece).remove()\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation2\n      }\n      $animatedPiece.animate(destOffset, opts)\n    }\n\n    // execute an array of animations\n    function doAnimations (animations, oldPos, newPos) {\n      if (animations.length === 0) return\n\n      var numFinished = 0\n      function onFinishAnimation3 () {\n        // exit if all the animations aren't finished\n        numFinished = numFinished + 1\n        if (numFinished !== animations.length) return\n\n        drawPositionInstant()\n\n        // run their onMoveEnd function\n        if (isFunction(config.onMoveEnd)) {\n          config.onMoveEnd(deepCopy(oldPos), deepCopy(newPos))\n        }\n      }\n\n      for (var i = 0; i < animations.length; i++) {\n        var animation = animations[i]\n\n        // clear a piece\n        if (animation.type === 'clear') {\n          $('#' + squareElsIds[animation.square] + ' .' + CSS.piece)\n            .fadeOut(config.trashSpeed, onFinishAnimation3)\n\n        // add a piece with no spare pieces - fade the piece onto the square\n        } else if (animation.type === 'add' && !config.sparePieces) {\n          $('#' + squareElsIds[animation.square])\n            .append(buildPieceHTML(animation.piece, true))\n            .find('.' + CSS.piece)\n            .fadeIn(config.appearSpeed, onFinishAnimation3)\n\n        // add a piece with spare pieces - animate from the spares\n        } else if (animation.type === 'add' && config.sparePieces) {\n          animateSparePieceToSquare(animation.piece, animation.square, onFinishAnimation3)\n\n        // move a piece from squareA to squareB\n        } else if (animation.type === 'move') {\n          animateSquareToSquare(animation.source, animation.destination, animation.piece, onFinishAnimation3)\n        }\n      }\n    }\n\n    // calculate an array of animations that need to happen in order to get\n    // from pos1 to pos2\n    function calculateAnimations (pos1, pos2) {\n      // make copies of both\n      pos1 = deepCopy(pos1)\n      pos2 = deepCopy(pos2)\n\n      var animations = []\n      var squaresMovedTo = {}\n\n      // remove pieces that are the same in both positions\n      for (var i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        if (pos1.hasOwnProperty(i) && pos1[i] === pos2[i]) {\n          delete pos1[i]\n          delete pos2[i]\n        }\n      }\n\n      // find all the \"move\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        var closestPiece = findClosestPiece(pos1, pos2[i], i)\n        if (closestPiece) {\n          animations.push({\n            type: 'move',\n            source: closestPiece,\n            destination: i,\n            piece: pos2[i]\n          })\n\n          delete pos1[closestPiece]\n          delete pos2[i]\n          squaresMovedTo[i] = true\n        }\n      }\n\n      // \"add\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'add',\n          square: i,\n          piece: pos2[i]\n        })\n\n        delete pos2[i]\n      }\n\n      // \"clear\" animations\n      for (i in pos1) {\n        if (!pos1.hasOwnProperty(i)) continue\n\n        // do not clear a piece if it is on a square that is the result\n        // of a \"move\", ie: a piece capture\n        if (squaresMovedTo.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'clear',\n          square: i,\n          piece: pos1[i]\n        })\n\n        delete pos1[i]\n      }\n\n      return animations\n    }\n\n    // -------------------------------------------------------------------------\n    // Control Flow\n    // -------------------------------------------------------------------------\n\n    function drawPositionInstant () {\n      // clear the board\n      $board.find('.' + CSS.piece).remove()\n\n      // add the pieces\n      for (var i in currentPosition) {\n        if (!currentPosition.hasOwnProperty(i)) continue\n\n        $('#' + squareElsIds[i]).append(buildPieceHTML(currentPosition[i]))\n      }\n    }\n\n    function drawBoard () {\n      $board.html(buildBoardHTML(currentOrientation, squareSize, config.showNotation))\n      drawPositionInstant()\n\n      if (config.sparePieces) {\n        if (currentOrientation === 'white') {\n          $sparePiecesTop.html(buildSparePiecesHTML('black'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('white'))\n        } else {\n          $sparePiecesTop.html(buildSparePiecesHTML('white'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('black'))\n        }\n      }\n    }\n\n    function setCurrentPosition (position) {\n      var oldPos = deepCopy(currentPosition)\n      var newPos = deepCopy(position)\n      var oldFen = objToFen(oldPos)\n      var newFen = objToFen(newPos)\n\n      // do nothing if no change in position\n      if (oldFen === newFen) return\n\n      // run their onChange function\n      if (isFunction(config.onChange)) {\n        config.onChange(oldPos, newPos)\n      }\n\n      // update state\n      currentPosition = position\n    }\n\n    function isXYOnSquare (x, y) {\n      for (var i in squareElsOffsets) {\n        if (!squareElsOffsets.hasOwnProperty(i)) continue\n\n        var s = squareElsOffsets[i]\n        if (x >= s.left &&\n            x < s.left + squareSize &&\n            y >= s.top &&\n            y < s.top + squareSize) {\n          return i\n        }\n      }\n\n      return 'offboard'\n    }\n\n    // records the XY coords of every square into memory\n    function captureSquareOffsets () {\n      squareElsOffsets = {}\n\n      for (var i in squareElsIds) {\n        if (!squareElsIds.hasOwnProperty(i)) continue\n\n        squareElsOffsets[i] = $('#' + squareElsIds[i]).offset()\n      }\n    }\n\n    function removeSquareHighlights () {\n      $board\n        .find('.' + CSS.square)\n        .removeClass(CSS.highlight1 + ' ' + CSS.highlight2)\n    }\n\n    function snapbackDraggedPiece () {\n      // there is no \"snapback\" for spare pieces\n      if (draggedPieceSource === 'spare') {\n        trashDraggedPiece()\n        return\n      }\n\n      removeSquareHighlights()\n\n      // animation complete\n      function complete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // run their onSnapbackEnd function\n        if (isFunction(config.onSnapbackEnd)) {\n          config.onSnapbackEnd(\n            draggedPiece,\n            draggedPieceSource,\n            deepCopy(currentPosition),\n            currentOrientation\n          )\n        }\n      }\n\n      // get source square position\n      var sourceSquarePosition = $('#' + squareElsIds[draggedPieceSource]).offset()\n\n      // animate the piece to the target square\n      var opts = {\n        duration: config.snapbackSpeed,\n        complete: complete\n      }\n      $draggedPiece.animate(sourceSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function trashDraggedPiece () {\n      removeSquareHighlights()\n\n      // remove the source piece\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      setCurrentPosition(newPosition)\n\n      // redraw the position\n      drawPositionInstant()\n\n      // hide the dragged piece\n      $draggedPiece.fadeOut(config.trashSpeed)\n\n      // set state\n      isDragging = false\n    }\n\n    function dropDraggedPieceOnSquare (square) {\n      removeSquareHighlights()\n\n      // update position\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      newPosition[square] = draggedPiece\n      setCurrentPosition(newPosition)\n\n      // get target square information\n      var targetSquarePosition = $('#' + squareElsIds[square]).offset()\n\n      // animation complete\n      function onAnimationComplete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // execute their onSnapEnd function\n        if (isFunction(config.onSnapEnd)) {\n          config.onSnapEnd(draggedPieceSource, square, draggedPiece)\n        }\n      }\n\n      // snap the piece to the target square\n      var opts = {\n        duration: config.snapSpeed,\n        complete: onAnimationComplete\n      }\n      $draggedPiece.animate(targetSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function beginDraggingPiece (source, piece, x, y) {\n      // run their custom onDragStart function\n      // their custom onDragStart function can cancel drag start\n      if (isFunction(config.onDragStart) &&\n          config.onDragStart(source, piece, deepCopy(currentPosition), currentOrientation) === false) {\n        return\n      }\n\n      // set state\n      isDragging = true\n      draggedPiece = piece\n      draggedPieceSource = source\n\n      // if the piece came from spare pieces, location is offboard\n      if (source === 'spare') {\n        draggedPieceLocation = 'offboard'\n      } else {\n        draggedPieceLocation = source\n      }\n\n      // capture the x, y coords of all squares in memory\n      captureSquareOffsets()\n\n      // create the dragged piece\n      $draggedPiece.attr('src', buildPieceImgSrc(piece)).css({\n        display: '',\n        position: 'absolute',\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      if (source !== 'spare') {\n        // highlight the source square and hide the piece\n        $('#' + squareElsIds[source])\n          .addClass(CSS.highlight1)\n          .find('.' + CSS.piece)\n          .css('display', 'none')\n      }\n    }\n\n    function updateDraggedPiece (x, y) {\n      // put the dragged piece over the mouse cursor\n      $draggedPiece.css({\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      // get location\n      var location = isXYOnSquare(x, y)\n\n      // do nothing if the location has not changed\n      if (location === draggedPieceLocation) return\n\n      // remove highlight from previous square\n      if (validSquare(draggedPieceLocation)) {\n        $('#' + squareElsIds[draggedPieceLocation]).removeClass(CSS.highlight2)\n      }\n\n      // add highlight to new square\n      if (validSquare(location)) {\n        $('#' + squareElsIds[location]).addClass(CSS.highlight2)\n      }\n\n      // run onDragMove\n      if (isFunction(config.onDragMove)) {\n        config.onDragMove(\n          location,\n          draggedPieceLocation,\n          draggedPieceSource,\n          draggedPiece,\n          deepCopy(currentPosition),\n          currentOrientation\n        )\n      }\n\n      // update state\n      draggedPieceLocation = location\n    }\n\n    function stopDraggedPiece (location) {\n      // determine what the action should be\n      var action = 'drop'\n      if (location === 'offboard' && config.dropOffBoard === 'snapback') {\n        action = 'snapback'\n      }\n      if (location === 'offboard' && config.dropOffBoard === 'trash') {\n        action = 'trash'\n      }\n\n      // run their onDrop function, which can potentially change the drop action\n      if (isFunction(config.onDrop)) {\n        var newPosition = deepCopy(currentPosition)\n\n        // source piece is a spare piece and position is off the board\n        // if (draggedPieceSource === 'spare' && location === 'offboard') {...}\n        // position has not changed; do nothing\n\n        // source piece is a spare piece and position is on the board\n        if (draggedPieceSource === 'spare' && validSquare(location)) {\n          // add the piece to the board\n          newPosition[location] = draggedPiece\n        }\n\n        // source piece was on the board and position is off the board\n        if (validSquare(draggedPieceSource) && location === 'offboard') {\n          // remove the piece from the board\n          delete newPosition[draggedPieceSource]\n        }\n\n        // source piece was on the board and position is on the board\n        if (validSquare(draggedPieceSource) && validSquare(location)) {\n          // move the piece\n          delete newPosition[draggedPieceSource]\n          newPosition[location] = draggedPiece\n        }\n\n        var oldPosition = deepCopy(currentPosition)\n\n        var result = config.onDrop(\n          draggedPieceSource,\n          location,\n          draggedPiece,\n          newPosition,\n          oldPosition,\n          currentOrientation\n        )\n        if (result === 'snapback' || result === 'trash') {\n          action = result\n        }\n      }\n\n      // do it!\n      if (action === 'snapback') {\n        snapbackDraggedPiece()\n      } else if (action === 'trash') {\n        trashDraggedPiece()\n      } else if (action === 'drop') {\n        dropDraggedPieceOnSquare(location)\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    // clear the board\n    widget.clear = function (useAnimation) {\n      widget.position({}, useAnimation)\n    }\n\n    // remove the widget from the page\n    widget.destroy = function () {\n      // remove markup\n      $container.html('')\n      $draggedPiece.remove()\n\n      // remove event handlers\n      $container.unbind()\n    }\n\n    // shorthand method to get the current FEN\n    widget.fen = function () {\n      return widget.position('fen')\n    }\n\n    // flip orientation\n    widget.flip = function () {\n      return widget.orientation('flip')\n    }\n\n    // move pieces\n    // TODO: this method should be variadic as well as accept an array of moves\n    widget.move = function () {\n      // no need to throw an error here; just do nothing\n      // TODO: this should return the current position\n      if (arguments.length === 0) return\n\n      var useAnimation = true\n\n      // collect the moves into an object\n      var moves = {}\n      for (var i = 0; i < arguments.length; i++) {\n        // any \"false\" to this function means no animations\n        if (arguments[i] === false) {\n          useAnimation = false\n          continue\n        }\n\n        // skip invalid arguments\n        if (!validMove(arguments[i])) {\n          error(2826, 'Invalid move passed to the move method.', arguments[i])\n          continue\n        }\n\n        var tmp = arguments[i].split('-')\n        moves[tmp[0]] = tmp[1]\n      }\n\n      // calculate position from moves\n      var newPos = calculatePositionFromMoves(currentPosition, moves)\n\n      // update the board\n      widget.position(newPos, useAnimation)\n\n      // return the new position object\n      return newPos\n    }\n\n    widget.orientation = function (arg) {\n      // no arguments, return the current orientation\n      if (arguments.length === 0) {\n        return currentOrientation\n      }\n\n      // set to white or black\n      if (arg === 'white' || arg === 'black') {\n        currentOrientation = arg\n        drawBoard()\n        return currentOrientation\n      }\n\n      // flip orientation\n      if (arg === 'flip') {\n        currentOrientation = currentOrientation === 'white' ? 'black' : 'white'\n        drawBoard()\n        return currentOrientation\n      }\n\n      error(5482, 'Invalid value passed to the orientation method.', arg)\n    }\n\n    widget.position = function (position, useAnimation) {\n      // no arguments, return the current position\n      if (arguments.length === 0) {\n        return deepCopy(currentPosition)\n      }\n\n      // get position as FEN\n      if (isString(position) && position.toLowerCase() === 'fen') {\n        return objToFen(currentPosition)\n      }\n\n      // start position\n      if (isString(position) && position.toLowerCase() === 'start') {\n        position = deepCopy(START_POSITION)\n      }\n\n      // convert FEN to position object\n      if (validFen(position)) {\n        position = fenToObj(position)\n      }\n\n      // validate position object\n      if (!validPositionObject(position)) {\n        error(6482, 'Invalid value passed to the position method.', position)\n        return\n      }\n\n      // default for useAnimations is true\n      if (useAnimation !== false) useAnimation = true\n\n      if (useAnimation) {\n        // start the animations\n        var animations = calculateAnimations(currentPosition, position)\n        doAnimations(animations, currentPosition, position)\n\n        // set the new position\n        setCurrentPosition(position)\n      } else {\n        // instant update\n        setCurrentPosition(position)\n        drawPositionInstant()\n      }\n    }\n\n    widget.resize = function () {\n      // calulate the new square size\n      squareSize = calculateSquareSize()\n\n      // set board width\n      $board.css('width', squareSize * 8 + 'px')\n\n      // set drag piece size\n      $draggedPiece.css({\n        height: squareSize,\n        width: squareSize\n      })\n\n      // spare pieces\n      if (config.sparePieces) {\n        $container\n          .find('.' + CSS.sparePieces)\n          .css('paddingLeft', squareSize + boardBorderSize + 'px')\n      }\n\n      // redraw the board\n      drawBoard()\n    }\n\n    // set the starting position\n    widget.start = function (useAnimation) {\n      widget.position('start', useAnimation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Browser Events\n    // -------------------------------------------------------------------------\n\n    function stopDefault (evt) {\n      evt.preventDefault()\n    }\n\n    function mousedownSquare (evt) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      beginDraggingPiece(square, currentPosition[square], evt.pageX, evt.pageY)\n    }\n\n    function touchstartSquare (e) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        square,\n        currentPosition[square],\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousedownSparePiece (evt) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      beginDraggingPiece('spare', piece, evt.pageX, evt.pageY)\n    }\n\n    function touchstartSparePiece (e) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        'spare',\n        piece,\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousemoveWindow (evt) {\n      if (isDragging) {\n        updateDraggedPiece(evt.pageX, evt.pageY)\n      }\n    }\n\n    var throttledMousemoveWindow = throttle(mousemoveWindow, config.dragThrottleRate)\n\n    function touchmoveWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // prevent screen from scrolling\n      evt.preventDefault()\n\n      updateDraggedPiece(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n    }\n\n    var throttledTouchmoveWindow = throttle(touchmoveWindow, config.dragThrottleRate)\n\n    function mouseupWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.pageX, evt.pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function touchendWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function mouseenterSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide a onMouseoverSquare function\n      if (!isFunction(config.onMouseoverSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoverSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    function mouseleaveSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide an onMouseoutSquare function\n      if (!isFunction(config.onMouseoutSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoutSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    function addEvents () {\n      // prevent \"image drag\"\n      $('body').on('mousedown mousemove', '.' + CSS.piece, stopDefault)\n\n      // mouse drag pieces\n      $board.on('mousedown', '.' + CSS.square, mousedownSquare)\n      $container.on('mousedown', '.' + CSS.sparePieces + ' .' + CSS.piece, mousedownSparePiece)\n\n      // mouse enter / leave square\n      $board\n        .on('mouseenter', '.' + CSS.square, mouseenterSquare)\n        .on('mouseleave', '.' + CSS.square, mouseleaveSquare)\n\n      // piece drag\n      var $window = $(window)\n      $window\n        .on('mousemove', throttledMousemoveWindow)\n        .on('mouseup', mouseupWindow)\n\n      // touch drag pieces\n      if (isTouchDevice()) {\n        $board.on('touchstart', '.' + CSS.square, touchstartSquare)\n        $container.on('touchstart', '.' + CSS.sparePieces + ' .' + CSS.piece, touchstartSparePiece)\n        $window\n          .on('touchmove', throttledTouchmoveWindow)\n          .on('touchend', touchendWindow)\n      }\n    }\n\n    function initDOM () {\n      // create unique IDs for all the elements we will create\n      createElIds()\n\n      // build board and save it in memory\n      $container.html(buildContainerHTML(config.sparePieces))\n      $board = $container.find('.' + CSS.board)\n\n      if (config.sparePieces) {\n        $sparePiecesTop = $container.find('.' + CSS.sparePiecesTop)\n        $sparePiecesBottom = $container.find('.' + CSS.sparePiecesBottom)\n      }\n\n      // create the drag piece\n      var draggedPieceId = uuid()\n      $('body').append(buildPieceHTML('wP', true, draggedPieceId))\n      $draggedPiece = $('#' + draggedPieceId)\n\n      // TODO: need to remove this dragged piece element if the board is no\n      // longer in the DOM\n\n      // get the border size\n      boardBorderSize = parseInt($board.css('borderLeftWidth'), 10)\n\n      // set the size and draw the board\n      widget.resize()\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    setInitialState()\n    initDOM()\n    addEvents()\n\n    // return the widget object\n    return widget\n  } // end constructor\n\n  // TODO: do module exports here\n  window['Chessboard'] = constructor\n\n  // support legacy ChessBoard name\n  window['ChessBoard'] = window['Chessboard']\n\n  // expose util functions\n  window['Chessboard']['fenToObj'] = fenToObj\n  window['Chessboard']['objToFen'] = objToFen\n})() // end anonymous wrapper\n",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "chessboard.js v1.0.0",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    },
                    {
                        "code": "/*\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n/* minified license below  */\n\n/* @license\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * Released under the BSD license\n * https://github.com/jhlywa/chess.js/blob/master/LICENSE\n */\n\nvar Chess = function(fen) {\n\n  /* jshint indent: false */\n\n  var BLACK = 'b';\n  var WHITE = 'w';\n\n  var EMPTY = -1;\n\n  var PAWN = 'p';\n  var KNIGHT = 'n';\n  var BISHOP = 'b';\n  var ROOK = 'r';\n  var QUEEN = 'q';\n  var KING = 'k';\n\n  var SYMBOLS = 'pnbrqkPNBRQK';\n\n  var DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n\n  var POSSIBLE_RESULTS = ['1-0', '0-1', '1/2-1/2', '*'];\n\n  var PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15]\n  };\n\n  var PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14,  18, 33, 31,  14],\n    b: [-17, -15,  17,  15],\n    r: [-16,   1,  16,  -1],\n    q: [-17, -16, -15,   1,  17, 16, 15,  -1],\n    k: [-17, -16, -15,   1,  17, 16, 15,  -1]\n  };\n\n  var ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20\n  ];\n\n  var RAYS = [\n     17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,\n      0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,\n      0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,\n      0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,\n      0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,\n      1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,\n      0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,\n      0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,\n      0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,\n      0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,\n    -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17\n  ];\n\n  var SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 };\n\n  var FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q'\n  };\n\n  var BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64\n  };\n\n  var RANK_1 = 7;\n  var RANK_2 = 6;\n  var RANK_3 = 5;\n  var RANK_4 = 4;\n  var RANK_5 = 3;\n  var RANK_6 = 2;\n  var RANK_7 = 1;\n  var RANK_8 = 0;\n\n  var SQUARES = {\n    a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,\n    a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,\n    a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,\n    a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,\n    a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,\n    a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,\n    a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n  };\n\n  var ROOKS = {\n    w: [{square: SQUARES.a1, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h1, flag: BITS.KSIDE_CASTLE}],\n    b: [{square: SQUARES.a8, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h8, flag: BITS.KSIDE_CASTLE}]\n  };\n\n  var board = new Array(128);\n  var kings = {w: EMPTY, b: EMPTY};\n  var turn = WHITE;\n  var castling = {w: 0, b: 0};\n  var ep_square = EMPTY;\n  var half_moves = 0;\n  var move_number = 1;\n  var history = [];\n  var header = {};\n\n  /* if the user passes in a fen string, load it, else default to\n   * starting position\n   */\n  if (typeof fen === 'undefined') {\n    load(DEFAULT_POSITION);\n  } else {\n    load(fen);\n  }\n\n  function clear() {\n    board = new Array(128);\n    kings = {w: EMPTY, b: EMPTY};\n    turn = WHITE;\n    castling = {w: 0, b: 0};\n    ep_square = EMPTY;\n    half_moves = 0;\n    move_number = 1;\n    history = [];\n    header = {};\n    update_setup(generate_fen());\n  }\n\n  function reset() {\n    load(DEFAULT_POSITION);\n  }\n\n  function load(fen) {\n    var tokens = fen.split(/\\s+/);\n    var position = tokens[0];\n    var square = 0;\n\n    if (!validate_fen(fen).valid) {\n      return false;\n    }\n\n    clear();\n\n    for (var i = 0; i < position.length; i++) {\n      var piece = position.charAt(i);\n\n      if (piece === '/') {\n        square += 8;\n      } else if (is_digit(piece)) {\n        square += parseInt(piece, 10);\n      } else {\n        var color = (piece < 'a') ? WHITE : BLACK;\n        put({type: piece.toLowerCase(), color: color}, algebraic(square));\n        square++;\n      }\n    }\n\n    turn = tokens[1];\n\n    if (tokens[2].indexOf('K') > -1) {\n      castling.w |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      castling.w |= BITS.QSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      castling.b |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      castling.b |= BITS.QSIDE_CASTLE;\n    }\n\n    ep_square = (tokens[3] === '-') ? EMPTY : SQUARES[tokens[3]];\n    half_moves = parseInt(tokens[4], 10);\n    move_number = parseInt(tokens[5], 10);\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  /* TODO: this function is pretty much crap - it validates structure but\n   * completely ignores content (e.g. doesn't verify that each side has a king)\n   * ... we should rewrite this, and ditch the silly error_number field while\n   * we're at it\n   */\n  function validate_fen(fen) {\n    var errors = {\n       0: 'No errors.',\n       1: 'FEN string must contain six space-delimited fields.',\n       2: '6th field (move number) must be a positive integer.',\n       3: '5th field (half move counter) must be a non-negative integer.',\n       4: '4th field (en-passant square) is invalid.',\n       5: '3rd field (castling availability) is invalid.',\n       6: '2nd field (side to move) is invalid.',\n       7: '1st field (piece positions) does not contain 8 \\'/\\'-delimited rows.',\n       8: '1st field (piece positions) is invalid [consecutive numbers].',\n       9: '1st field (piece positions) is invalid [invalid piece].',\n      10: '1st field (piece positions) is invalid [row too large].',\n      11: 'Illegal en-passant square',\n    };\n\n    /* 1st criterion: 6 space-seperated fields? */\n    var tokens = fen.split(/\\s+/);\n    if (tokens.length !== 6) {\n      return {valid: false, error_number: 1, error: errors[1]};\n    }\n\n    /* 2nd criterion: move number field is a integer value > 0? */\n    if (isNaN(tokens[5]) || (parseInt(tokens[5], 10) <= 0)) {\n      return {valid: false, error_number: 2, error: errors[2]};\n    }\n\n    /* 3rd criterion: half move counter is an integer >= 0? */\n    if (isNaN(tokens[4]) || (parseInt(tokens[4], 10) < 0)) {\n      return {valid: false, error_number: 3, error: errors[3]};\n    }\n\n    /* 4th criterion: 4th field is a valid e.p.-string? */\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n      return {valid: false, error_number: 4, error: errors[4]};\n    }\n\n    /* 5th criterion: 3th field is a valid castle-string? */\n    if( !/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {\n      return {valid: false, error_number: 5, error: errors[5]};\n    }\n\n    /* 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)? */\n    if (!/^(w|b)$/.test(tokens[1])) {\n      return {valid: false, error_number: 6, error: errors[6]};\n    }\n\n    /* 7th criterion: 1st field contains 8 rows? */\n    var rows = tokens[0].split('/');\n    if (rows.length !== 8) {\n      return {valid: false, error_number: 7, error: errors[7]};\n    }\n\n    /* 8th criterion: every row is valid? */\n    for (var i = 0; i < rows.length; i++) {\n      /* check for right sum of fields AND not two numbers in succession */\n      var sum_fields = 0;\n      var previous_was_number = false;\n\n      for (var k = 0; k < rows[i].length; k++) {\n        if (!isNaN(rows[i][k])) {\n          if (previous_was_number) {\n            return {valid: false, error_number: 8, error: errors[8]};\n          }\n          sum_fields += parseInt(rows[i][k], 10);\n          previous_was_number = true;\n        } else {\n          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n            return {valid: false, error_number: 9, error: errors[9]};\n          }\n          sum_fields += 1;\n          previous_was_number = false;\n        }\n      }\n      if (sum_fields !== 8) {\n        return {valid: false, error_number: 10, error: errors[10]};\n      }\n    }\n\n    if ((tokens[3][1] == '3' && tokens[1] == 'w') ||\n        (tokens[3][1] == '6' && tokens[1] == 'b')) {\n          return {valid: false, error_number: 11, error: errors[11]};\n    }\n\n    /* everything's okay! */\n    return {valid: true, error_number: 0, error: errors[0]};\n  }\n\n  function generate_fen() {\n    var empty = 0;\n    var fen = '';\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      if (board[i] == null) {\n        empty++;\n      } else {\n        if (empty > 0) {\n          fen += empty;\n          empty = 0;\n        }\n        var color = board[i].color;\n        var piece = board[i].type;\n\n        fen += (color === WHITE) ?\n                 piece.toUpperCase() : piece.toLowerCase();\n      }\n\n      if ((i + 1) & 0x88) {\n        if (empty > 0) {\n          fen += empty;\n        }\n\n        if (i !== SQUARES.h1) {\n          fen += '/';\n        }\n\n        empty = 0;\n        i += 8;\n      }\n    }\n\n    var cflags = '';\n    if (castling[WHITE] & BITS.KSIDE_CASTLE) { cflags += 'K'; }\n    if (castling[WHITE] & BITS.QSIDE_CASTLE) { cflags += 'Q'; }\n    if (castling[BLACK] & BITS.KSIDE_CASTLE) { cflags += 'k'; }\n    if (castling[BLACK] & BITS.QSIDE_CASTLE) { cflags += 'q'; }\n\n    /* do we have an empty castling flag? */\n    cflags = cflags || '-';\n    var epflags = (ep_square === EMPTY) ? '-' : algebraic(ep_square);\n\n    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ');\n  }\n\n  function set_header(args) {\n    for (var i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' &&\n          typeof args[i + 1] === 'string') {\n        header[args[i]] = args[i + 1];\n      }\n    }\n    return header;\n  }\n\n  /* called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object.  if the FEN is\n   * equal to the default position, the SetUp and FEN are deleted\n   * the setup is only updated if history.length is zero, ie moves haven't been\n   * made.\n   */\n  function update_setup(fen) {\n    if (history.length > 0) return;\n\n    if (fen !== DEFAULT_POSITION) {\n      header['SetUp'] = '1';\n      header['FEN'] = fen;\n    } else {\n      delete header['SetUp'];\n      delete header['FEN'];\n    }\n  }\n\n  function get(square) {\n    var piece = board[SQUARES[square]];\n    return (piece) ? {type: piece.type, color: piece.color} : null;\n  }\n\n  function put(piece, square) {\n    /* check for valid piece object */\n    if (!('type' in piece && 'color' in piece)) {\n      return false;\n    }\n\n    /* check for piece */\n    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {\n      return false;\n    }\n\n    /* check for valid square */\n    if (!(square in SQUARES)) {\n      return false;\n    }\n\n    var sq = SQUARES[square];\n\n    /* don't let the user place more than one king */\n    if (piece.type == KING &&\n        !(kings[piece.color] == EMPTY || kings[piece.color] == sq)) {\n      return false;\n    }\n\n    board[sq] = {type: piece.type, color: piece.color};\n    if (piece.type === KING) {\n      kings[piece.color] = sq;\n    }\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  function remove(square) {\n    var piece = get(square);\n    board[SQUARES[square]] = null;\n    if (piece && piece.type === KING) {\n      kings[piece.color] = EMPTY;\n    }\n\n    update_setup(generate_fen());\n\n    return piece;\n  }\n\n  function build_move(board, from, to, flags, promotion) {\n    var move = {\n      color: turn,\n      from: from,\n      to: to,\n      flags: flags,\n      piece: board[from].type\n    };\n\n    if (promotion) {\n      move.flags |= BITS.PROMOTION;\n      move.promotion = promotion;\n    }\n\n    if (board[to]) {\n      move.captured = board[to].type;\n    } else if (flags & BITS.EP_CAPTURE) {\n        move.captured = PAWN;\n    }\n    return move;\n  }\n\n  function generate_moves(options) {\n    function add_move(board, moves, from, to, flags) {\n      /* if pawn promotion */\n      if (board[from].type === PAWN &&\n         (rank(to) === RANK_8 || rank(to) === RANK_1)) {\n          var pieces = [QUEEN, ROOK, BISHOP, KNIGHT];\n          for (var i = 0, len = pieces.length; i < len; i++) {\n            moves.push(build_move(board, from, to, flags, pieces[i]));\n          }\n      } else {\n       moves.push(build_move(board, from, to, flags));\n      }\n    }\n\n    var moves = [];\n    var us = turn;\n    var them = swap_color(us);\n    var second_rank = {b: RANK_7, w: RANK_2};\n\n    var first_sq = SQUARES.a8;\n    var last_sq = SQUARES.h1;\n    var single_square = false;\n\n    /* do we want legal moves? */\n    var legal = (typeof options !== 'undefined' && 'legal' in options) ?\n                options.legal : true;\n\n    /* are we generating moves for a single square? */\n    if (typeof options !== 'undefined' && 'square' in options) {\n      if (options.square in SQUARES) {\n        first_sq = last_sq = SQUARES[options.square];\n        single_square = true;\n      } else {\n        /* invalid square */\n        return [];\n      }\n    }\n\n    for (var i = first_sq; i <= last_sq; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece == null || piece.color !== us) {\n        continue;\n      }\n\n      if (piece.type === PAWN) {\n        /* single square, non-capturing */\n        var square = i + PAWN_OFFSETS[us][0];\n        if (board[square] == null) {\n            add_move(board, moves, i, square, BITS.NORMAL);\n\n          /* double square */\n          var square = i + PAWN_OFFSETS[us][1];\n          if (second_rank[us] === rank(i) && board[square] == null) {\n            add_move(board, moves, i, square, BITS.BIG_PAWN);\n          }\n        }\n\n        /* pawn captures */\n        for (j = 2; j < 4; j++) {\n          var square = i + PAWN_OFFSETS[us][j];\n          if (square & 0x88) continue;\n\n          if (board[square] != null &&\n              board[square].color === them) {\n              add_move(board, moves, i, square, BITS.CAPTURE);\n          } else if (square === ep_square) {\n              add_move(board, moves, i, ep_square, BITS.EP_CAPTURE);\n          }\n        }\n      } else {\n        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {\n          var offset = PIECE_OFFSETS[piece.type][j];\n          var square = i;\n\n          while (true) {\n            square += offset;\n            if (square & 0x88) break;\n\n            if (board[square] == null) {\n              add_move(board, moves, i, square, BITS.NORMAL);\n            } else {\n              if (board[square].color === us) break;\n              add_move(board, moves, i, square, BITS.CAPTURE);\n              break;\n            }\n\n            /* break, if knight or king */\n            if (piece.type === 'n' || piece.type === 'k') break;\n          }\n        }\n      }\n    }\n\n    /* check for castling if: a) we're generating all moves, or b) we're doing\n     * single square move generation on the king's square\n     */\n    if ((!single_square) || last_sq === kings[us]) {\n      /* king-side castling */\n      if (castling[us] & BITS.KSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from + 2;\n\n        if (board[castling_from + 1] == null &&\n            board[castling_to]       == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from + 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us] , castling_to,\n                   BITS.KSIDE_CASTLE);\n        }\n      }\n\n      /* queen-side castling */\n      if (castling[us] & BITS.QSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from - 2;\n\n        if (board[castling_from - 1] == null &&\n            board[castling_from - 2] == null &&\n            board[castling_from - 3] == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from - 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us], castling_to,\n                   BITS.QSIDE_CASTLE);\n        }\n      }\n    }\n\n    /* return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal) {\n      return moves;\n    }\n\n    /* filter out illegal moves */\n    var legal_moves = [];\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(us)) {\n        legal_moves.push(moves[i]);\n      }\n      undo_move();\n    }\n\n    return legal_moves;\n  }\n\n  /* convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} sloppy Use the sloppy SAN generator to work around over\n   * disambiguation bugs in Fritz and Chessbase.  See below:\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  function move_to_san(move, sloppy) {\n\n    var output = '';\n\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O';\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O';\n    } else {\n      var disambiguator = get_disambiguator(move, sloppy);\n\n      if (move.piece !== PAWN) {\n        output += move.piece.toUpperCase() + disambiguator;\n      }\n\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0];\n        }\n        output += 'x';\n      }\n\n      output += algebraic(move.to);\n\n      if (move.flags & BITS.PROMOTION) {\n        output += '=' + move.promotion.toUpperCase();\n      }\n    }\n\n    make_move(move);\n    if (in_check()) {\n      if (in_checkmate()) {\n        output += '#';\n      } else {\n        output += '+';\n      }\n    }\n    undo_move();\n\n    return output;\n  }\n\n  // parses all of the decorators out of a SAN string\n  function stripped_san(move) {\n    return move.replace(/=/,'').replace(/[+#]?[?!]*$/,'');\n  }\n\n  function attacked(color, square) {\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      /* if empty square or wrong color */\n      if (board[i] == null || board[i].color !== color) continue;\n\n      var piece = board[i];\n      var difference = i - square;\n      var index = difference + 119;\n\n      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {\n        if (piece.type === PAWN) {\n          if (difference > 0) {\n            if (piece.color === WHITE) return true;\n          } else {\n            if (piece.color === BLACK) return true;\n          }\n          continue;\n        }\n\n        /* if the piece is a knight or a king */\n        if (piece.type === 'n' || piece.type === 'k') return true;\n\n        var offset = RAYS[index];\n        var j = i + offset;\n\n        var blocked = false;\n        while (j !== square) {\n          if (board[j] != null) { blocked = true; break; }\n          j += offset;\n        }\n\n        if (!blocked) return true;\n      }\n    }\n\n    return false;\n  }\n\n  function king_attacked(color) {\n    return attacked(swap_color(color), kings[color]);\n  }\n\n  function in_check() {\n    return king_attacked(turn);\n  }\n\n  function in_checkmate() {\n    return in_check() && generate_moves().length === 0;\n  }\n\n  function in_stalemate() {\n    return !in_check() && generate_moves().length === 0;\n  }\n\n  function insufficient_material() {\n    var pieces = {};\n    var bishops = [];\n    var num_pieces = 0;\n    var sq_color = 0;\n\n    for (var i = SQUARES.a8; i<= SQUARES.h1; i++) {\n      sq_color = (sq_color + 1) % 2;\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece) {\n        pieces[piece.type] = (piece.type in pieces) ?\n                              pieces[piece.type] + 1 : 1;\n        if (piece.type === BISHOP) {\n          bishops.push(sq_color);\n        }\n        num_pieces++;\n      }\n    }\n\n    /* k vs. k */\n    if (num_pieces === 2) { return true; }\n\n    /* k vs. kn .... or .... k vs. kb */\n    else if (num_pieces === 3 && (pieces[BISHOP] === 1 ||\n                                 pieces[KNIGHT] === 1)) { return true; }\n\n    /* kb vs. kb where any number of bishops are all on the same color */\n    else if (num_pieces === pieces[BISHOP] + 2) {\n      var sum = 0;\n      var len = bishops.length;\n      for (var i = 0; i < len; i++) {\n        sum += bishops[i];\n      }\n      if (sum === 0 || sum === len) { return true; }\n    }\n\n    return false;\n  }\n\n  function in_threefold_repetition() {\n    /* TODO: while this function is fine for casual use, a better\n     * implementation would use a Zobrist key (instead of FEN). the\n     * Zobrist key would be maintained in the make_move/undo_move functions,\n     * avoiding the costly that we do below.\n     */\n    var moves = [];\n    var positions = {};\n    var repetition = false;\n\n    while (true) {\n      var move = undo_move();\n      if (!move) break;\n      moves.push(move);\n    }\n\n    while (true) {\n      /* remove the last two fields in the FEN string, they're not needed\n       * when checking for draw by rep */\n      var fen = generate_fen().split(' ').slice(0,4).join(' ');\n\n      /* has the position occurred three or move times */\n      positions[fen] = (fen in positions) ? positions[fen] + 1 : 1;\n      if (positions[fen] >= 3) {\n        repetition = true;\n      }\n\n      if (!moves.length) {\n        break;\n      }\n      make_move(moves.pop());\n    }\n\n    return repetition;\n  }\n\n  function push(move) {\n    history.push({\n      move: move,\n      kings: {b: kings.b, w: kings.w},\n      turn: turn,\n      castling: {b: castling.b, w: castling.w},\n      ep_square: ep_square,\n      half_moves: half_moves,\n      move_number: move_number\n    });\n  }\n\n  function make_move(move) {\n    var us = turn;\n    var them = swap_color(us);\n    push(move);\n\n    board[move.to] = board[move.from];\n    board[move.from] = null;\n\n    /* if ep capture, remove the captured pawn */\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (turn === BLACK) {\n        board[move.to - 16] = null;\n      } else {\n        board[move.to + 16] = null;\n      }\n    }\n\n    /* if pawn promotion, replace with new piece */\n    if (move.flags & BITS.PROMOTION) {\n      board[move.to] = {type: move.promotion, color: us};\n    }\n\n    /* if we moved the king */\n    if (board[move.to].type === KING) {\n      kings[board[move.to].color] = move.to;\n\n      /* if we castled, move the rook next to the king */\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        var castling_to = move.to - 1;\n        var castling_from = move.to + 1;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        var castling_to = move.to + 1;\n        var castling_from = move.to - 2;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      }\n\n      /* turn off castling */\n      castling[us] = '';\n    }\n\n    /* turn off castling if we move a rook */\n    if (castling[us]) {\n      for (var i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (move.from === ROOKS[us][i].square &&\n            castling[us] & ROOKS[us][i].flag) {\n          castling[us] ^= ROOKS[us][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* turn off castling if we capture a rook */\n    if (castling[them]) {\n      for (var i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (move.to === ROOKS[them][i].square &&\n            castling[them] & ROOKS[them][i].flag) {\n          castling[them] ^= ROOKS[them][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* if big pawn move, update the en passant square */\n    if (move.flags & BITS.BIG_PAWN) {\n      if (turn === 'b') {\n        ep_square = move.to - 16;\n      } else {\n        ep_square = move.to + 16;\n      }\n    } else {\n      ep_square = EMPTY;\n    }\n\n    /* reset the 50 move counter if a pawn is moved or a piece is captured */\n    if (move.piece === PAWN) {\n      half_moves = 0;\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      half_moves = 0;\n    } else {\n      half_moves++;\n    }\n\n    if (turn === BLACK) {\n      move_number++;\n    }\n    turn = swap_color(turn);\n  }\n\n  function undo_move() {\n    var old = history.pop();\n    if (old == null) { return null; }\n\n    var move = old.move;\n    kings = old.kings;\n    turn = old.turn;\n    castling = old.castling;\n    ep_square = old.ep_square;\n    half_moves = old.half_moves;\n    move_number = old.move_number;\n\n    var us = turn;\n    var them = swap_color(turn);\n\n    board[move.from] = board[move.to];\n    board[move.from].type = move.piece;  // to undo any promotions\n    board[move.to] = null;\n\n    if (move.flags & BITS.CAPTURE) {\n      board[move.to] = {type: move.captured, color: them};\n    } else if (move.flags & BITS.EP_CAPTURE) {\n      var index;\n      if (us === BLACK) {\n        index = move.to - 16;\n      } else {\n        index = move.to + 16;\n      }\n      board[index] = {type: PAWN, color: them};\n    }\n\n\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      var castling_to, castling_from;\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castling_to = move.to + 1;\n        castling_from = move.to - 1;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        castling_to = move.to - 2;\n        castling_from = move.to + 1;\n      }\n\n      board[castling_to] = board[castling_from];\n      board[castling_from] = null;\n    }\n\n    return move;\n  }\n\n  /* this function is used to uniquely identify ambiguous moves */\n  function get_disambiguator(move, sloppy) {\n    var moves = generate_moves({legal: !sloppy});\n\n    var from = move.from;\n    var to = move.to;\n    var piece = move.piece;\n\n    var ambiguities = 0;\n    var same_rank = 0;\n    var same_file = 0;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      var ambig_from = moves[i].from;\n      var ambig_to = moves[i].to;\n      var ambig_piece = moves[i].piece;\n\n      /* if a move of the same piece type ends on the same to square, we'll\n       * need to add a disambiguator to the algebraic notation\n       */\n      if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {\n        ambiguities++;\n\n        if (rank(from) === rank(ambig_from)) {\n          same_rank++;\n        }\n\n        if (file(from) === file(ambig_from)) {\n          same_file++;\n        }\n      }\n    }\n\n    if (ambiguities > 0) {\n      /* if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      if (same_rank > 0 && same_file > 0) {\n        return algebraic(from);\n      }\n      /* if the moving piece rests on the same file, use the rank symbol as the\n       * disambiguator\n       */\n      else if (same_file > 0) {\n        return algebraic(from).charAt(1);\n      }\n      /* else use the file symbol */\n      else {\n        return algebraic(from).charAt(0);\n      }\n    }\n\n    return '';\n  }\n\n  function ascii() {\n    var s = '   +------------------------+\\n';\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* display the rank */\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |';\n      }\n\n      /* empty piece */\n      if (board[i] == null) {\n        s += ' . ';\n      } else {\n        var piece = board[i].type;\n        var color = board[i].color;\n        var symbol = (color === WHITE) ?\n                     piece.toUpperCase() : piece.toLowerCase();\n        s += ' ' + symbol + ' ';\n      }\n\n      if ((i + 1) & 0x88) {\n        s += '|\\n';\n        i += 8;\n      }\n    }\n    s += '   +------------------------+\\n';\n    s += '     a  b  c  d  e  f  g  h\\n';\n\n    return s;\n  }\n\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  function move_from_san(move, sloppy) {\n    // strip off any move decorations: e.g Nf3+?!\n    var clean_move = stripped_san(move);\n\n    // if we're using the sloppy parser run a regex to grab piece, to, and from\n    // this should parse invalid SAN like: Pe2-e4, Rc1c4, Qf3xf7\n    if (sloppy) {\n      var matches = clean_move.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);\n      if (matches) {\n        var piece = matches[1];\n        var from = matches[2];\n        var to = matches[3];\n        var promotion = matches[4];\n      }\n    }\n\n    var moves = generate_moves();\n    for (var i = 0, len = moves.length; i < len; i++) {\n      // try the strict parser first, then the sloppy parser if requested\n      // by the user\n      if ((clean_move === stripped_san(move_to_san(moves[i]))) ||\n          (sloppy && clean_move === stripped_san(move_to_san(moves[i], true)))) {\n        return moves[i];\n      } else {\n        if (matches &&\n            (!piece || piece.toLowerCase() == moves[i].piece) &&\n            SQUARES[from] == moves[i].from &&\n            SQUARES[to] == moves[i].to &&\n            (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n          return moves[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n\n  /*****************************************************************************\n   * UTILITY FUNCTIONS\n   ****************************************************************************/\n  function rank(i) {\n    return i >> 4;\n  }\n\n  function file(i) {\n    return i & 15;\n  }\n\n  function algebraic(i){\n    var f = file(i), r = rank(i);\n    return 'abcdefgh'.substring(f,f+1) + '87654321'.substring(r,r+1);\n  }\n\n  function swap_color(c) {\n    return c === WHITE ? BLACK : WHITE;\n  }\n\n  function is_digit(c) {\n    return '0123456789'.indexOf(c) !== -1;\n  }\n\n  /* pretty = external move object */\n  function make_pretty(ugly_move) {\n    var move = clone(ugly_move);\n    move.san = move_to_san(move, false);\n    move.to = algebraic(move.to);\n    move.from = algebraic(move.from);\n\n    var flags = '';\n\n    for (var flag in BITS) {\n      if (BITS[flag] & move.flags) {\n        flags += FLAGS[flag];\n      }\n    }\n    move.flags = flags;\n\n    return move;\n  }\n\n  function clone(obj) {\n    var dupe = (obj instanceof Array) ? [] : {};\n\n    for (var property in obj) {\n      if (typeof property === 'object') {\n        dupe[property] = clone(obj[property]);\n      } else {\n        dupe[property] = obj[property];\n      }\n    }\n\n    return dupe;\n  }\n\n  function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  /*****************************************************************************\n   * DEBUGGING UTILITIES\n   ****************************************************************************/\n  function perft(depth) {\n    var moves = generate_moves({legal: false});\n    var nodes = 0;\n    var color = turn;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(color)) {\n        if (depth - 1 > 0) {\n          var child_nodes = perft(depth - 1);\n          nodes += child_nodes;\n        } else {\n          nodes++;\n        }\n      }\n      undo_move();\n    }\n\n    return nodes;\n  }\n\n  return {\n    /***************************************************************************\n     * PUBLIC CONSTANTS (is there a better way to do this?)\n     **************************************************************************/\n    WHITE: WHITE,\n    BLACK: BLACK,\n    PAWN: PAWN,\n    KNIGHT: KNIGHT,\n    BISHOP: BISHOP,\n    ROOK: ROOK,\n    QUEEN: QUEEN,\n    KING: KING,\n    SQUARES: (function() {\n                /* from the ECMA-262 spec (section 12.6.4):\n                 * \"The mechanics of enumerating the properties ... is\n                 * implementation dependent\"\n                 * so: for (var sq in SQUARES) { keys.push(sq); } might not be\n                 * ordered correctly\n                 */\n                var keys = [];\n                for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n                  if (i & 0x88) { i += 7; continue; }\n                  keys.push(algebraic(i));\n                }\n                return keys;\n              })(),\n    FLAGS: FLAGS,\n\n    /***************************************************************************\n     * PUBLIC API\n     **************************************************************************/\n    load: function(fen) {\n      return load(fen);\n    },\n\n    reset: function() {\n      return reset();\n    },\n\n    moves: function(options) {\n      /* The internal representation of a chess move is in 0x88 format, and\n       * not meant to be human-readable.  The code below converts the 0x88\n       * square coordinates to algebraic coordinates.  It also prunes an\n       * unnecessary move keys resulting from a verbose call.\n       */\n\n      var ugly_moves = generate_moves(options);\n      var moves = [];\n\n      for (var i = 0, len = ugly_moves.length; i < len; i++) {\n\n        /* does the user want a full move object (most likely not), or just\n         * SAN\n         */\n        if (typeof options !== 'undefined' && 'verbose' in options &&\n            options.verbose) {\n          moves.push(make_pretty(ugly_moves[i]));\n        } else {\n          moves.push(move_to_san(ugly_moves[i], false));\n        }\n      }\n\n      return moves;\n    },\n\n    in_check: function() {\n      return in_check();\n    },\n\n    in_checkmate: function() {\n      return in_checkmate();\n    },\n\n    in_stalemate: function() {\n      return in_stalemate();\n    },\n\n    in_draw: function() {\n      return half_moves >= 100 ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    insufficient_material: function() {\n      return insufficient_material();\n    },\n\n    in_threefold_repetition: function() {\n      return in_threefold_repetition();\n    },\n\n    game_over: function() {\n      return half_moves >= 100 ||\n             in_checkmate() ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    validate_fen: function(fen) {\n      return validate_fen(fen);\n    },\n\n    fen: function() {\n      return generate_fen();\n    },\n\n    pgn: function(options) {\n      /* using the specification from http://www.chessclub.com/help/PGN-spec\n       * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n       */\n      var newline = (typeof options === 'object' &&\n                     typeof options.newline_char === 'string') ?\n                     options.newline_char : '\\n';\n      var max_width = (typeof options === 'object' &&\n                       typeof options.max_width === 'number') ?\n                       options.max_width : 0;\n      var result = [];\n      var header_exists = false;\n\n      /* add the PGN header headerrmation */\n      for (var i in header) {\n        /* TODO: order of enumerated properties in header object is not\n         * guaranteed, see ECMA-262 spec (section 12.6.4)\n         */\n        result.push('[' + i + ' \\\"' + header[i] + '\\\"]' + newline);\n        header_exists = true;\n      }\n\n      if (header_exists && history.length) {\n        result.push(newline);\n      }\n\n      /* pop all of history onto reversed_history */\n      var reversed_history = [];\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      var moves = [];\n      var move_string = '';\n\n      /* build the list of moves.  a move_string looks like: \"3. e3 e6\" */\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n\n        /* if the position started with black to move, start PGN with 1. ... */\n        if (!history.length && move.color === 'b') {\n          move_string = move_number + '. ...';\n        } else if (move.color === 'w') {\n          /* store the previous generated move_string if we have one */\n          if (move_string.length) {\n            moves.push(move_string);\n          }\n          move_string = move_number + '.';\n        }\n\n        move_string = move_string + ' ' + move_to_san(move, false);\n        make_move(move);\n      }\n\n      /* are there any other leftover moves? */\n      if (move_string.length) {\n        moves.push(move_string);\n      }\n\n      /* is there a result? */\n      if (typeof header.Result !== 'undefined') {\n        moves.push(header.Result);\n      }\n\n      /* history should be back to what is was before we started generating PGN,\n       * so join together moves\n       */\n      if (max_width === 0) {\n        return result.join('') + moves.join(' ');\n      }\n\n      /* wrap the PGN output at max_width */\n      var current_width = 0;\n      for (var i = 0; i < moves.length; i++) {\n        /* if the current move will push past max_width */\n        if (current_width + moves[i].length > max_width && i !== 0) {\n\n          /* don't end the line with whitespace */\n          if (result[result.length - 1] === ' ') {\n            result.pop();\n          }\n\n          result.push(newline);\n          current_width = 0;\n        } else if (i !== 0) {\n          result.push(' ');\n          current_width++;\n        }\n        result.push(moves[i]);\n        current_width += moves[i].length;\n      }\n\n      return result.join('');\n    },\n\n    load_pgn: function(pgn, options) {\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      function mask(str) {\n        return str.replace(/\\\\/g, '\\\\');\n      }\n\n      function has_keys(object) {\n        for (var key in object) {\n          return true;\n        }\n        return false;\n      }\n\n      function parse_pgn_header(header, options) {\n        var newline_char = (typeof options === 'object' &&\n                            typeof options.newline_char === 'string') ?\n                            options.newline_char : '\\r?\\n';\n        var header_obj = {};\n        var headers = header.split(new RegExp(mask(newline_char)));\n        var key = '';\n        var value = '';\n\n        for (var i = 0; i < headers.length; i++) {\n          key = headers[i].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/, '$1');\n          value = headers[i].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\]$/, '$1');\n          if (trim(key).length > 0) {\n            header_obj[key] = value;\n          }\n        }\n\n        return header_obj;\n      }\n\n      var newline_char = (typeof options === 'object' &&\n                          typeof options.newline_char === 'string') ?\n                          options.newline_char : '\\r?\\n';\n      var regex = new RegExp('^(\\\\[(.|' + mask(newline_char) + ')*\\\\])' +\n                             '(' + mask(newline_char) + ')*' +\n                             '1.(' + mask(newline_char) + '|.)*$', 'g');\n\n      /* get header part of the PGN file */\n      var header_string = pgn.replace(regex, '$1');\n\n      /* no info part given, begins with moves */\n      if (header_string[0] !== '[') {\n        header_string = '';\n      }\n\n      reset();\n\n      /* parse PGN header */\n      var headers = parse_pgn_header(header_string, options);\n      for (var key in headers) {\n        set_header([key, headers[key]]);\n      }\n\n      /* load the starting position indicated by [Setup '1'] and\n      * [FEN position] */\n      if (headers['SetUp'] === '1') {\n          if (!(('FEN' in headers) && load(headers['FEN']))) {\n            return false;\n          }\n      }\n\n      /* delete header to get the moves */\n      var ms = pgn.replace(header_string, '').replace(new RegExp(mask(newline_char), 'g'), ' ');\n\n      /* delete comments */\n      ms = ms.replace(/(\\{[^}]+\\})+?/g, '');\n\n      /* delete recursive annotation variations */\n      var rav_regex = /(\\([^\\(\\)]+\\))+?/g\n      while (rav_regex.test(ms)) {\n        ms = ms.replace(rav_regex, '');\n      }\n\n      /* delete move numbers */\n      ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '');\n\n      /* delete ... indicating black to move */\n      ms = ms.replace(/\\.\\.\\./g, '');\n\n      /* delete numeric annotation glyphs */\n      ms = ms.replace(/\\$\\d+/g, '');\n\n      /* trim and get array of moves */\n      var moves = trim(ms).split(new RegExp(/\\s+/));\n\n      /* delete empty entries */\n      moves = moves.join(',').replace(/,,+/g, ',').split(',');\n      var move = '';\n\n      for (var half_move = 0; half_move < moves.length - 1; half_move++) {\n        move = move_from_san(moves[half_move], sloppy);\n\n        /* move not possible! (don't clear the board to examine to show the\n         * latest valid position)\n         */\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n\n      /* examine last move */\n      move = moves[moves.length - 1];\n      if (POSSIBLE_RESULTS.indexOf(move) > -1) {\n        if (has_keys(header) && typeof header.Result === 'undefined') {\n          set_header(['Result', move]);\n        }\n      }\n      else {\n        move = move_from_san(move, sloppy);\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n      return true;\n    },\n\n    header: function() {\n      return set_header(arguments);\n    },\n\n    ascii: function() {\n      return ascii();\n    },\n\n    turn: function() {\n      return turn;\n    },\n\n    move: function(move, options) {\n      /* The move function can be called with in the following parameters:\n       *\n       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string\n       *\n       * .move({ from: 'h7', <- where the 'move' is a move object (additional\n       *         to :'h8',      fields are ignored)\n       *         promotion: 'q',\n       *      })\n       */\n\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      var move_obj = null;\n\n      if (typeof move === 'string') {\n        move_obj = move_from_san(move, sloppy);\n      } else if (typeof move === 'object') {\n        var moves = generate_moves();\n\n        /* convert the pretty move object to an ugly move object */\n        for (var i = 0, len = moves.length; i < len; i++) {\n          if (move.from === algebraic(moves[i].from) &&\n              move.to === algebraic(moves[i].to) &&\n              (!('promotion' in moves[i]) ||\n              move.promotion === moves[i].promotion)) {\n            move_obj = moves[i];\n            break;\n          }\n        }\n      }\n\n      /* failed to find move */\n      if (!move_obj) {\n        return null;\n      }\n\n      /* need to make a copy of move because we can't generate SAN after the\n       * move is made\n       */\n      var pretty_move = make_pretty(move_obj);\n\n      make_move(move_obj);\n\n      return pretty_move;\n    },\n\n    undo: function() {\n      var move = undo_move();\n      return (move) ? make_pretty(move) : null;\n    },\n\n    clear: function() {\n      return clear();\n    },\n\n    put: function(piece, square) {\n      return put(piece, square);\n    },\n\n    get: function(square) {\n      return get(square);\n    },\n\n    remove: function(square) {\n      return remove(square);\n    },\n\n    perft: function(depth) {\n      return perft(depth);\n    },\n\n    square_color: function(square) {\n      if (square in SQUARES) {\n        var sq_0x88 = SQUARES[square];\n        return ((rank(sq_0x88) + file(sq_0x88)) % 2 === 0) ? 'light' : 'dark';\n      }\n\n      return null;\n    },\n\n    history: function(options) {\n      var reversed_history = [];\n      var move_history = [];\n      var verbose = (typeof options !== 'undefined' && 'verbose' in options &&\n                     options.verbose);\n\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n        if (verbose) {\n          move_history.push(make_pretty(move));\n        } else {\n          move_history.push(move_to_san(move));\n        }\n        make_move(move);\n      }\n\n      return move_history;\n    }\n\n  };\n};\n\n/* export Chess object if using node or any other CommonJS compatible\n * environment */\nif (typeof exports !== 'undefined') exports.Chess = Chess;\n/* export Chess object for any RequireJS compatible environment */\nif (typeof define !== 'undefined') define( function () { return Chess;  });",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "Chess",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    }
                ]
            },
            "assetManagerHtml": {
                "enabled": false,
                "fragments": [
                    {
                        "code": "{{Front}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the front side",
                        "enabled": true,
                        "label": "Front",
                        "name": "FrontSide",
                        "version": "v1"
                    },
                    {
                        "code": "{{FrontSide}}\n\n<hr id=\"answer\">\n\n{{Back}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the back side",
                        "enabled": true,
                        "label": "Back",
                        "name": "BackSide",
                        "version": "v1"
                    }
                ],
                "minify": false
            },
            "crowdanki_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "css": "body {\n  margin:0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: -webkit-box;\n\t-webkit-box-align: stretch;\n\t-webkit-box-pack: center;\n\t-webkit-box-orient: vertical;\n\tfont-size:22px;\n    text-align: center; /* ALIGN TEXT */\n}\n.card{text-align:center;\nfont-size:20px;\n}\n\n\n#board{\n\nmargin-left:auto;\nmargin-right:auto;\n\n}\niframe{\ndisplay:block;\n\nmargin-left:auto;margin-right:auto;\nheight:100vh;\nwidth:100vw;\nborder:0;\n}\n\n\n\n\n.mobile iframe{\n\nheight:96vh;\nwidth:96vw;\n}\n\n\n\n",
            "flds": [
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "FEN",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "Comments",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Chess 2.0 vs Engine",
            "req": [
                [
                    0,
                    "any",
                    [
                        0,
                        1
                    ]
                ]
            ],
            "sortf": 0,
            "tags": [],
            "tmpls": [
                {
                    "afmt": "<iframe id=\"analysisBoard\"></iframe>\n<script>\n// v0.5.2 - https://github.com/SimonLammer/anki-persistence/blob/62463a7f63e79ce12f7a622a8ca0beb4c1c5d556/script.js\nif(void 0===window.Persistence){var _persistenceKey=\"github.com/SimonLammer/anki-persistence/\",_defaultKey=\"_default\";if(window.Persistence_sessionStorage=function(){var e=!1;try{\"object\"==typeof window.sessionStorage&&(e=!0,this.clear=function(){for(var e=0;e<sessionStorage.length;e++){var t=sessionStorage.key(e);0==t.indexOf(_persistenceKey)&&(sessionStorage.removeItem(t),e--)}},this.setItem=function(e,t){void 0==t&&(t=e,e=_defaultKey),sessionStorage.setItem(_persistenceKey+e,JSON.stringify(t))},this.getItem=function(e){return void 0==e&&(e=_defaultKey),JSON.parse(sessionStorage.getItem(_persistenceKey+e))},this.removeItem=function(e){void 0==e&&(e=_defaultKey),sessionStorage.removeItem(_persistenceKey+e)})}catch(e){}this.isAvailable=function(){return e}},window.Persistence_windowKey=function(e){var t=window[e],i=!1;\"object\"==typeof t&&(i=!0,this.clear=function(){t[_persistenceKey]={}},this.setItem=function(e,i){void 0==i&&(i=e,e=_defaultKey),t[_persistenceKey][e]=i},this.getItem=function(e){return void 0==e&&(e=_defaultKey),t[_persistenceKey][e]||null},this.removeItem=function(e){void 0==e&&(e=_defaultKey),delete t[_persistenceKey][e]},void 0==t[_persistenceKey]&&this.clear()),this.isAvailable=function(){return i}},window.Persistence=new Persistence_sessionStorage,Persistence.isAvailable()||(window.Persistence=new Persistence_windowKey(\"py\")),!Persistence.isAvailable()){var titleStartIndex=window.location.toString().indexOf(\"title\"),titleContentIndex=window.location.toString().indexOf(\"main\",titleStartIndex);titleStartIndex>0&&titleContentIndex>0&&titleContentIndex-titleStartIndex<10&&(window.Persistence=new Persistence_windowKey(\"qt\"))}}\n</script>\n\n<script>\nvar PGN = ``;\n\nif (Persistence.isAvailable()) {  // Check whether Persistence works on the client.\n  PGN = encodeURI(Persistence.getItem()); // Retrieve the previously stored number and override the default.\n  Persistence.clear();            // Clear the storage, so a new random number will be created on the next card.\n}\n\n\nvar FEN = encodeURIComponent(`{{text:FEN}}`);\n\ndocument.getElementById(\"analysisBoard\").src =`_ChessTempoViewerB.html?PGN=`+PGN+`&FEN=`+FEN+``;\n\n</script>\n",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "<script>\n// v0.5.2 - https://github.com/SimonLammer/anki-persistence/blob/62463a7f63e79ce12f7a622a8ca0beb4c1c5d556/script.js\nif(void 0===window.Persistence){var _persistenceKey=\"github.com/SimonLammer/anki-persistence/\",_defaultKey=\"_default\";if(window.Persistence_sessionStorage=function(){var e=!1;try{\"object\"==typeof window.sessionStorage&&(e=!0,this.clear=function(){for(var e=0;e<sessionStorage.length;e++){var t=sessionStorage.key(e);0==t.indexOf(_persistenceKey)&&(sessionStorage.removeItem(t),e--)}},this.setItem=function(e,t){void 0==t&&(t=e,e=_defaultKey),sessionStorage.setItem(_persistenceKey+e,JSON.stringify(t))},this.getItem=function(e){return void 0==e&&(e=_defaultKey),JSON.parse(sessionStorage.getItem(_persistenceKey+e))},this.removeItem=function(e){void 0==e&&(e=_defaultKey),sessionStorage.removeItem(_persistenceKey+e)})}catch(e){}this.isAvailable=function(){return e}},window.Persistence_windowKey=function(e){var t=window[e],i=!1;\"object\"==typeof t&&(i=!0,this.clear=function(){t[_persistenceKey]={}},this.setItem=function(e,i){void 0==i&&(i=e,e=_defaultKey),t[_persistenceKey][e]=i},this.getItem=function(e){return void 0==e&&(e=_defaultKey),t[_persistenceKey][e]||null},this.removeItem=function(e){void 0==e&&(e=_defaultKey),delete t[_persistenceKey][e]},void 0==t[_persistenceKey]&&this.clear()),this.isAvailable=function(){return i}},window.Persistence=new Persistence_sessionStorage,Persistence.isAvailable()||(window.Persistence=new Persistence_windowKey(\"py\")),!Persistence.isAvailable()){var titleStartIndex=window.location.toString().indexOf(\"title\"),titleContentIndex=window.location.toString().indexOf(\"main\",titleStartIndex);titleStartIndex>0&&titleContentIndex>0&&titleContentIndex-titleStartIndex<10&&(window.Persistence=new Persistence_windowKey(\"qt\"))}}\n</script>\n\n<iframe id=\"Board\"></iframe>\n\n\n<script>\n\n  var FEN = encodeURIComponent(`{{text:FEN}}`);\n  var Comments = encodeURIComponent(`{{text:Comments}}`);\n\n  \n\n\n    /* time spent calculating -- value is randomized to result in varying moves */\nvar thinkTime = 1;\n\nif( /Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\nthinkTime = 2;\n}\n\ndocument.getElementById(\"Board\").src =`_BoardVsEngine.html?FEN=`+FEN+`&thinkTime=`+thinkTime+`&Comments=`+Comments+``;\n\n\n\nvar myPGN;\n\nwindow.addEventListener('message', event => {\n\n        console.log(event.data);\nmyPGN=event.data;\n    if (Persistence.isAvailable()) {\n    Persistence.setItem(myPGN);  //   2. Store that number\n}\n});\n\n\n\n\n\n\n\n</script>\n"
                }
            ],
            "type": 0,
            "vers": []
        },
        {
            "__type__": "NoteModel",
            "assetManager": {
                "enabled": true,
                "indentSize": 4,
                "insertStub": false,
                "scripts": [
                    {
                        "id": "AnkiPersistenceId",
                        "storage": {
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "AnkiPersistenceTag"
                    },
                    {
                        "id": "1599241824911",
                        "storage": {
                            "code": "const elements = closet.anki.getQaChildNodes()\nconst memory = chooseMemory('closet__1')\nconst filterManager = closet.FilterManager.make(preset, memory.map)\n\nconst output = [[\n    elements,\n    memory,\n    filterManager,\n]]\n\n/* here goes the setup - change it to fit your own needs */\n\nfilterManager.install(\n    closet.recipes.shuffle({ tagname: 'mix' }),\n    closet.recipes.order({ tagname: 'ord' }),\n    closet.recipes.cloze({ tagname: 'c' }),\n    closet.recipes.multipleChoice({ tagname: 'mc' }),\n    closet.browser.recipes.rect({ tagname: 'rect' }),\n)",
                            "conditions": [],
                            "description": "This is the configuration of how Closet will behave.\nTo get inspiration you can visit the homepage: closetengine.com.",
                            "enabled": false,
                            "version": "v0.1"
                        },
                        "tag": "ClosetUserScript"
                    },
                    {
                        "id": "Kanjax_id",
                        "storage": {
                            "code": "if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery-2.2.2.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery-2.2.2.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_jquery.bpopup.min.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_jquery.bpopup.min.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);\n\n            if (typeof hljs === \"undefined\") {\n                var script = document.createElement('script');\n                script.src = \"_kanjax_with_koohii.js\";\n                script.async = false;\n                document.head.appendChild(script);\n            }\n\n            var script = document.createElement('script');\n            script.src = '_kanjax_with_koohii.js';\n            script.async = false;\n            document.head.appendChild(script);\n            document.head.removeChild(script);",
                            "conditions": [],
                            "enabled": false,
                            "position": "into_template"
                        },
                        "tag": "Kanjax_tag"
                    },
                    {
                        "id": "jQuery_id",
                        "storage": {
                            "code": "/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.5.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(D).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function ke(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\\s*(?:[^=]|=\\s*.checked.)/i,je=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function qe(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Le(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function He(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(je,\"\"),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join(\"|\"),\"i\");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",n.style.height=\"9px\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=[\"Webkit\",\"Moz\",\"ms\"],ze=E.createElement(\"div\").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",y.checkOn=\"\"!==rt.value,y.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",y.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(\" \")}function yt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=yt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+vt(yt(n))+\" \").indexOf(t))return!0;return!1}});var xt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var St=/\\[\\]$/,kt=/\\r?\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)Dt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\/\\//,Rt={},Mt={},It=\"*/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+\"//\"+Wt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(jt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Et.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&\"withCredentials\"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):(\"number\"==typeof f.top&&(f.top+=\"px\"),\"number\"==typeof f.left&&(f.left+=\"px\"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});",
                            "conditions": [],
                            "enabled": true,
                            "position": "external"
                        },
                        "tag": "jQuery_tag"
                    },
                    {
                        "code": "// chessboard.js v1.0.0\n// https://github.com/oakmac/chessboardjs/\n//\n// Copyright (c) 2019, Chris Oakman\n// Released under the MIT license\n// https://github.com/oakmac/chessboardjs/blob/master/LICENSE.md\n\n// start anonymous scope\n;(function () {\n  'use strict'\n\n  var $ = window['jQuery']\n\n  // ---------------------------------------------------------------------------\n  // Constants\n  // ---------------------------------------------------------------------------\n\n  var COLUMNS = 'abcdefgh'.split('')\n  var DEFAULT_DRAG_THROTTLE_RATE = 20\n  var ELLIPSIS = ''\n  var MINIMUM_JQUERY_VERSION = '1.8.3'\n  var RUN_ASSERTS = false\n  var START_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'\n  var START_POSITION = fenToObj(START_FEN)\n\n  // default animation speeds\n  var DEFAULT_APPEAR_SPEED = 200\n  var DEFAULT_MOVE_SPEED = 200\n  var DEFAULT_SNAPBACK_SPEED = 60\n  var DEFAULT_SNAP_SPEED = 30\n  var DEFAULT_TRASH_SPEED = 100\n\n  // use unique class names to prevent clashing with anything else on the page\n  // and simplify selectors\n  // NOTE: these should never change\n  var CSS = {}\n  CSS['alpha'] = 'alpha-d2270'\n  CSS['black'] = 'black-3c85d'\n  CSS['board'] = 'board-b72b1'\n  CSS['chessboard'] = 'chessboard-63f37'\n  CSS['clearfix'] = 'clearfix-7da63'\n  CSS['highlight1'] = 'highlight1-32417'\n  CSS['highlight2'] = 'highlight2-9c5d2'\n  CSS['notation'] = 'notation-322f9'\n  CSS['numeric'] = 'numeric-fc462'\n  CSS['piece'] = 'piece-417db'\n  CSS['row'] = 'row-5277c'\n  CSS['sparePieces'] = 'spare-pieces-7492f'\n  CSS['sparePiecesBottom'] = 'spare-pieces-bottom-ae20f'\n  CSS['sparePiecesTop'] = 'spare-pieces-top-4028b'\n  CSS['square'] = 'square-55d63'\n  CSS['white'] = 'white-1e1d7'\n\n  // ---------------------------------------------------------------------------\n  // Misc Util Functions\n  // ---------------------------------------------------------------------------\n\n  function throttle (f, interval, scope) {\n    var timeout = 0\n    var shouldFire = false\n    var args = []\n\n    var handleTimeout = function () {\n      timeout = 0\n      if (shouldFire) {\n        shouldFire = false\n        fire()\n      }\n    }\n\n    var fire = function () {\n      timeout = window.setTimeout(handleTimeout, interval)\n      f.apply(scope, args)\n    }\n\n    return function (_args) {\n      args = arguments\n      if (!timeout) {\n        fire()\n      } else {\n        shouldFire = true\n      }\n    }\n  }\n\n  // function debounce (f, interval, scope) {\n  //   var timeout = 0\n  //   return function (_args) {\n  //     window.clearTimeout(timeout)\n  //     var args = arguments\n  //     timeout = window.setTimeout(function () {\n  //       f.apply(scope, args)\n  //     }, interval)\n  //   }\n  // }\n\n  function uuid () {\n    return 'xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx'.replace(/x/g, function (c) {\n      var r = (Math.random() * 16) | 0\n      return r.toString(16)\n    })\n  }\n\n  function deepCopy (thing) {\n    return JSON.parse(JSON.stringify(thing))\n  }\n\n  function parseSemVer (version) {\n    var tmp = version.split('.')\n    return {\n      major: parseInt(tmp[0], 10),\n      minor: parseInt(tmp[1], 10),\n      patch: parseInt(tmp[2], 10)\n    }\n  }\n\n  // returns true if version is >= minimum\n  function validSemanticVersion (version, minimum) {\n    version = parseSemVer(version)\n    minimum = parseSemVer(minimum)\n\n    var versionNum = (version.major * 100000 * 100000) +\n                     (version.minor * 100000) +\n                     version.patch\n    var minimumNum = (minimum.major * 100000 * 100000) +\n                     (minimum.minor * 100000) +\n                     minimum.patch\n\n    return versionNum >= minimumNum\n  }\n\n  function interpolateTemplate (str, obj) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) continue\n      var keyTemplateStr = '{' + key + '}'\n      var value = obj[key]\n      while (str.indexOf(keyTemplateStr) !== -1) {\n        str = str.replace(keyTemplateStr, value)\n      }\n    }\n    return str\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(interpolateTemplate('abc', {a: 'x'}) === 'abc')\n    console.assert(interpolateTemplate('{a}bc', {}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {p: 'q'}) === '{a}bc')\n    console.assert(interpolateTemplate('{a}bc', {a: 'x'}) === 'xbc')\n    console.assert(interpolateTemplate('{a}bc{a}bc', {a: 'x'}) === 'xbcxbc')\n    console.assert(interpolateTemplate('{a}{a}{b}', {a: 'x', b: 'y'}) === 'xxy')\n  }\n\n  // ---------------------------------------------------------------------------\n  // Predicates\n  // ---------------------------------------------------------------------------\n\n  function isString (s) {\n    return typeof s === 'string'\n  }\n\n  function isFunction (f) {\n    return typeof f === 'function'\n  }\n\n  function isInteger (n) {\n    return typeof n === 'number' &&\n           isFinite(n) &&\n           Math.floor(n) === n\n  }\n\n  function validAnimationSpeed (speed) {\n    if (speed === 'fast' || speed === 'slow') return true\n    if (!isInteger(speed)) return false\n    return speed >= 0\n  }\n\n  function validThrottleRate (rate) {\n    return isInteger(rate) &&\n           rate >= 1\n  }\n\n  function validMove (move) {\n    // move should be a string\n    if (!isString(move)) return false\n\n    // move should be in the form of \"e2-e4\", \"f6-d5\"\n    var squares = move.split('-')\n    if (squares.length !== 2) return false\n\n    return validSquare(squares[0]) && validSquare(squares[1])\n  }\n\n  function validSquare (square) {\n    return isString(square) && square.search(/^[a-h][1-8]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validSquare('a1'))\n    console.assert(validSquare('e2'))\n    console.assert(!validSquare('D2'))\n    console.assert(!validSquare('g9'))\n    console.assert(!validSquare('a'))\n    console.assert(!validSquare(true))\n    console.assert(!validSquare(null))\n    console.assert(!validSquare({}))\n  }\n\n  function validPieceCode (code) {\n    return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPieceCode('bP'))\n    console.assert(validPieceCode('bK'))\n    console.assert(validPieceCode('wK'))\n    console.assert(validPieceCode('wR'))\n    console.assert(!validPieceCode('WR'))\n    console.assert(!validPieceCode('Wr'))\n    console.assert(!validPieceCode('a'))\n    console.assert(!validPieceCode(true))\n    console.assert(!validPieceCode(null))\n    console.assert(!validPieceCode({}))\n  }\n\n  function validFen (fen) {\n    if (!isString(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    // expand the empty square numbers to just 1s\n    fen = expandFenEmptySquares(fen)\n\n    // FEN should be 8 sections separated by slashes\n    var chunks = fen.split('/')\n    if (chunks.length !== 8) return false\n\n    // check each section\n    for (var i = 0; i < 8; i++) {\n      if (chunks[i].length !== 8 ||\n          chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validFen(START_FEN))\n    console.assert(validFen('8/8/8/8/8/8/8/8'))\n    console.assert(validFen('r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R'))\n    console.assert(validFen('3r3r/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('3r3z/1p4pp/2nb1k2/pP3p2/8/PB2PN2/p4PPP/R4RK1 b - - 0 1'))\n    console.assert(!validFen('anbqkbnr/8/8/8/8/8/PPPPPPPP/8'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/'))\n    console.assert(!validFen('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBN'))\n    console.assert(!validFen('888888/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen('888888/pppppppp/74/8/8/8/PPPPPPPP/RNBQKBNR'))\n    console.assert(!validFen({}))\n  }\n\n  function validPositionObject (pos) {\n    if (!$.isPlainObject(pos)) return false\n\n    for (var i in pos) {\n      if (!pos.hasOwnProperty(i)) continue\n\n      if (!validSquare(i) || !validPieceCode(pos[i])) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(validPositionObject(START_POSITION))\n    console.assert(validPositionObject({}))\n    console.assert(validPositionObject({e2: 'wP'}))\n    console.assert(validPositionObject({e2: 'wP', d2: 'wP'}))\n    console.assert(!validPositionObject({e2: 'BP'}))\n    console.assert(!validPositionObject({y2: 'wP'}))\n    console.assert(!validPositionObject(null))\n    console.assert(!validPositionObject('start'))\n    console.assert(!validPositionObject(START_FEN))\n  }\n\n  function isTouchDevice () {\n    return 'ontouchstart' in document.documentElement\n  }\n\n  function validJQueryVersion () {\n    return typeof window.$ &&\n           $.fn &&\n           $.fn.jquery &&\n           validSemanticVersion($.fn.jquery, MINIMUM_JQUERY_VERSION)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Chess Util Functions\n  // ---------------------------------------------------------------------------\n\n  // convert FEN piece code to bP, wK, etc\n  function fenToPieceCode (piece) {\n    // black piece\n    if (piece.toLowerCase() === piece) {\n      return 'b' + piece.toUpperCase()\n    }\n\n    // white piece\n    return 'w' + piece.toUpperCase()\n  }\n\n  // convert bP, wK, etc code to FEN structure\n  function pieceCodeToFen (piece) {\n    var pieceCodeLetters = piece.split('')\n\n    // white piece\n    if (pieceCodeLetters[0] === 'w') {\n      return pieceCodeLetters[1].toUpperCase()\n    }\n\n    // black piece\n    return pieceCodeLetters[1].toLowerCase()\n  }\n\n  // convert FEN string to position object\n  // returns false if the FEN string is invalid\n  function fenToObj (fen) {\n    if (!validFen(fen)) return false\n\n    // cut off any move, castling, etc info from the end\n    // we're only interested in position information\n    fen = fen.replace(/ .+$/, '')\n\n    var rows = fen.split('/')\n    var position = {}\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      var row = rows[i].split('')\n      var colIdx = 0\n\n      // loop through each character in the FEN section\n      for (var j = 0; j < row.length; j++) {\n        // number / empty squares\n        if (row[j].search(/[1-8]/) !== -1) {\n          var numEmptySquares = parseInt(row[j], 10)\n          colIdx = colIdx + numEmptySquares\n        } else {\n          // piece\n          var square = COLUMNS[colIdx] + currentRow\n          position[square] = fenToPieceCode(row[j])\n          colIdx = colIdx + 1\n        }\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    return position\n  }\n\n  // position object to FEN string\n  // returns false if the obj is not a valid position object\n  function objToFen (obj) {\n    if (!validPositionObject(obj)) return false\n\n    var fen = ''\n\n    var currentRow = 8\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var square = COLUMNS[j] + currentRow\n\n        // piece exists\n        if (obj.hasOwnProperty(square)) {\n          fen = fen + pieceCodeToFen(obj[square])\n        } else {\n          // empty space\n          fen = fen + '1'\n        }\n      }\n\n      if (i !== 7) {\n        fen = fen + '/'\n      }\n\n      currentRow = currentRow - 1\n    }\n\n    // squeeze the empty numbers together\n    fen = squeezeFenEmptySquares(fen)\n\n    return fen\n  }\n\n  if (RUN_ASSERTS) {\n    console.assert(objToFen(START_POSITION) === START_FEN)\n    console.assert(objToFen({}) === '8/8/8/8/8/8/8/8')\n    console.assert(objToFen({a2: 'wP', 'b2': 'bP'}) === '8/8/8/8/8/8/Pp6/8')\n  }\n\n  function squeezeFenEmptySquares (fen) {\n    return fen.replace(/11111111/g, '8')\n      .replace(/1111111/g, '7')\n      .replace(/111111/g, '6')\n      .replace(/11111/g, '5')\n      .replace(/1111/g, '4')\n      .replace(/111/g, '3')\n      .replace(/11/g, '2')\n  }\n\n  function expandFenEmptySquares (fen) {\n    return fen.replace(/8/g, '11111111')\n      .replace(/7/g, '1111111')\n      .replace(/6/g, '111111')\n      .replace(/5/g, '11111')\n      .replace(/4/g, '1111')\n      .replace(/3/g, '111')\n      .replace(/2/g, '11')\n  }\n\n  // returns the distance between two squares\n  function squareDistance (squareA, squareB) {\n    var squareAArray = squareA.split('')\n    var squareAx = COLUMNS.indexOf(squareAArray[0]) + 1\n    var squareAy = parseInt(squareAArray[1], 10)\n\n    var squareBArray = squareB.split('')\n    var squareBx = COLUMNS.indexOf(squareBArray[0]) + 1\n    var squareBy = parseInt(squareBArray[1], 10)\n\n    var xDelta = Math.abs(squareAx - squareBx)\n    var yDelta = Math.abs(squareAy - squareBy)\n\n    if (xDelta >= yDelta) return xDelta\n    return yDelta\n  }\n\n  // returns the square of the closest instance of piece\n  // returns false if no instance of piece is found in position\n  function findClosestPiece (position, piece, square) {\n    // create array of closest squares from square\n    var closestSquares = createRadius(square)\n\n    // search through the position in order of distance for the piece\n    for (var i = 0; i < closestSquares.length; i++) {\n      var s = closestSquares[i]\n\n      if (position.hasOwnProperty(s) && position[s] === piece) {\n        return s\n      }\n    }\n\n    return false\n  }\n\n  // returns an array of closest squares from square\n  function createRadius (square) {\n    var squares = []\n\n    // calculate distance of all squares\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        var s = COLUMNS[i] + (j + 1)\n\n        // skip the square we're starting from\n        if (square === s) continue\n\n        squares.push({\n          square: s,\n          distance: squareDistance(square, s)\n        })\n      }\n    }\n\n    // sort by distance\n    squares.sort(function (a, b) {\n      return a.distance - b.distance\n    })\n\n    // just return the square code\n    var surroundingSquares = []\n    for (i = 0; i < squares.length; i++) {\n      surroundingSquares.push(squares[i].square)\n    }\n\n    return surroundingSquares\n  }\n\n  // given a position and a set of moves, return a new position\n  // with the moves executed\n  function calculatePositionFromMoves (position, moves) {\n    var newPosition = deepCopy(position)\n\n    for (var i in moves) {\n      if (!moves.hasOwnProperty(i)) continue\n\n      // skip the move if the position doesn't have a piece on the source square\n      if (!newPosition.hasOwnProperty(i)) continue\n\n      var piece = newPosition[i]\n      delete newPosition[i]\n      newPosition[moves[i]] = piece\n    }\n\n    return newPosition\n  }\n\n  // TODO: add some asserts here for calculatePositionFromMoves\n\n  // ---------------------------------------------------------------------------\n  // HTML\n  // ---------------------------------------------------------------------------\n\n  function buildContainerHTML (hasSparePieces) {\n    var html = '<div class=\"{chessboard}\">'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesTop}\"></div>'\n    }\n\n    html += '<div class=\"{board}\"></div>'\n\n    if (hasSparePieces) {\n      html += '<div class=\"{sparePieces} {sparePiecesBottom}\"></div>'\n    }\n\n    html += '</div>'\n\n    return interpolateTemplate(html, CSS)\n  }\n\n  // ---------------------------------------------------------------------------\n  // Config\n  // ---------------------------------------------------------------------------\n\n  function expandConfigArgumentShorthand (config) {\n    if (config === 'start') {\n      config = {position: deepCopy(START_POSITION)}\n    } else if (validFen(config)) {\n      config = {position: fenToObj(config)}\n    } else if (validPositionObject(config)) {\n      config = {position: deepCopy(config)}\n    }\n\n    // config must be an object\n    if (!$.isPlainObject(config)) config = {}\n\n    return config\n  }\n\n  // validate config / set default options\n  function expandConfig (config) {\n    // default for orientation is white\n    if (config.orientation !== 'black') config.orientation = 'white'\n\n    // default for showNotation is true\n    if (config.showNotation !== false) config.showNotation = true\n\n    // default for draggable is false\n    if (config.draggable !== true) config.draggable = false\n\n    // default for dropOffBoard is 'snapback'\n    if (config.dropOffBoard !== 'trash') config.dropOffBoard = 'snapback'\n\n    // default for sparePieces is false\n    if (config.sparePieces !== true) config.sparePieces = false\n\n    // draggable must be true if sparePieces is enabled\n    if (config.sparePieces) config.draggable = true\n\n    // default piece theme is wikipedia\n    if (!config.hasOwnProperty('pieceTheme') ||\n        (!isString(config.pieceTheme) && !isFunction(config.pieceTheme))) {\n      config.pieceTheme = 'img/chesspieces/wikipedia/{piece}.png'\n    }\n\n    // animation speeds\n    if (!validAnimationSpeed(config.appearSpeed)) config.appearSpeed = DEFAULT_APPEAR_SPEED\n    if (!validAnimationSpeed(config.moveSpeed)) config.moveSpeed = DEFAULT_MOVE_SPEED\n    if (!validAnimationSpeed(config.snapbackSpeed)) config.snapbackSpeed = DEFAULT_SNAPBACK_SPEED\n    if (!validAnimationSpeed(config.snapSpeed)) config.snapSpeed = DEFAULT_SNAP_SPEED\n    if (!validAnimationSpeed(config.trashSpeed)) config.trashSpeed = DEFAULT_TRASH_SPEED\n\n    // throttle rate\n    if (!validThrottleRate(config.dragThrottleRate)) config.dragThrottleRate = DEFAULT_DRAG_THROTTLE_RATE\n\n    return config\n  }\n\n  // ---------------------------------------------------------------------------\n  // Dependencies\n  // ---------------------------------------------------------------------------\n\n  // check for a compatible version of jQuery\n  function checkJQuery () {\n    if (!validJQueryVersion()) {\n      var errorMsg = 'Chessboard Error 1005: Unable to find a valid version of jQuery. ' +\n        'Please include jQuery ' + MINIMUM_JQUERY_VERSION + ' or higher on the page' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg)\n      return false\n    }\n\n    return true\n  }\n\n  // return either boolean false or the $container element\n  function checkContainerArg (containerElOrString) {\n    if (containerElOrString === '') {\n      var errorMsg1 = 'Chessboard Error 1001: ' +\n        'The first argument to Chessboard() cannot be an empty string.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg1)\n      return false\n    }\n\n    // convert containerEl to query selector if it is a string\n    if (isString(containerElOrString) &&\n        containerElOrString.charAt(0) !== '#') {\n      containerElOrString = '#' + containerElOrString\n    }\n\n    // containerEl must be something that becomes a jQuery collection of size 1\n    var $container = $(containerElOrString)\n    if ($container.length !== 1) {\n      var errorMsg2 = 'Chessboard Error 1003: ' +\n        'The first argument to Chessboard() must be the ID of a DOM node, ' +\n        'an ID query selector, or a single DOM node.' +\n        '\\n\\n' +\n        'Exiting' + ELLIPSIS\n      window.alert(errorMsg2)\n      return false\n    }\n\n    return $container\n  }\n\n  // ---------------------------------------------------------------------------\n  // Constructor\n  // ---------------------------------------------------------------------------\n\n  function constructor (containerElOrString, config) {\n    // first things first: check basic dependencies\n    if (!checkJQuery()) return null\n    var $container = checkContainerArg(containerElOrString)\n    if (!$container) return null\n\n    // ensure the config object is what we expect\n    config = expandConfigArgumentShorthand(config)\n    config = expandConfig(config)\n\n    // DOM elements\n    var $board = null\n    var $draggedPiece = null\n    var $sparePiecesTop = null\n    var $sparePiecesBottom = null\n\n    // constructor return object\n    var widget = {}\n\n    // -------------------------------------------------------------------------\n    // Stateful\n    // -------------------------------------------------------------------------\n\n    var boardBorderSize = 2\n    var currentOrientation = 'white'\n    var currentPosition = {}\n    var draggedPiece = null\n    var draggedPieceLocation = null\n    var draggedPieceSource = null\n    var isDragging = false\n    var sparePiecesElsIds = {}\n    var squareElsIds = {}\n    var squareElsOffsets = {}\n    var squareSize = 16\n\n    // -------------------------------------------------------------------------\n    // Validation / Errors\n    // -------------------------------------------------------------------------\n\n    function error (code, msg, obj) {\n      // do nothing if showErrors is not set\n      if (\n        config.hasOwnProperty('showErrors') !== true ||\n          config.showErrors === false\n      ) {\n        return\n      }\n\n      var errorText = 'Chessboard Error ' + code + ': ' + msg\n\n      // print to console\n      if (\n        config.showErrors === 'console' &&\n          typeof console === 'object' &&\n          typeof console.log === 'function'\n      ) {\n        console.log(errorText)\n        if (arguments.length >= 2) {\n          console.log(obj)\n        }\n        return\n      }\n\n      // alert errors\n      if (config.showErrors === 'alert') {\n        if (obj) {\n          errorText += '\\n\\n' + JSON.stringify(obj)\n        }\n        window.alert(errorText)\n        return\n      }\n\n      // custom function\n      if (isFunction(config.showErrors)) {\n        config.showErrors(code, msg, obj)\n      }\n    }\n\n    function setInitialState () {\n      currentOrientation = config.orientation\n\n      // make sure position is valid\n      if (config.hasOwnProperty('position')) {\n        if (config.position === 'start') {\n          currentPosition = deepCopy(START_POSITION)\n        } else if (validFen(config.position)) {\n          currentPosition = fenToObj(config.position)\n        } else if (validPositionObject(config.position)) {\n          currentPosition = deepCopy(config.position)\n        } else {\n          error(\n            7263,\n            'Invalid value passed to config.position.',\n            config.position\n          )\n        }\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // DOM Misc\n    // -------------------------------------------------------------------------\n\n    // calculates square size based on the width of the container\n    // got a little CSS black magic here, so let me explain:\n    // get the width of the container element (could be anything), reduce by 1 for\n    // fudge factor, and then keep reducing until we find an exact mod 8 for\n    // our square size\n    function calculateSquareSize () {\n      var containerWidth = parseInt($container.width(), 10)\n\n      // defensive, prevent infinite loop\n      if (!containerWidth || containerWidth <= 0) {\n        return 0\n      }\n\n      // pad one pixel\n      var boardWidth = containerWidth - 1\n\n      while (boardWidth % 8 !== 0 && boardWidth > 0) {\n        boardWidth = boardWidth - 1\n      }\n\n      return boardWidth / 8\n    }\n\n    // create random IDs for elements\n    function createElIds () {\n      // squares on the board\n      for (var i = 0; i < COLUMNS.length; i++) {\n        for (var j = 1; j <= 8; j++) {\n          var square = COLUMNS[i] + j\n          squareElsIds[square] = square + '-' + uuid()\n        }\n      }\n\n      // spare pieces\n      var pieces = 'KQRNBP'.split('')\n      for (i = 0; i < pieces.length; i++) {\n        var whitePiece = 'w' + pieces[i]\n        var blackPiece = 'b' + pieces[i]\n        sparePiecesElsIds[whitePiece] = whitePiece + '-' + uuid()\n        sparePiecesElsIds[blackPiece] = blackPiece + '-' + uuid()\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Markup Building\n    // -------------------------------------------------------------------------\n\n    function buildBoardHTML (orientation) {\n      if (orientation !== 'black') {\n        orientation = 'white'\n      }\n\n      var html = ''\n\n      // algebraic notation / orientation\n      var alpha = deepCopy(COLUMNS)\n      var row = 8\n      if (orientation === 'black') {\n        alpha.reverse()\n        row = 1\n      }\n\n      var squareColor = 'white'\n      for (var i = 0; i < 8; i++) {\n        html += '<div class=\"{row}\">'\n        for (var j = 0; j < 8; j++) {\n          var square = alpha[j] + row\n\n          html += '<div class=\"{square} ' + CSS[squareColor] + ' ' +\n            'square-' + square + '\" ' +\n            'style=\"width:' + squareSize + 'px;height:' + squareSize + 'px;\" ' +\n            'id=\"' + squareElsIds[square] + '\" ' +\n            'data-square=\"' + square + '\">'\n\n          if (config.showNotation) {\n            // alpha notation\n            if ((orientation === 'white' && row === 1) ||\n                (orientation === 'black' && row === 8)) {\n              html += '<div class=\"{notation} {alpha}\">' + alpha[j] + '</div>'\n            }\n\n            // numeric notation\n            if (j === 0) {\n              html += '<div class=\"{notation} {numeric}\">' + row + '</div>'\n            }\n          }\n\n          html += '</div>' // end .square\n\n          squareColor = (squareColor === 'white') ? 'black' : 'white'\n        }\n        html += '<div class=\"{clearfix}\"></div></div>'\n\n        squareColor = (squareColor === 'white') ? 'black' : 'white'\n\n        if (orientation === 'white') {\n          row = row - 1\n        } else {\n          row = row + 1\n        }\n      }\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildPieceImgSrc (piece) {\n      if (isFunction(config.pieceTheme)) {\n        return config.pieceTheme(piece)\n      }\n\n      if (isString(config.pieceTheme)) {\n        return interpolateTemplate(config.pieceTheme, {piece: piece})\n      }\n\n      // NOTE: this should never happen\n      error(8272, 'Unable to build image source for config.pieceTheme.')\n      return ''\n    }\n\n    function buildPieceHTML (piece, hidden, id) {\n      var html = '<img src=\"' + buildPieceImgSrc(piece) + '\" '\n      if (isString(id) && id !== '') {\n        html += 'id=\"' + id + '\" '\n      }\n      html += 'alt=\"\" ' +\n        'class=\"{piece}\" ' +\n        'data-piece=\"' + piece + '\" ' +\n        'style=\"width:' + squareSize + 'px;' + 'height:' + squareSize + 'px;'\n\n      if (hidden) {\n        html += 'display:none;'\n      }\n\n      html += '\" />'\n\n      return interpolateTemplate(html, CSS)\n    }\n\n    function buildSparePiecesHTML (color) {\n      var pieces = ['wK', 'wQ', 'wR', 'wB', 'wN', 'wP']\n      if (color === 'black') {\n        pieces = ['bK', 'bQ', 'bR', 'bB', 'bN', 'bP']\n      }\n\n      var html = ''\n      for (var i = 0; i < pieces.length; i++) {\n        html += buildPieceHTML(pieces[i], false, sparePiecesElsIds[pieces[i]])\n      }\n\n      return html\n    }\n\n    // -------------------------------------------------------------------------\n    // Animations\n    // -------------------------------------------------------------------------\n\n    function animateSquareToSquare (src, dest, piece, completeFn) {\n      // get information about the source and destination squares\n      var $srcSquare = $('#' + squareElsIds[src])\n      var srcSquarePosition = $srcSquare.offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destSquarePosition = $destSquare.offset()\n\n      // create the animated piece and absolutely position it\n      // over the source square\n      var animatedPieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, animatedPieceId))\n      var $animatedPiece = $('#' + animatedPieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        top: srcSquarePosition.top,\n        left: srcSquarePosition.left\n      })\n\n      // remove original piece from source square\n      $srcSquare.find('.' + CSS.piece).remove()\n\n      function onFinishAnimation1 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation1\n      }\n      $animatedPiece.animate(destSquarePosition, opts)\n    }\n\n    function animateSparePieceToSquare (piece, dest, completeFn) {\n      var srcOffset = $('#' + sparePiecesElsIds[piece]).offset()\n      var $destSquare = $('#' + squareElsIds[dest])\n      var destOffset = $destSquare.offset()\n\n      // create the animate piece\n      var pieceId = uuid()\n      $('body').append(buildPieceHTML(piece, true, pieceId))\n      var $animatedPiece = $('#' + pieceId)\n      $animatedPiece.css({\n        display: '',\n        position: 'absolute',\n        left: srcOffset.left,\n        top: srcOffset.top\n      })\n\n      // on complete\n      function onFinishAnimation2 () {\n        // add the \"real\" piece to the destination square\n        $destSquare.find('.' + CSS.piece).remove()\n        $destSquare.append(buildPieceHTML(piece))\n\n        // remove the animated piece\n        $animatedPiece.remove()\n\n        // run complete function\n        if (isFunction(completeFn)) {\n          completeFn()\n        }\n      }\n\n      // animate the piece to the destination square\n      var opts = {\n        duration: config.moveSpeed,\n        complete: onFinishAnimation2\n      }\n      $animatedPiece.animate(destOffset, opts)\n    }\n\n    // execute an array of animations\n    function doAnimations (animations, oldPos, newPos) {\n      if (animations.length === 0) return\n\n      var numFinished = 0\n      function onFinishAnimation3 () {\n        // exit if all the animations aren't finished\n        numFinished = numFinished + 1\n        if (numFinished !== animations.length) return\n\n        drawPositionInstant()\n\n        // run their onMoveEnd function\n        if (isFunction(config.onMoveEnd)) {\n          config.onMoveEnd(deepCopy(oldPos), deepCopy(newPos))\n        }\n      }\n\n      for (var i = 0; i < animations.length; i++) {\n        var animation = animations[i]\n\n        // clear a piece\n        if (animation.type === 'clear') {\n          $('#' + squareElsIds[animation.square] + ' .' + CSS.piece)\n            .fadeOut(config.trashSpeed, onFinishAnimation3)\n\n        // add a piece with no spare pieces - fade the piece onto the square\n        } else if (animation.type === 'add' && !config.sparePieces) {\n          $('#' + squareElsIds[animation.square])\n            .append(buildPieceHTML(animation.piece, true))\n            .find('.' + CSS.piece)\n            .fadeIn(config.appearSpeed, onFinishAnimation3)\n\n        // add a piece with spare pieces - animate from the spares\n        } else if (animation.type === 'add' && config.sparePieces) {\n          animateSparePieceToSquare(animation.piece, animation.square, onFinishAnimation3)\n\n        // move a piece from squareA to squareB\n        } else if (animation.type === 'move') {\n          animateSquareToSquare(animation.source, animation.destination, animation.piece, onFinishAnimation3)\n        }\n      }\n    }\n\n    // calculate an array of animations that need to happen in order to get\n    // from pos1 to pos2\n    function calculateAnimations (pos1, pos2) {\n      // make copies of both\n      pos1 = deepCopy(pos1)\n      pos2 = deepCopy(pos2)\n\n      var animations = []\n      var squaresMovedTo = {}\n\n      // remove pieces that are the same in both positions\n      for (var i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        if (pos1.hasOwnProperty(i) && pos1[i] === pos2[i]) {\n          delete pos1[i]\n          delete pos2[i]\n        }\n      }\n\n      // find all the \"move\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        var closestPiece = findClosestPiece(pos1, pos2[i], i)\n        if (closestPiece) {\n          animations.push({\n            type: 'move',\n            source: closestPiece,\n            destination: i,\n            piece: pos2[i]\n          })\n\n          delete pos1[closestPiece]\n          delete pos2[i]\n          squaresMovedTo[i] = true\n        }\n      }\n\n      // \"add\" animations\n      for (i in pos2) {\n        if (!pos2.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'add',\n          square: i,\n          piece: pos2[i]\n        })\n\n        delete pos2[i]\n      }\n\n      // \"clear\" animations\n      for (i in pos1) {\n        if (!pos1.hasOwnProperty(i)) continue\n\n        // do not clear a piece if it is on a square that is the result\n        // of a \"move\", ie: a piece capture\n        if (squaresMovedTo.hasOwnProperty(i)) continue\n\n        animations.push({\n          type: 'clear',\n          square: i,\n          piece: pos1[i]\n        })\n\n        delete pos1[i]\n      }\n\n      return animations\n    }\n\n    // -------------------------------------------------------------------------\n    // Control Flow\n    // -------------------------------------------------------------------------\n\n    function drawPositionInstant () {\n      // clear the board\n      $board.find('.' + CSS.piece).remove()\n\n      // add the pieces\n      for (var i in currentPosition) {\n        if (!currentPosition.hasOwnProperty(i)) continue\n\n        $('#' + squareElsIds[i]).append(buildPieceHTML(currentPosition[i]))\n      }\n    }\n\n    function drawBoard () {\n      $board.html(buildBoardHTML(currentOrientation, squareSize, config.showNotation))\n      drawPositionInstant()\n\n      if (config.sparePieces) {\n        if (currentOrientation === 'white') {\n          $sparePiecesTop.html(buildSparePiecesHTML('black'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('white'))\n        } else {\n          $sparePiecesTop.html(buildSparePiecesHTML('white'))\n          $sparePiecesBottom.html(buildSparePiecesHTML('black'))\n        }\n      }\n    }\n\n    function setCurrentPosition (position) {\n      var oldPos = deepCopy(currentPosition)\n      var newPos = deepCopy(position)\n      var oldFen = objToFen(oldPos)\n      var newFen = objToFen(newPos)\n\n      // do nothing if no change in position\n      if (oldFen === newFen) return\n\n      // run their onChange function\n      if (isFunction(config.onChange)) {\n        config.onChange(oldPos, newPos)\n      }\n\n      // update state\n      currentPosition = position\n    }\n\n    function isXYOnSquare (x, y) {\n      for (var i in squareElsOffsets) {\n        if (!squareElsOffsets.hasOwnProperty(i)) continue\n\n        var s = squareElsOffsets[i]\n        if (x >= s.left &&\n            x < s.left + squareSize &&\n            y >= s.top &&\n            y < s.top + squareSize) {\n          return i\n        }\n      }\n\n      return 'offboard'\n    }\n\n    // records the XY coords of every square into memory\n    function captureSquareOffsets () {\n      squareElsOffsets = {}\n\n      for (var i in squareElsIds) {\n        if (!squareElsIds.hasOwnProperty(i)) continue\n\n        squareElsOffsets[i] = $('#' + squareElsIds[i]).offset()\n      }\n    }\n\n    function removeSquareHighlights () {\n      $board\n        .find('.' + CSS.square)\n        .removeClass(CSS.highlight1 + ' ' + CSS.highlight2)\n    }\n\n    function snapbackDraggedPiece () {\n      // there is no \"snapback\" for spare pieces\n      if (draggedPieceSource === 'spare') {\n        trashDraggedPiece()\n        return\n      }\n\n      removeSquareHighlights()\n\n      // animation complete\n      function complete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // run their onSnapbackEnd function\n        if (isFunction(config.onSnapbackEnd)) {\n          config.onSnapbackEnd(\n            draggedPiece,\n            draggedPieceSource,\n            deepCopy(currentPosition),\n            currentOrientation\n          )\n        }\n      }\n\n      // get source square position\n      var sourceSquarePosition = $('#' + squareElsIds[draggedPieceSource]).offset()\n\n      // animate the piece to the target square\n      var opts = {\n        duration: config.snapbackSpeed,\n        complete: complete\n      }\n      $draggedPiece.animate(sourceSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function trashDraggedPiece () {\n      removeSquareHighlights()\n\n      // remove the source piece\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      setCurrentPosition(newPosition)\n\n      // redraw the position\n      drawPositionInstant()\n\n      // hide the dragged piece\n      $draggedPiece.fadeOut(config.trashSpeed)\n\n      // set state\n      isDragging = false\n    }\n\n    function dropDraggedPieceOnSquare (square) {\n      removeSquareHighlights()\n\n      // update position\n      var newPosition = deepCopy(currentPosition)\n      delete newPosition[draggedPieceSource]\n      newPosition[square] = draggedPiece\n      setCurrentPosition(newPosition)\n\n      // get target square information\n      var targetSquarePosition = $('#' + squareElsIds[square]).offset()\n\n      // animation complete\n      function onAnimationComplete () {\n        drawPositionInstant()\n        $draggedPiece.css('display', 'none')\n\n        // execute their onSnapEnd function\n        if (isFunction(config.onSnapEnd)) {\n          config.onSnapEnd(draggedPieceSource, square, draggedPiece)\n        }\n      }\n\n      // snap the piece to the target square\n      var opts = {\n        duration: config.snapSpeed,\n        complete: onAnimationComplete\n      }\n      $draggedPiece.animate(targetSquarePosition, opts)\n\n      // set state\n      isDragging = false\n    }\n\n    function beginDraggingPiece (source, piece, x, y) {\n      // run their custom onDragStart function\n      // their custom onDragStart function can cancel drag start\n      if (isFunction(config.onDragStart) &&\n          config.onDragStart(source, piece, deepCopy(currentPosition), currentOrientation) === false) {\n        return\n      }\n\n      // set state\n      isDragging = true\n      draggedPiece = piece\n      draggedPieceSource = source\n\n      // if the piece came from spare pieces, location is offboard\n      if (source === 'spare') {\n        draggedPieceLocation = 'offboard'\n      } else {\n        draggedPieceLocation = source\n      }\n\n      // capture the x, y coords of all squares in memory\n      captureSquareOffsets()\n\n      // create the dragged piece\n      $draggedPiece.attr('src', buildPieceImgSrc(piece)).css({\n        display: '',\n        position: 'absolute',\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      if (source !== 'spare') {\n        // highlight the source square and hide the piece\n        $('#' + squareElsIds[source])\n          .addClass(CSS.highlight1)\n          .find('.' + CSS.piece)\n          .css('display', 'none')\n      }\n    }\n\n    function updateDraggedPiece (x, y) {\n      // put the dragged piece over the mouse cursor\n      $draggedPiece.css({\n        left: x - squareSize / 2,\n        top: y - squareSize / 2\n      })\n\n      // get location\n      var location = isXYOnSquare(x, y)\n\n      // do nothing if the location has not changed\n      if (location === draggedPieceLocation) return\n\n      // remove highlight from previous square\n      if (validSquare(draggedPieceLocation)) {\n        $('#' + squareElsIds[draggedPieceLocation]).removeClass(CSS.highlight2)\n      }\n\n      // add highlight to new square\n      if (validSquare(location)) {\n        $('#' + squareElsIds[location]).addClass(CSS.highlight2)\n      }\n\n      // run onDragMove\n      if (isFunction(config.onDragMove)) {\n        config.onDragMove(\n          location,\n          draggedPieceLocation,\n          draggedPieceSource,\n          draggedPiece,\n          deepCopy(currentPosition),\n          currentOrientation\n        )\n      }\n\n      // update state\n      draggedPieceLocation = location\n    }\n\n    function stopDraggedPiece (location) {\n      // determine what the action should be\n      var action = 'drop'\n      if (location === 'offboard' && config.dropOffBoard === 'snapback') {\n        action = 'snapback'\n      }\n      if (location === 'offboard' && config.dropOffBoard === 'trash') {\n        action = 'trash'\n      }\n\n      // run their onDrop function, which can potentially change the drop action\n      if (isFunction(config.onDrop)) {\n        var newPosition = deepCopy(currentPosition)\n\n        // source piece is a spare piece and position is off the board\n        // if (draggedPieceSource === 'spare' && location === 'offboard') {...}\n        // position has not changed; do nothing\n\n        // source piece is a spare piece and position is on the board\n        if (draggedPieceSource === 'spare' && validSquare(location)) {\n          // add the piece to the board\n          newPosition[location] = draggedPiece\n        }\n\n        // source piece was on the board and position is off the board\n        if (validSquare(draggedPieceSource) && location === 'offboard') {\n          // remove the piece from the board\n          delete newPosition[draggedPieceSource]\n        }\n\n        // source piece was on the board and position is on the board\n        if (validSquare(draggedPieceSource) && validSquare(location)) {\n          // move the piece\n          delete newPosition[draggedPieceSource]\n          newPosition[location] = draggedPiece\n        }\n\n        var oldPosition = deepCopy(currentPosition)\n\n        var result = config.onDrop(\n          draggedPieceSource,\n          location,\n          draggedPiece,\n          newPosition,\n          oldPosition,\n          currentOrientation\n        )\n        if (result === 'snapback' || result === 'trash') {\n          action = result\n        }\n      }\n\n      // do it!\n      if (action === 'snapback') {\n        snapbackDraggedPiece()\n      } else if (action === 'trash') {\n        trashDraggedPiece()\n      } else if (action === 'drop') {\n        dropDraggedPieceOnSquare(location)\n      }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    // clear the board\n    widget.clear = function (useAnimation) {\n      widget.position({}, useAnimation)\n    }\n\n    // remove the widget from the page\n    widget.destroy = function () {\n      // remove markup\n      $container.html('')\n      $draggedPiece.remove()\n\n      // remove event handlers\n      $container.unbind()\n    }\n\n    // shorthand method to get the current FEN\n    widget.fen = function () {\n      return widget.position('fen')\n    }\n\n    // flip orientation\n    widget.flip = function () {\n      return widget.orientation('flip')\n    }\n\n    // move pieces\n    // TODO: this method should be variadic as well as accept an array of moves\n    widget.move = function () {\n      // no need to throw an error here; just do nothing\n      // TODO: this should return the current position\n      if (arguments.length === 0) return\n\n      var useAnimation = true\n\n      // collect the moves into an object\n      var moves = {}\n      for (var i = 0; i < arguments.length; i++) {\n        // any \"false\" to this function means no animations\n        if (arguments[i] === false) {\n          useAnimation = false\n          continue\n        }\n\n        // skip invalid arguments\n        if (!validMove(arguments[i])) {\n          error(2826, 'Invalid move passed to the move method.', arguments[i])\n          continue\n        }\n\n        var tmp = arguments[i].split('-')\n        moves[tmp[0]] = tmp[1]\n      }\n\n      // calculate position from moves\n      var newPos = calculatePositionFromMoves(currentPosition, moves)\n\n      // update the board\n      widget.position(newPos, useAnimation)\n\n      // return the new position object\n      return newPos\n    }\n\n    widget.orientation = function (arg) {\n      // no arguments, return the current orientation\n      if (arguments.length === 0) {\n        return currentOrientation\n      }\n\n      // set to white or black\n      if (arg === 'white' || arg === 'black') {\n        currentOrientation = arg\n        drawBoard()\n        return currentOrientation\n      }\n\n      // flip orientation\n      if (arg === 'flip') {\n        currentOrientation = currentOrientation === 'white' ? 'black' : 'white'\n        drawBoard()\n        return currentOrientation\n      }\n\n      error(5482, 'Invalid value passed to the orientation method.', arg)\n    }\n\n    widget.position = function (position, useAnimation) {\n      // no arguments, return the current position\n      if (arguments.length === 0) {\n        return deepCopy(currentPosition)\n      }\n\n      // get position as FEN\n      if (isString(position) && position.toLowerCase() === 'fen') {\n        return objToFen(currentPosition)\n      }\n\n      // start position\n      if (isString(position) && position.toLowerCase() === 'start') {\n        position = deepCopy(START_POSITION)\n      }\n\n      // convert FEN to position object\n      if (validFen(position)) {\n        position = fenToObj(position)\n      }\n\n      // validate position object\n      if (!validPositionObject(position)) {\n        error(6482, 'Invalid value passed to the position method.', position)\n        return\n      }\n\n      // default for useAnimations is true\n      if (useAnimation !== false) useAnimation = true\n\n      if (useAnimation) {\n        // start the animations\n        var animations = calculateAnimations(currentPosition, position)\n        doAnimations(animations, currentPosition, position)\n\n        // set the new position\n        setCurrentPosition(position)\n      } else {\n        // instant update\n        setCurrentPosition(position)\n        drawPositionInstant()\n      }\n    }\n\n    widget.resize = function () {\n      // calulate the new square size\n      squareSize = calculateSquareSize()\n\n      // set board width\n      $board.css('width', squareSize * 8 + 'px')\n\n      // set drag piece size\n      $draggedPiece.css({\n        height: squareSize,\n        width: squareSize\n      })\n\n      // spare pieces\n      if (config.sparePieces) {\n        $container\n          .find('.' + CSS.sparePieces)\n          .css('paddingLeft', squareSize + boardBorderSize + 'px')\n      }\n\n      // redraw the board\n      drawBoard()\n    }\n\n    // set the starting position\n    widget.start = function (useAnimation) {\n      widget.position('start', useAnimation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Browser Events\n    // -------------------------------------------------------------------------\n\n    function stopDefault (evt) {\n      evt.preventDefault()\n    }\n\n    function mousedownSquare (evt) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      beginDraggingPiece(square, currentPosition[square], evt.pageX, evt.pageY)\n    }\n\n    function touchstartSquare (e) {\n      // do nothing if we're not draggable\n      if (!config.draggable) return\n\n      // do nothing if there is no piece on this square\n      var square = $(this).attr('data-square')\n      if (!validSquare(square)) return\n      if (!currentPosition.hasOwnProperty(square)) return\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        square,\n        currentPosition[square],\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousedownSparePiece (evt) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      beginDraggingPiece('spare', piece, evt.pageX, evt.pageY)\n    }\n\n    function touchstartSparePiece (e) {\n      // do nothing if sparePieces is not enabled\n      if (!config.sparePieces) return\n\n      var piece = $(this).attr('data-piece')\n\n      e = e.originalEvent\n      beginDraggingPiece(\n        'spare',\n        piece,\n        e.changedTouches[0].pageX,\n        e.changedTouches[0].pageY\n      )\n    }\n\n    function mousemoveWindow (evt) {\n      if (isDragging) {\n        updateDraggedPiece(evt.pageX, evt.pageY)\n      }\n    }\n\n    var throttledMousemoveWindow = throttle(mousemoveWindow, config.dragThrottleRate)\n\n    function touchmoveWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // prevent screen from scrolling\n      evt.preventDefault()\n\n      updateDraggedPiece(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n    }\n\n    var throttledTouchmoveWindow = throttle(touchmoveWindow, config.dragThrottleRate)\n\n    function mouseupWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.pageX, evt.pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function touchendWindow (evt) {\n      // do nothing if we are not dragging a piece\n      if (!isDragging) return\n\n      // get the location\n      var location = isXYOnSquare(evt.originalEvent.changedTouches[0].pageX,\n        evt.originalEvent.changedTouches[0].pageY)\n\n      stopDraggedPiece(location)\n    }\n\n    function mouseenterSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide a onMouseoverSquare function\n      if (!isFunction(config.onMouseoverSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoverSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    function mouseleaveSquare (evt) {\n      // do not fire this event if we are dragging a piece\n      // NOTE: this should never happen, but it's a safeguard\n      if (isDragging) return\n\n      // exit if they did not provide an onMouseoutSquare function\n      if (!isFunction(config.onMouseoutSquare)) return\n\n      // get the square\n      var square = $(evt.currentTarget).attr('data-square')\n\n      // NOTE: this should never happen; defensive\n      if (!validSquare(square)) return\n\n      // get the piece on this square\n      var piece = false\n      if (currentPosition.hasOwnProperty(square)) {\n        piece = currentPosition[square]\n      }\n\n      // execute their function\n      config.onMouseoutSquare(square, piece, deepCopy(currentPosition), currentOrientation)\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    function addEvents () {\n      // prevent \"image drag\"\n      $('body').on('mousedown mousemove', '.' + CSS.piece, stopDefault)\n\n      // mouse drag pieces\n      $board.on('mousedown', '.' + CSS.square, mousedownSquare)\n      $container.on('mousedown', '.' + CSS.sparePieces + ' .' + CSS.piece, mousedownSparePiece)\n\n      // mouse enter / leave square\n      $board\n        .on('mouseenter', '.' + CSS.square, mouseenterSquare)\n        .on('mouseleave', '.' + CSS.square, mouseleaveSquare)\n\n      // piece drag\n      var $window = $(window)\n      $window\n        .on('mousemove', throttledMousemoveWindow)\n        .on('mouseup', mouseupWindow)\n\n      // touch drag pieces\n      if (isTouchDevice()) {\n        $board.on('touchstart', '.' + CSS.square, touchstartSquare)\n        $container.on('touchstart', '.' + CSS.sparePieces + ' .' + CSS.piece, touchstartSparePiece)\n        $window\n          .on('touchmove', throttledTouchmoveWindow)\n          .on('touchend', touchendWindow)\n      }\n    }\n\n    function initDOM () {\n      // create unique IDs for all the elements we will create\n      createElIds()\n\n      // build board and save it in memory\n      $container.html(buildContainerHTML(config.sparePieces))\n      $board = $container.find('.' + CSS.board)\n\n      if (config.sparePieces) {\n        $sparePiecesTop = $container.find('.' + CSS.sparePiecesTop)\n        $sparePiecesBottom = $container.find('.' + CSS.sparePiecesBottom)\n      }\n\n      // create the drag piece\n      var draggedPieceId = uuid()\n      $('body').append(buildPieceHTML('wP', true, draggedPieceId))\n      $draggedPiece = $('#' + draggedPieceId)\n\n      // TODO: need to remove this dragged piece element if the board is no\n      // longer in the DOM\n\n      // get the border size\n      boardBorderSize = parseInt($board.css('borderLeftWidth'), 10)\n\n      // set the size and draw the board\n      widget.resize()\n    }\n\n    // -------------------------------------------------------------------------\n    // Initialization\n    // -------------------------------------------------------------------------\n\n    setInitialState()\n    initDOM()\n    addEvents()\n\n    // return the widget object\n    return widget\n  } // end constructor\n\n  // TODO: do module exports here\n  window['Chessboard'] = constructor\n\n  // support legacy ChessBoard name\n  window['ChessBoard'] = window['Chessboard']\n\n  // expose util functions\n  window['Chessboard']['fenToObj'] = fenToObj\n  window['Chessboard']['objToFen'] = objToFen\n})() // end anonymous wrapper\n",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "chessboard.js v1.0.0",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    },
                    {
                        "code": "/*\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n/* minified license below  */\n\n/* @license\n * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)\n * Released under the BSD license\n * https://github.com/jhlywa/chess.js/blob/master/LICENSE\n */\n\nvar Chess = function(fen) {\n\n  /* jshint indent: false */\n\n  var BLACK = 'b';\n  var WHITE = 'w';\n\n  var EMPTY = -1;\n\n  var PAWN = 'p';\n  var KNIGHT = 'n';\n  var BISHOP = 'b';\n  var ROOK = 'r';\n  var QUEEN = 'q';\n  var KING = 'k';\n\n  var SYMBOLS = 'pnbrqkPNBRQK';\n\n  var DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n\n  var POSSIBLE_RESULTS = ['1-0', '0-1', '1/2-1/2', '*'];\n\n  var PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15]\n  };\n\n  var PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14,  18, 33, 31,  14],\n    b: [-17, -15,  17,  15],\n    r: [-16,   1,  16,  -1],\n    q: [-17, -16, -15,   1,  17, 16, 15,  -1],\n    k: [-17, -16, -15,   1,  17, 16, 15,  -1]\n  };\n\n  var ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20\n  ];\n\n  var RAYS = [\n     17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,\n      0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,\n      0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,\n      0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,\n      0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,\n      1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,\n      0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,\n      0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,\n      0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,\n      0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,\n    -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17\n  ];\n\n  var SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 };\n\n  var FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q'\n  };\n\n  var BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64\n  };\n\n  var RANK_1 = 7;\n  var RANK_2 = 6;\n  var RANK_3 = 5;\n  var RANK_4 = 4;\n  var RANK_5 = 3;\n  var RANK_6 = 2;\n  var RANK_7 = 1;\n  var RANK_8 = 0;\n\n  var SQUARES = {\n    a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,\n    a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,\n    a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,\n    a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,\n    a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,\n    a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,\n    a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n  };\n\n  var ROOKS = {\n    w: [{square: SQUARES.a1, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h1, flag: BITS.KSIDE_CASTLE}],\n    b: [{square: SQUARES.a8, flag: BITS.QSIDE_CASTLE},\n        {square: SQUARES.h8, flag: BITS.KSIDE_CASTLE}]\n  };\n\n  var board = new Array(128);\n  var kings = {w: EMPTY, b: EMPTY};\n  var turn = WHITE;\n  var castling = {w: 0, b: 0};\n  var ep_square = EMPTY;\n  var half_moves = 0;\n  var move_number = 1;\n  var history = [];\n  var header = {};\n\n  /* if the user passes in a fen string, load it, else default to\n   * starting position\n   */\n  if (typeof fen === 'undefined') {\n    load(DEFAULT_POSITION);\n  } else {\n    load(fen);\n  }\n\n  function clear() {\n    board = new Array(128);\n    kings = {w: EMPTY, b: EMPTY};\n    turn = WHITE;\n    castling = {w: 0, b: 0};\n    ep_square = EMPTY;\n    half_moves = 0;\n    move_number = 1;\n    history = [];\n    header = {};\n    update_setup(generate_fen());\n  }\n\n  function reset() {\n    load(DEFAULT_POSITION);\n  }\n\n  function load(fen) {\n    var tokens = fen.split(/\\s+/);\n    var position = tokens[0];\n    var square = 0;\n\n    if (!validate_fen(fen).valid) {\n      return false;\n    }\n\n    clear();\n\n    for (var i = 0; i < position.length; i++) {\n      var piece = position.charAt(i);\n\n      if (piece === '/') {\n        square += 8;\n      } else if (is_digit(piece)) {\n        square += parseInt(piece, 10);\n      } else {\n        var color = (piece < 'a') ? WHITE : BLACK;\n        put({type: piece.toLowerCase(), color: color}, algebraic(square));\n        square++;\n      }\n    }\n\n    turn = tokens[1];\n\n    if (tokens[2].indexOf('K') > -1) {\n      castling.w |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      castling.w |= BITS.QSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      castling.b |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      castling.b |= BITS.QSIDE_CASTLE;\n    }\n\n    ep_square = (tokens[3] === '-') ? EMPTY : SQUARES[tokens[3]];\n    half_moves = parseInt(tokens[4], 10);\n    move_number = parseInt(tokens[5], 10);\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  /* TODO: this function is pretty much crap - it validates structure but\n   * completely ignores content (e.g. doesn't verify that each side has a king)\n   * ... we should rewrite this, and ditch the silly error_number field while\n   * we're at it\n   */\n  function validate_fen(fen) {\n    var errors = {\n       0: 'No errors.',\n       1: 'FEN string must contain six space-delimited fields.',\n       2: '6th field (move number) must be a positive integer.',\n       3: '5th field (half move counter) must be a non-negative integer.',\n       4: '4th field (en-passant square) is invalid.',\n       5: '3rd field (castling availability) is invalid.',\n       6: '2nd field (side to move) is invalid.',\n       7: '1st field (piece positions) does not contain 8 \\'/\\'-delimited rows.',\n       8: '1st field (piece positions) is invalid [consecutive numbers].',\n       9: '1st field (piece positions) is invalid [invalid piece].',\n      10: '1st field (piece positions) is invalid [row too large].',\n      11: 'Illegal en-passant square',\n    };\n\n    /* 1st criterion: 6 space-seperated fields? */\n    var tokens = fen.split(/\\s+/);\n    if (tokens.length !== 6) {\n      return {valid: false, error_number: 1, error: errors[1]};\n    }\n\n    /* 2nd criterion: move number field is a integer value > 0? */\n    if (isNaN(tokens[5]) || (parseInt(tokens[5], 10) <= 0)) {\n      return {valid: false, error_number: 2, error: errors[2]};\n    }\n\n    /* 3rd criterion: half move counter is an integer >= 0? */\n    if (isNaN(tokens[4]) || (parseInt(tokens[4], 10) < 0)) {\n      return {valid: false, error_number: 3, error: errors[3]};\n    }\n\n    /* 4th criterion: 4th field is a valid e.p.-string? */\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n      return {valid: false, error_number: 4, error: errors[4]};\n    }\n\n    /* 5th criterion: 3th field is a valid castle-string? */\n    if( !/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {\n      return {valid: false, error_number: 5, error: errors[5]};\n    }\n\n    /* 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)? */\n    if (!/^(w|b)$/.test(tokens[1])) {\n      return {valid: false, error_number: 6, error: errors[6]};\n    }\n\n    /* 7th criterion: 1st field contains 8 rows? */\n    var rows = tokens[0].split('/');\n    if (rows.length !== 8) {\n      return {valid: false, error_number: 7, error: errors[7]};\n    }\n\n    /* 8th criterion: every row is valid? */\n    for (var i = 0; i < rows.length; i++) {\n      /* check for right sum of fields AND not two numbers in succession */\n      var sum_fields = 0;\n      var previous_was_number = false;\n\n      for (var k = 0; k < rows[i].length; k++) {\n        if (!isNaN(rows[i][k])) {\n          if (previous_was_number) {\n            return {valid: false, error_number: 8, error: errors[8]};\n          }\n          sum_fields += parseInt(rows[i][k], 10);\n          previous_was_number = true;\n        } else {\n          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n            return {valid: false, error_number: 9, error: errors[9]};\n          }\n          sum_fields += 1;\n          previous_was_number = false;\n        }\n      }\n      if (sum_fields !== 8) {\n        return {valid: false, error_number: 10, error: errors[10]};\n      }\n    }\n\n    if ((tokens[3][1] == '3' && tokens[1] == 'w') ||\n        (tokens[3][1] == '6' && tokens[1] == 'b')) {\n          return {valid: false, error_number: 11, error: errors[11]};\n    }\n\n    /* everything's okay! */\n    return {valid: true, error_number: 0, error: errors[0]};\n  }\n\n  function generate_fen() {\n    var empty = 0;\n    var fen = '';\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      if (board[i] == null) {\n        empty++;\n      } else {\n        if (empty > 0) {\n          fen += empty;\n          empty = 0;\n        }\n        var color = board[i].color;\n        var piece = board[i].type;\n\n        fen += (color === WHITE) ?\n                 piece.toUpperCase() : piece.toLowerCase();\n      }\n\n      if ((i + 1) & 0x88) {\n        if (empty > 0) {\n          fen += empty;\n        }\n\n        if (i !== SQUARES.h1) {\n          fen += '/';\n        }\n\n        empty = 0;\n        i += 8;\n      }\n    }\n\n    var cflags = '';\n    if (castling[WHITE] & BITS.KSIDE_CASTLE) { cflags += 'K'; }\n    if (castling[WHITE] & BITS.QSIDE_CASTLE) { cflags += 'Q'; }\n    if (castling[BLACK] & BITS.KSIDE_CASTLE) { cflags += 'k'; }\n    if (castling[BLACK] & BITS.QSIDE_CASTLE) { cflags += 'q'; }\n\n    /* do we have an empty castling flag? */\n    cflags = cflags || '-';\n    var epflags = (ep_square === EMPTY) ? '-' : algebraic(ep_square);\n\n    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ');\n  }\n\n  function set_header(args) {\n    for (var i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' &&\n          typeof args[i + 1] === 'string') {\n        header[args[i]] = args[i + 1];\n      }\n    }\n    return header;\n  }\n\n  /* called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object.  if the FEN is\n   * equal to the default position, the SetUp and FEN are deleted\n   * the setup is only updated if history.length is zero, ie moves haven't been\n   * made.\n   */\n  function update_setup(fen) {\n    if (history.length > 0) return;\n\n    if (fen !== DEFAULT_POSITION) {\n      header['SetUp'] = '1';\n      header['FEN'] = fen;\n    } else {\n      delete header['SetUp'];\n      delete header['FEN'];\n    }\n  }\n\n  function get(square) {\n    var piece = board[SQUARES[square]];\n    return (piece) ? {type: piece.type, color: piece.color} : null;\n  }\n\n  function put(piece, square) {\n    /* check for valid piece object */\n    if (!('type' in piece && 'color' in piece)) {\n      return false;\n    }\n\n    /* check for piece */\n    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {\n      return false;\n    }\n\n    /* check for valid square */\n    if (!(square in SQUARES)) {\n      return false;\n    }\n\n    var sq = SQUARES[square];\n\n    /* don't let the user place more than one king */\n    if (piece.type == KING &&\n        !(kings[piece.color] == EMPTY || kings[piece.color] == sq)) {\n      return false;\n    }\n\n    board[sq] = {type: piece.type, color: piece.color};\n    if (piece.type === KING) {\n      kings[piece.color] = sq;\n    }\n\n    update_setup(generate_fen());\n\n    return true;\n  }\n\n  function remove(square) {\n    var piece = get(square);\n    board[SQUARES[square]] = null;\n    if (piece && piece.type === KING) {\n      kings[piece.color] = EMPTY;\n    }\n\n    update_setup(generate_fen());\n\n    return piece;\n  }\n\n  function build_move(board, from, to, flags, promotion) {\n    var move = {\n      color: turn,\n      from: from,\n      to: to,\n      flags: flags,\n      piece: board[from].type\n    };\n\n    if (promotion) {\n      move.flags |= BITS.PROMOTION;\n      move.promotion = promotion;\n    }\n\n    if (board[to]) {\n      move.captured = board[to].type;\n    } else if (flags & BITS.EP_CAPTURE) {\n        move.captured = PAWN;\n    }\n    return move;\n  }\n\n  function generate_moves(options) {\n    function add_move(board, moves, from, to, flags) {\n      /* if pawn promotion */\n      if (board[from].type === PAWN &&\n         (rank(to) === RANK_8 || rank(to) === RANK_1)) {\n          var pieces = [QUEEN, ROOK, BISHOP, KNIGHT];\n          for (var i = 0, len = pieces.length; i < len; i++) {\n            moves.push(build_move(board, from, to, flags, pieces[i]));\n          }\n      } else {\n       moves.push(build_move(board, from, to, flags));\n      }\n    }\n\n    var moves = [];\n    var us = turn;\n    var them = swap_color(us);\n    var second_rank = {b: RANK_7, w: RANK_2};\n\n    var first_sq = SQUARES.a8;\n    var last_sq = SQUARES.h1;\n    var single_square = false;\n\n    /* do we want legal moves? */\n    var legal = (typeof options !== 'undefined' && 'legal' in options) ?\n                options.legal : true;\n\n    /* are we generating moves for a single square? */\n    if (typeof options !== 'undefined' && 'square' in options) {\n      if (options.square in SQUARES) {\n        first_sq = last_sq = SQUARES[options.square];\n        single_square = true;\n      } else {\n        /* invalid square */\n        return [];\n      }\n    }\n\n    for (var i = first_sq; i <= last_sq; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece == null || piece.color !== us) {\n        continue;\n      }\n\n      if (piece.type === PAWN) {\n        /* single square, non-capturing */\n        var square = i + PAWN_OFFSETS[us][0];\n        if (board[square] == null) {\n            add_move(board, moves, i, square, BITS.NORMAL);\n\n          /* double square */\n          var square = i + PAWN_OFFSETS[us][1];\n          if (second_rank[us] === rank(i) && board[square] == null) {\n            add_move(board, moves, i, square, BITS.BIG_PAWN);\n          }\n        }\n\n        /* pawn captures */\n        for (j = 2; j < 4; j++) {\n          var square = i + PAWN_OFFSETS[us][j];\n          if (square & 0x88) continue;\n\n          if (board[square] != null &&\n              board[square].color === them) {\n              add_move(board, moves, i, square, BITS.CAPTURE);\n          } else if (square === ep_square) {\n              add_move(board, moves, i, ep_square, BITS.EP_CAPTURE);\n          }\n        }\n      } else {\n        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {\n          var offset = PIECE_OFFSETS[piece.type][j];\n          var square = i;\n\n          while (true) {\n            square += offset;\n            if (square & 0x88) break;\n\n            if (board[square] == null) {\n              add_move(board, moves, i, square, BITS.NORMAL);\n            } else {\n              if (board[square].color === us) break;\n              add_move(board, moves, i, square, BITS.CAPTURE);\n              break;\n            }\n\n            /* break, if knight or king */\n            if (piece.type === 'n' || piece.type === 'k') break;\n          }\n        }\n      }\n    }\n\n    /* check for castling if: a) we're generating all moves, or b) we're doing\n     * single square move generation on the king's square\n     */\n    if ((!single_square) || last_sq === kings[us]) {\n      /* king-side castling */\n      if (castling[us] & BITS.KSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from + 2;\n\n        if (board[castling_from + 1] == null &&\n            board[castling_to]       == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from + 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us] , castling_to,\n                   BITS.KSIDE_CASTLE);\n        }\n      }\n\n      /* queen-side castling */\n      if (castling[us] & BITS.QSIDE_CASTLE) {\n        var castling_from = kings[us];\n        var castling_to = castling_from - 2;\n\n        if (board[castling_from - 1] == null &&\n            board[castling_from - 2] == null &&\n            board[castling_from - 3] == null &&\n            !attacked(them, kings[us]) &&\n            !attacked(them, castling_from - 1) &&\n            !attacked(them, castling_to)) {\n          add_move(board, moves, kings[us], castling_to,\n                   BITS.QSIDE_CASTLE);\n        }\n      }\n    }\n\n    /* return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal) {\n      return moves;\n    }\n\n    /* filter out illegal moves */\n    var legal_moves = [];\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(us)) {\n        legal_moves.push(moves[i]);\n      }\n      undo_move();\n    }\n\n    return legal_moves;\n  }\n\n  /* convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} sloppy Use the sloppy SAN generator to work around over\n   * disambiguation bugs in Fritz and Chessbase.  See below:\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  function move_to_san(move, sloppy) {\n\n    var output = '';\n\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O';\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O';\n    } else {\n      var disambiguator = get_disambiguator(move, sloppy);\n\n      if (move.piece !== PAWN) {\n        output += move.piece.toUpperCase() + disambiguator;\n      }\n\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0];\n        }\n        output += 'x';\n      }\n\n      output += algebraic(move.to);\n\n      if (move.flags & BITS.PROMOTION) {\n        output += '=' + move.promotion.toUpperCase();\n      }\n    }\n\n    make_move(move);\n    if (in_check()) {\n      if (in_checkmate()) {\n        output += '#';\n      } else {\n        output += '+';\n      }\n    }\n    undo_move();\n\n    return output;\n  }\n\n  // parses all of the decorators out of a SAN string\n  function stripped_san(move) {\n    return move.replace(/=/,'').replace(/[+#]?[?!]*$/,'');\n  }\n\n  function attacked(color, square) {\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) { i += 7; continue; }\n\n      /* if empty square or wrong color */\n      if (board[i] == null || board[i].color !== color) continue;\n\n      var piece = board[i];\n      var difference = i - square;\n      var index = difference + 119;\n\n      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {\n        if (piece.type === PAWN) {\n          if (difference > 0) {\n            if (piece.color === WHITE) return true;\n          } else {\n            if (piece.color === BLACK) return true;\n          }\n          continue;\n        }\n\n        /* if the piece is a knight or a king */\n        if (piece.type === 'n' || piece.type === 'k') return true;\n\n        var offset = RAYS[index];\n        var j = i + offset;\n\n        var blocked = false;\n        while (j !== square) {\n          if (board[j] != null) { blocked = true; break; }\n          j += offset;\n        }\n\n        if (!blocked) return true;\n      }\n    }\n\n    return false;\n  }\n\n  function king_attacked(color) {\n    return attacked(swap_color(color), kings[color]);\n  }\n\n  function in_check() {\n    return king_attacked(turn);\n  }\n\n  function in_checkmate() {\n    return in_check() && generate_moves().length === 0;\n  }\n\n  function in_stalemate() {\n    return !in_check() && generate_moves().length === 0;\n  }\n\n  function insufficient_material() {\n    var pieces = {};\n    var bishops = [];\n    var num_pieces = 0;\n    var sq_color = 0;\n\n    for (var i = SQUARES.a8; i<= SQUARES.h1; i++) {\n      sq_color = (sq_color + 1) % 2;\n      if (i & 0x88) { i += 7; continue; }\n\n      var piece = board[i];\n      if (piece) {\n        pieces[piece.type] = (piece.type in pieces) ?\n                              pieces[piece.type] + 1 : 1;\n        if (piece.type === BISHOP) {\n          bishops.push(sq_color);\n        }\n        num_pieces++;\n      }\n    }\n\n    /* k vs. k */\n    if (num_pieces === 2) { return true; }\n\n    /* k vs. kn .... or .... k vs. kb */\n    else if (num_pieces === 3 && (pieces[BISHOP] === 1 ||\n                                 pieces[KNIGHT] === 1)) { return true; }\n\n    /* kb vs. kb where any number of bishops are all on the same color */\n    else if (num_pieces === pieces[BISHOP] + 2) {\n      var sum = 0;\n      var len = bishops.length;\n      for (var i = 0; i < len; i++) {\n        sum += bishops[i];\n      }\n      if (sum === 0 || sum === len) { return true; }\n    }\n\n    return false;\n  }\n\n  function in_threefold_repetition() {\n    /* TODO: while this function is fine for casual use, a better\n     * implementation would use a Zobrist key (instead of FEN). the\n     * Zobrist key would be maintained in the make_move/undo_move functions,\n     * avoiding the costly that we do below.\n     */\n    var moves = [];\n    var positions = {};\n    var repetition = false;\n\n    while (true) {\n      var move = undo_move();\n      if (!move) break;\n      moves.push(move);\n    }\n\n    while (true) {\n      /* remove the last two fields in the FEN string, they're not needed\n       * when checking for draw by rep */\n      var fen = generate_fen().split(' ').slice(0,4).join(' ');\n\n      /* has the position occurred three or move times */\n      positions[fen] = (fen in positions) ? positions[fen] + 1 : 1;\n      if (positions[fen] >= 3) {\n        repetition = true;\n      }\n\n      if (!moves.length) {\n        break;\n      }\n      make_move(moves.pop());\n    }\n\n    return repetition;\n  }\n\n  function push(move) {\n    history.push({\n      move: move,\n      kings: {b: kings.b, w: kings.w},\n      turn: turn,\n      castling: {b: castling.b, w: castling.w},\n      ep_square: ep_square,\n      half_moves: half_moves,\n      move_number: move_number\n    });\n  }\n\n  function make_move(move) {\n    var us = turn;\n    var them = swap_color(us);\n    push(move);\n\n    board[move.to] = board[move.from];\n    board[move.from] = null;\n\n    /* if ep capture, remove the captured pawn */\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (turn === BLACK) {\n        board[move.to - 16] = null;\n      } else {\n        board[move.to + 16] = null;\n      }\n    }\n\n    /* if pawn promotion, replace with new piece */\n    if (move.flags & BITS.PROMOTION) {\n      board[move.to] = {type: move.promotion, color: us};\n    }\n\n    /* if we moved the king */\n    if (board[move.to].type === KING) {\n      kings[board[move.to].color] = move.to;\n\n      /* if we castled, move the rook next to the king */\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        var castling_to = move.to - 1;\n        var castling_from = move.to + 1;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        var castling_to = move.to + 1;\n        var castling_from = move.to - 2;\n        board[castling_to] = board[castling_from];\n        board[castling_from] = null;\n      }\n\n      /* turn off castling */\n      castling[us] = '';\n    }\n\n    /* turn off castling if we move a rook */\n    if (castling[us]) {\n      for (var i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (move.from === ROOKS[us][i].square &&\n            castling[us] & ROOKS[us][i].flag) {\n          castling[us] ^= ROOKS[us][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* turn off castling if we capture a rook */\n    if (castling[them]) {\n      for (var i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (move.to === ROOKS[them][i].square &&\n            castling[them] & ROOKS[them][i].flag) {\n          castling[them] ^= ROOKS[them][i].flag;\n          break;\n        }\n      }\n    }\n\n    /* if big pawn move, update the en passant square */\n    if (move.flags & BITS.BIG_PAWN) {\n      if (turn === 'b') {\n        ep_square = move.to - 16;\n      } else {\n        ep_square = move.to + 16;\n      }\n    } else {\n      ep_square = EMPTY;\n    }\n\n    /* reset the 50 move counter if a pawn is moved or a piece is captured */\n    if (move.piece === PAWN) {\n      half_moves = 0;\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      half_moves = 0;\n    } else {\n      half_moves++;\n    }\n\n    if (turn === BLACK) {\n      move_number++;\n    }\n    turn = swap_color(turn);\n  }\n\n  function undo_move() {\n    var old = history.pop();\n    if (old == null) { return null; }\n\n    var move = old.move;\n    kings = old.kings;\n    turn = old.turn;\n    castling = old.castling;\n    ep_square = old.ep_square;\n    half_moves = old.half_moves;\n    move_number = old.move_number;\n\n    var us = turn;\n    var them = swap_color(turn);\n\n    board[move.from] = board[move.to];\n    board[move.from].type = move.piece;  // to undo any promotions\n    board[move.to] = null;\n\n    if (move.flags & BITS.CAPTURE) {\n      board[move.to] = {type: move.captured, color: them};\n    } else if (move.flags & BITS.EP_CAPTURE) {\n      var index;\n      if (us === BLACK) {\n        index = move.to - 16;\n      } else {\n        index = move.to + 16;\n      }\n      board[index] = {type: PAWN, color: them};\n    }\n\n\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      var castling_to, castling_from;\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castling_to = move.to + 1;\n        castling_from = move.to - 1;\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        castling_to = move.to - 2;\n        castling_from = move.to + 1;\n      }\n\n      board[castling_to] = board[castling_from];\n      board[castling_from] = null;\n    }\n\n    return move;\n  }\n\n  /* this function is used to uniquely identify ambiguous moves */\n  function get_disambiguator(move, sloppy) {\n    var moves = generate_moves({legal: !sloppy});\n\n    var from = move.from;\n    var to = move.to;\n    var piece = move.piece;\n\n    var ambiguities = 0;\n    var same_rank = 0;\n    var same_file = 0;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      var ambig_from = moves[i].from;\n      var ambig_to = moves[i].to;\n      var ambig_piece = moves[i].piece;\n\n      /* if a move of the same piece type ends on the same to square, we'll\n       * need to add a disambiguator to the algebraic notation\n       */\n      if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {\n        ambiguities++;\n\n        if (rank(from) === rank(ambig_from)) {\n          same_rank++;\n        }\n\n        if (file(from) === file(ambig_from)) {\n          same_file++;\n        }\n      }\n    }\n\n    if (ambiguities > 0) {\n      /* if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      if (same_rank > 0 && same_file > 0) {\n        return algebraic(from);\n      }\n      /* if the moving piece rests on the same file, use the rank symbol as the\n       * disambiguator\n       */\n      else if (same_file > 0) {\n        return algebraic(from).charAt(1);\n      }\n      /* else use the file symbol */\n      else {\n        return algebraic(from).charAt(0);\n      }\n    }\n\n    return '';\n  }\n\n  function ascii() {\n    var s = '   +------------------------+\\n';\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* display the rank */\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |';\n      }\n\n      /* empty piece */\n      if (board[i] == null) {\n        s += ' . ';\n      } else {\n        var piece = board[i].type;\n        var color = board[i].color;\n        var symbol = (color === WHITE) ?\n                     piece.toUpperCase() : piece.toLowerCase();\n        s += ' ' + symbol + ' ';\n      }\n\n      if ((i + 1) & 0x88) {\n        s += '|\\n';\n        i += 8;\n      }\n    }\n    s += '   +------------------------+\\n';\n    s += '     a  b  c  d  e  f  g  h\\n';\n\n    return s;\n  }\n\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  function move_from_san(move, sloppy) {\n    // strip off any move decorations: e.g Nf3+?!\n    var clean_move = stripped_san(move);\n\n    // if we're using the sloppy parser run a regex to grab piece, to, and from\n    // this should parse invalid SAN like: Pe2-e4, Rc1c4, Qf3xf7\n    if (sloppy) {\n      var matches = clean_move.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);\n      if (matches) {\n        var piece = matches[1];\n        var from = matches[2];\n        var to = matches[3];\n        var promotion = matches[4];\n      }\n    }\n\n    var moves = generate_moves();\n    for (var i = 0, len = moves.length; i < len; i++) {\n      // try the strict parser first, then the sloppy parser if requested\n      // by the user\n      if ((clean_move === stripped_san(move_to_san(moves[i]))) ||\n          (sloppy && clean_move === stripped_san(move_to_san(moves[i], true)))) {\n        return moves[i];\n      } else {\n        if (matches &&\n            (!piece || piece.toLowerCase() == moves[i].piece) &&\n            SQUARES[from] == moves[i].from &&\n            SQUARES[to] == moves[i].to &&\n            (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n          return moves[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n\n  /*****************************************************************************\n   * UTILITY FUNCTIONS\n   ****************************************************************************/\n  function rank(i) {\n    return i >> 4;\n  }\n\n  function file(i) {\n    return i & 15;\n  }\n\n  function algebraic(i){\n    var f = file(i), r = rank(i);\n    return 'abcdefgh'.substring(f,f+1) + '87654321'.substring(r,r+1);\n  }\n\n  function swap_color(c) {\n    return c === WHITE ? BLACK : WHITE;\n  }\n\n  function is_digit(c) {\n    return '0123456789'.indexOf(c) !== -1;\n  }\n\n  /* pretty = external move object */\n  function make_pretty(ugly_move) {\n    var move = clone(ugly_move);\n    move.san = move_to_san(move, false);\n    move.to = algebraic(move.to);\n    move.from = algebraic(move.from);\n\n    var flags = '';\n\n    for (var flag in BITS) {\n      if (BITS[flag] & move.flags) {\n        flags += FLAGS[flag];\n      }\n    }\n    move.flags = flags;\n\n    return move;\n  }\n\n  function clone(obj) {\n    var dupe = (obj instanceof Array) ? [] : {};\n\n    for (var property in obj) {\n      if (typeof property === 'object') {\n        dupe[property] = clone(obj[property]);\n      } else {\n        dupe[property] = obj[property];\n      }\n    }\n\n    return dupe;\n  }\n\n  function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  /*****************************************************************************\n   * DEBUGGING UTILITIES\n   ****************************************************************************/\n  function perft(depth) {\n    var moves = generate_moves({legal: false});\n    var nodes = 0;\n    var color = turn;\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i]);\n      if (!king_attacked(color)) {\n        if (depth - 1 > 0) {\n          var child_nodes = perft(depth - 1);\n          nodes += child_nodes;\n        } else {\n          nodes++;\n        }\n      }\n      undo_move();\n    }\n\n    return nodes;\n  }\n\n  return {\n    /***************************************************************************\n     * PUBLIC CONSTANTS (is there a better way to do this?)\n     **************************************************************************/\n    WHITE: WHITE,\n    BLACK: BLACK,\n    PAWN: PAWN,\n    KNIGHT: KNIGHT,\n    BISHOP: BISHOP,\n    ROOK: ROOK,\n    QUEEN: QUEEN,\n    KING: KING,\n    SQUARES: (function() {\n                /* from the ECMA-262 spec (section 12.6.4):\n                 * \"The mechanics of enumerating the properties ... is\n                 * implementation dependent\"\n                 * so: for (var sq in SQUARES) { keys.push(sq); } might not be\n                 * ordered correctly\n                 */\n                var keys = [];\n                for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n                  if (i & 0x88) { i += 7; continue; }\n                  keys.push(algebraic(i));\n                }\n                return keys;\n              })(),\n    FLAGS: FLAGS,\n\n    /***************************************************************************\n     * PUBLIC API\n     **************************************************************************/\n    load: function(fen) {\n      return load(fen);\n    },\n\n    reset: function() {\n      return reset();\n    },\n\n    moves: function(options) {\n      /* The internal representation of a chess move is in 0x88 format, and\n       * not meant to be human-readable.  The code below converts the 0x88\n       * square coordinates to algebraic coordinates.  It also prunes an\n       * unnecessary move keys resulting from a verbose call.\n       */\n\n      var ugly_moves = generate_moves(options);\n      var moves = [];\n\n      for (var i = 0, len = ugly_moves.length; i < len; i++) {\n\n        /* does the user want a full move object (most likely not), or just\n         * SAN\n         */\n        if (typeof options !== 'undefined' && 'verbose' in options &&\n            options.verbose) {\n          moves.push(make_pretty(ugly_moves[i]));\n        } else {\n          moves.push(move_to_san(ugly_moves[i], false));\n        }\n      }\n\n      return moves;\n    },\n\n    in_check: function() {\n      return in_check();\n    },\n\n    in_checkmate: function() {\n      return in_checkmate();\n    },\n\n    in_stalemate: function() {\n      return in_stalemate();\n    },\n\n    in_draw: function() {\n      return half_moves >= 100 ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    insufficient_material: function() {\n      return insufficient_material();\n    },\n\n    in_threefold_repetition: function() {\n      return in_threefold_repetition();\n    },\n\n    game_over: function() {\n      return half_moves >= 100 ||\n             in_checkmate() ||\n             in_stalemate() ||\n             insufficient_material() ||\n             in_threefold_repetition();\n    },\n\n    validate_fen: function(fen) {\n      return validate_fen(fen);\n    },\n\n    fen: function() {\n      return generate_fen();\n    },\n\n    pgn: function(options) {\n      /* using the specification from http://www.chessclub.com/help/PGN-spec\n       * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n       */\n      var newline = (typeof options === 'object' &&\n                     typeof options.newline_char === 'string') ?\n                     options.newline_char : '\\n';\n      var max_width = (typeof options === 'object' &&\n                       typeof options.max_width === 'number') ?\n                       options.max_width : 0;\n      var result = [];\n      var header_exists = false;\n\n      /* add the PGN header headerrmation */\n      for (var i in header) {\n        /* TODO: order of enumerated properties in header object is not\n         * guaranteed, see ECMA-262 spec (section 12.6.4)\n         */\n        result.push('[' + i + ' \\\"' + header[i] + '\\\"]' + newline);\n        header_exists = true;\n      }\n\n      if (header_exists && history.length) {\n        result.push(newline);\n      }\n\n      /* pop all of history onto reversed_history */\n      var reversed_history = [];\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      var moves = [];\n      var move_string = '';\n\n      /* build the list of moves.  a move_string looks like: \"3. e3 e6\" */\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n\n        /* if the position started with black to move, start PGN with 1. ... */\n        if (!history.length && move.color === 'b') {\n          move_string = move_number + '. ...';\n        } else if (move.color === 'w') {\n          /* store the previous generated move_string if we have one */\n          if (move_string.length) {\n            moves.push(move_string);\n          }\n          move_string = move_number + '.';\n        }\n\n        move_string = move_string + ' ' + move_to_san(move, false);\n        make_move(move);\n      }\n\n      /* are there any other leftover moves? */\n      if (move_string.length) {\n        moves.push(move_string);\n      }\n\n      /* is there a result? */\n      if (typeof header.Result !== 'undefined') {\n        moves.push(header.Result);\n      }\n\n      /* history should be back to what is was before we started generating PGN,\n       * so join together moves\n       */\n      if (max_width === 0) {\n        return result.join('') + moves.join(' ');\n      }\n\n      /* wrap the PGN output at max_width */\n      var current_width = 0;\n      for (var i = 0; i < moves.length; i++) {\n        /* if the current move will push past max_width */\n        if (current_width + moves[i].length > max_width && i !== 0) {\n\n          /* don't end the line with whitespace */\n          if (result[result.length - 1] === ' ') {\n            result.pop();\n          }\n\n          result.push(newline);\n          current_width = 0;\n        } else if (i !== 0) {\n          result.push(' ');\n          current_width++;\n        }\n        result.push(moves[i]);\n        current_width += moves[i].length;\n      }\n\n      return result.join('');\n    },\n\n    load_pgn: function(pgn, options) {\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      function mask(str) {\n        return str.replace(/\\\\/g, '\\\\');\n      }\n\n      function has_keys(object) {\n        for (var key in object) {\n          return true;\n        }\n        return false;\n      }\n\n      function parse_pgn_header(header, options) {\n        var newline_char = (typeof options === 'object' &&\n                            typeof options.newline_char === 'string') ?\n                            options.newline_char : '\\r?\\n';\n        var header_obj = {};\n        var headers = header.split(new RegExp(mask(newline_char)));\n        var key = '';\n        var value = '';\n\n        for (var i = 0; i < headers.length; i++) {\n          key = headers[i].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/, '$1');\n          value = headers[i].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\]$/, '$1');\n          if (trim(key).length > 0) {\n            header_obj[key] = value;\n          }\n        }\n\n        return header_obj;\n      }\n\n      var newline_char = (typeof options === 'object' &&\n                          typeof options.newline_char === 'string') ?\n                          options.newline_char : '\\r?\\n';\n      var regex = new RegExp('^(\\\\[(.|' + mask(newline_char) + ')*\\\\])' +\n                             '(' + mask(newline_char) + ')*' +\n                             '1.(' + mask(newline_char) + '|.)*$', 'g');\n\n      /* get header part of the PGN file */\n      var header_string = pgn.replace(regex, '$1');\n\n      /* no info part given, begins with moves */\n      if (header_string[0] !== '[') {\n        header_string = '';\n      }\n\n      reset();\n\n      /* parse PGN header */\n      var headers = parse_pgn_header(header_string, options);\n      for (var key in headers) {\n        set_header([key, headers[key]]);\n      }\n\n      /* load the starting position indicated by [Setup '1'] and\n      * [FEN position] */\n      if (headers['SetUp'] === '1') {\n          if (!(('FEN' in headers) && load(headers['FEN']))) {\n            return false;\n          }\n      }\n\n      /* delete header to get the moves */\n      var ms = pgn.replace(header_string, '').replace(new RegExp(mask(newline_char), 'g'), ' ');\n\n      /* delete comments */\n      ms = ms.replace(/(\\{[^}]+\\})+?/g, '');\n\n      /* delete recursive annotation variations */\n      var rav_regex = /(\\([^\\(\\)]+\\))+?/g\n      while (rav_regex.test(ms)) {\n        ms = ms.replace(rav_regex, '');\n      }\n\n      /* delete move numbers */\n      ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '');\n\n      /* delete ... indicating black to move */\n      ms = ms.replace(/\\.\\.\\./g, '');\n\n      /* delete numeric annotation glyphs */\n      ms = ms.replace(/\\$\\d+/g, '');\n\n      /* trim and get array of moves */\n      var moves = trim(ms).split(new RegExp(/\\s+/));\n\n      /* delete empty entries */\n      moves = moves.join(',').replace(/,,+/g, ',').split(',');\n      var move = '';\n\n      for (var half_move = 0; half_move < moves.length - 1; half_move++) {\n        move = move_from_san(moves[half_move], sloppy);\n\n        /* move not possible! (don't clear the board to examine to show the\n         * latest valid position)\n         */\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n\n      /* examine last move */\n      move = moves[moves.length - 1];\n      if (POSSIBLE_RESULTS.indexOf(move) > -1) {\n        if (has_keys(header) && typeof header.Result === 'undefined') {\n          set_header(['Result', move]);\n        }\n      }\n      else {\n        move = move_from_san(move, sloppy);\n        if (move == null) {\n          return false;\n        } else {\n          make_move(move);\n        }\n      }\n      return true;\n    },\n\n    header: function() {\n      return set_header(arguments);\n    },\n\n    ascii: function() {\n      return ascii();\n    },\n\n    turn: function() {\n      return turn;\n    },\n\n    move: function(move, options) {\n      /* The move function can be called with in the following parameters:\n       *\n       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string\n       *\n       * .move({ from: 'h7', <- where the 'move' is a move object (additional\n       *         to :'h8',      fields are ignored)\n       *         promotion: 'q',\n       *      })\n       */\n\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy = (typeof options !== 'undefined' && 'sloppy' in options) ?\n                    options.sloppy : false;\n\n      var move_obj = null;\n\n      if (typeof move === 'string') {\n        move_obj = move_from_san(move, sloppy);\n      } else if (typeof move === 'object') {\n        var moves = generate_moves();\n\n        /* convert the pretty move object to an ugly move object */\n        for (var i = 0, len = moves.length; i < len; i++) {\n          if (move.from === algebraic(moves[i].from) &&\n              move.to === algebraic(moves[i].to) &&\n              (!('promotion' in moves[i]) ||\n              move.promotion === moves[i].promotion)) {\n            move_obj = moves[i];\n            break;\n          }\n        }\n      }\n\n      /* failed to find move */\n      if (!move_obj) {\n        return null;\n      }\n\n      /* need to make a copy of move because we can't generate SAN after the\n       * move is made\n       */\n      var pretty_move = make_pretty(move_obj);\n\n      make_move(move_obj);\n\n      return pretty_move;\n    },\n\n    undo: function() {\n      var move = undo_move();\n      return (move) ? make_pretty(move) : null;\n    },\n\n    clear: function() {\n      return clear();\n    },\n\n    put: function(piece, square) {\n      return put(piece, square);\n    },\n\n    get: function(square) {\n      return get(square);\n    },\n\n    remove: function(square) {\n      return remove(square);\n    },\n\n    perft: function(depth) {\n      return perft(depth);\n    },\n\n    square_color: function(square) {\n      if (square in SQUARES) {\n        var sq_0x88 = SQUARES[square];\n        return ((rank(sq_0x88) + file(sq_0x88)) % 2 === 0) ? 'light' : 'dark';\n      }\n\n      return null;\n    },\n\n    history: function(options) {\n      var reversed_history = [];\n      var move_history = [];\n      var verbose = (typeof options !== 'undefined' && 'verbose' in options &&\n                     options.verbose);\n\n      while (history.length > 0) {\n        reversed_history.push(undo_move());\n      }\n\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop();\n        if (verbose) {\n          move_history.push(make_pretty(move));\n        } else {\n          move_history.push(move_to_san(move));\n        }\n        make_move(move);\n      }\n\n      return move_history;\n    }\n\n  };\n};\n\n/* export Chess object if using node or any other CommonJS compatible\n * environment */\nif (typeof exports !== 'undefined') exports.Chess = Chess;\n/* export Chess object for any RequireJS compatible environment */\nif (typeof define !== 'undefined') define( function () { return Chess;  });",
                        "conditions": [],
                        "description": "",
                        "enabled": true,
                        "label": "",
                        "name": "Chess",
                        "position": "external",
                        "type": "js",
                        "version": "v0.1"
                    }
                ]
            },
            "assetManagerHtml": {
                "enabled": false,
                "fragments": [
                    {
                        "code": "{{Front}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the front side",
                        "enabled": true,
                        "label": "Front",
                        "name": "FrontSide",
                        "version": "v1"
                    },
                    {
                        "code": "{{FrontSide}}\n\n<hr id=\"answer\">\n\n{{Back}}\n\n{{%scripts}}",
                        "conditions": [],
                        "description": "This is the entrance for the back side",
                        "enabled": true,
                        "label": "Back",
                        "name": "BackSide",
                        "version": "v1"
                    }
                ],
                "minify": false
            },
            "crowdanki_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "css": "body {\n  margin:0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: -webkit-box;\n\t-webkit-box-align: stretch;\n\t-webkit-box-pack: center;\n\t-webkit-box-orient: vertical;\n\tfont-size:22px;\n    text-align: center; /* ALIGN TEXT */\n}\n.card{text-align:center;\nfont-size:20px;\n}\n\n\n#board{\n\nmargin-left:auto;\nmargin-right:auto;\n\n}\niframe{\ndisplay:block;\n\nmargin-left:auto;margin-right:auto;\nheight:100vh;\nwidth:100vw;\nborder:0;\n}\n\n\n\n\n.mobile iframe{\n\nheight:96vh;\nwidth:96vw;\n}\n\n\n\n",
            "flds": [
                {
                    "font": "MS Shell Dlg 2",
                    "media": [],
                    "meta": null,
                    "name": "PGN",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "meta": null,
                    "name": "FEN",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "Title",
                    "ord": 2,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Liberation Sans",
                    "meta": null,
                    "name": "Comments",
                    "ord": 3,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "meta": null,
                    "name": "playAllMoves",
                    "ord": 4,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Chess 2.0 Opponents Move",
            "req": [
                [
                    0,
                    "any",
                    [
                        0,
                        1,
                        2,
                        3
                    ]
                ]
            ],
            "sortf": 0,
            "tags": [],
            "tmpls": [
                {
                    "afmt": "<iframe id=\"analysisBoard\"></iframe>\n\n\n<script>\nvar PGN = encodeURIComponent(`{{text:PGN}}`);\nvar FEN = encodeURIComponent(`{{text:FEN}}`);\n\ndocument.getElementById(\"analysisBoard\").src =`_ChessTempoViewer.html?PGN=`+PGN+`&FEN=`+FEN+``;\n\n</script>\n",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "<iframe id=\"Board\"></iframe>\n\n\n\n<script>\nvar FEN = encodeURIComponent(`{{text:FEN}}`);\nvar Title = encodeURIComponent(`{{text:Title}}`);\nvar Comments = encodeURIComponent(`{{text:Comments}}`);\nvar PGN = `{{text:PGN}}`.replace(/\\[Puzzle_Length.*?\\]/, '').replace(/\\[Tactic_line.*?\\]/, ''); //compatability with chess.com puzzles\nvar PGN = encodeURIComponent(PGN);\n\n// determine whether to automatically respond or quiz you on the entire line, meaning you play both sides.\n\nvar playAllMoves = `false`;\n{{#playAllMoves}}\nplayAllMoves = `true`;\n{{/playAllMoves}}\n\ndocument.getElementById(\"Board\").src =`_board2.html?PGN=`+PGN+`&FEN=`+FEN+`&Comments=`+Comments+`&Title=`+Title+`&playAllMoves=`+playAllMoves+``;\n</script>\n"
                }
            ],
            "type": 0,
            "vers": []
        }
    ],
    "notes": [
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/8/3k4/8/8/4K3/8/Q6R w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qa6+ { +M3 } ( 1. Rh6+ { +M3 } 1... Kd7 { +M2 } ( 1... Ke7 { +M2 } 2. Qa7+ { +M2 } ( 2. Qg7+ { +M2 } 2... Ke8 { +M1 } ( 2... Kd8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) 2... Kf8 { +M1 } ( 2... Ke8 { +M1 } 3. Rh8# { +M1 } ) ( 2... Kd8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) ( 1... Kc5 { +M2 } 2. Qa4 { +M2 } 2... Kd5 { +M1 } 3. Qb5# { +M1 } ( 3. Qd4# { +M1 } ) ) ( 1... Kc7 { +M2 } 2. Qa7+ { +M2 } ( 2. Qg7+ { +M2 } 2... Kd8 { +M1 } ( 2... Kc8 { +M1 } 3. Rh8# { +M1 } ) ( 2... Kb8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) 2... Kd8 { +M1 } ( 2... Kc8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) 2. Qa7+ { +M2 } ( 2. Qg7+ { +M2 } 2... Ke8 { +M1 } ( 2... Kd8 { +M1 } 3. Rh8# { +M1 } ) ( 2... Kc8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) 2... Ke8 { +M1 } ( 2... Kd8 { +M1 } 3. Rh8# { +M1 } ) ( 2... Kc8 { +M1 } 3. Rh8# { +M1 } ) 3. Rh8# { +M1 } ) 1... Ke7 { +M2 } ( 1... Kc5 { +M2 } 2. Rh4 { +M2 } 2... Kd5 { +M1 } 3. Rh5# { +M1 } ) ( 1... Kc7 { +M2 } 2. Rh7+ { +M2 } 2... Kd8 { +M1 } ( 2... Kb8 { +M1 } 3. Qb7# { +M1 } ) 3. Qa8# { +M1 } ) ( 1... Kd7 { +M2 } 2. Rh7+ { +M2 } 2... Ke8 { +M1 } ( 2... Kd8 { +M1 } 3. Qa8# { +M1 } ) 3. Qa8# { +M1 } ( 3. Qc8# { +M1 } ) ) 2. Rh7+ { +M2 } 2... Kf8 { +M1 } ( 2... Ke8 { +M1 } 3. Qa8# { +M1 } ( 3. Qc8# { +M1 } ) ) ( 2... Kd8 { +M1 } 3. Qa8# { +M1 } ) 3. Qa8# { +M1 } ( 3. Qc8# { +M1 } ) *<br>",
                "",
                "<!--StartFragment-->Checkmate the opponent",
                "<!--StartFragment--><div><div><!--StartFragment-->&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<!--EndFragment--><br>Use your queen and rook to restrict the king and deliver checkmate.<br>&lt;br&gt;&lt;br&gt;<br>Mate in 3 if played perfectly.</div></div>",
                ""
            ],
            "guid": "gR<i3/pWqz",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/4K3/8/R6R w - - 0 1",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<br>Use your rooks to restrict the king and deliver checkmate.<div>&lt;br&gt;&lt;br&gt;</div>Mate in 4 if played perfectly.<!--EndFragment--><br>"
            ],
            "guid": "gJSWR/4^@n",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/2QBK3/8/8 w - - 0 1",
                "<!--StartFragment--><div><div>&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<br>Use your queen and bishop to restrict the king and deliver checkmate.<br>&lt;br&gt;&lt;br&gt;<br>Mate in 5 if played perfectly.</div></div>"
            ],
            "guid": "t6Szt{gq7`",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/2QNK3/8/8 w - - 0 1",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<br>Use your queen and knight to restrict the king and deliver checkmate.<div>&lt;br&gt;&lt;br&gt;</div>Mate in 5 if played perfectly.<!--EndFragment--><br>"
            ],
            "guid": "skL_WDLKW^",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/4K3/8/4Q3 w - - 0 1",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<br>Use your queen to restrict the king, force it to the edge of the board and deliver checkmate. The queen can't do it alone, so use your king to help.<br>&lt;br&gt;&lt;br&gt;<br>Mate in 6 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "J*^&w,/,4A",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/4K3/8/4R3 w - - 0 1",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent&lt;/h3&gt;<br>Use your rook to restrict the king, force it to the edge of the board and deliver checkmate. The rook can't do it alone, so use your king to help.<br>&lt;br&gt;&lt;br&gt;<br>Mate in 11 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "FgF+_koM<#",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6k1/4Rppp/8/8/8/8/5PPP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Re8# { +M1 } *<br>",
                "",
                "Back-Rank Mate #1",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>A Back-Rank Mate is a checkmate delivered by a rook or queen along the back rank in which the mated king is unable to move up the board because the king is blocked by friendly pieces (usually pawns) on the second rank.<div><!--EndFragment--></div>",
                ""
            ],
            "guid": "ns{I|P~}zG",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2r1r1k1/5ppp/8/8/Q7/8/5PPP/4R1K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rxe8+ { +M2 } ( 1. Qxe8+ { +M2 } 1... Rxe8 { +M1 } 2. Rxe8# { +M1 } ) 1... Rxe8 { +M1 } 2. Qxe8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Back-Rank Mate #2<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;",
                ""
            ],
            "guid": "i}r/m:E%tB",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/1p6/kp6/1p6/8/8/5PPP/5RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ra1# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Back-Rank Mate #3<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Perhaps better referred to as a Corridor Mate rather than a Back-Rank Mate, it's still the same principle.",
                ""
            ],
            "guid": "cspfuI#E#Z",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6k1/3qb1pp/4p3/ppp1P3/8/2PP1Q2/PP4PP/5RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qf7+ { +M3 } 1... Kh8 { +M2 } 2. Qf8+ { +M2 } 2... Bxf8 { +M1 } 3. Rxf8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Back-Rank Mate #4<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Zsuzsa Markhot - Sanja Arslanagic, 1997.&nbsp;lichess.org/dWmeC71p#48<!--EndFragment-->",
                ""
            ],
            "guid": "lk/o6l%K61",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"R7/4kp2/5N2/4P3/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Re8# { +M1 } *<br>",
                "",
                "Hook Mate #1",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>The Hook Mate involves the use of a rook, knight, and pawn along with one blockading piece to limit the opponent's king's escape. In this mate, the rook is protected by the knight and the knight is protected by the pawn.<!--EndFragment--><!--EndFragment-->",
                ""
            ],
            "guid": "wP-(cYsW#F",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5r1b/2R1R3/P4r2/2p2Nkp/2b3pN/6P1/4PP2/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rg7+ { +M3 } 1... Bxg7 { +M2 } 2. Rxg7+ { +M2 } 2... Rg6 { +M1 } 3. Rxg6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Hook Mate #2<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Vassily Ivanchuk - Levon Aronian, 2013.&nbsp;lichess.org/O7SHkTtk#78<!--EndFragment-->",
                ""
            ],
            "guid": "Ht|U4QIr%C",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2b1Q3/1kp5/p1Nb4/3P4/1P5p/p6P/K3R1P1/5q2 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxc8+ { +M3 } 1... Kxc8 { +M2 } 2. Re8+ { +M2 } 2... Kb7 { +M1 } ( 2... Kd7 { +M1 } 3. Rd8# { +M1 } ) 3. Rb8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Hook Mate #3<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Ian Nepomniachtchi - Ivan Salgado Lopez, 2008.&nbsp;lichess.org/WQA8wwD3#88<!--EndFragment-->",
                ""
            ],
            "guid": "txzA|!WD@b",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5r2/1b2Nppk/8/2R5/8/8/5PPP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rh5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Anastasia's Mate #1<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>In Anastasia's Mate, a knight and rook team up to trap the opposing king between the side of the board on one side and a friendly piece on the other. This checkmate got its name from the novel \"Anastasia und das Schachspiel\" by Johann Jakob Wilhelm Heinse.<!--EndFragment-->",
                ""
            ],
            "guid": "h8G1qhsJs,",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5r1k/1b2Nppp/8/2R5/4Q3/8/5PPP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxh7+ { +M2 } 1... Kxh7 { +M1 } 2. Rh5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Anastasia's Mate #2<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;",
                ""
            ],
            "guid": "b)3wJ9vN8l",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/1b3ppp/8/2RN4/8/8/2Q2PPP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ne7+ { +M3 } 1... Kh8 { +M2 } 2. Qxh7+ { +M2 } 2... Kxh7 { +M1 } 3. Rh5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Anastasia's Mate #3<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;",
                ""
            ],
            "guid": "dY@3BDh@(8",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1r5k/6pp/2pr4/P1Q3bq/1P2Bn2/2P5/5PPP/R3NRK1 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Ne2+ { -M3 } 2. Kh1 { -M2 } 2... Qxh2+ { -M2 } 3. Kxh2 { -M1 } 3... Rh6# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Anastasia's Mate #4<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Irina Andrenko - Olga Kalinina, 2007.&nbsp;lichess.org/5QZ05ckP/black#53<!--EndFragment-->",
                ""
            ],
            "guid": ":x-CGw.^3",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/1R2R1pp/8/8/8/8/8/1K6 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rxg7+ { +M3 } 1... Kh8 { +M2 } 2. Rxh7+ { +M2 } 2... Kg8 { +M1 } 3. Rbg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Blind Swine Mate #1<!--EndFragment-->",
                "<div><div>&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>The name of this pattern was coined by Polish master Dawid Janowski, referring to coupled rooks on a player's 7th rank as swine. For this type of mate, the rooks on white's 7th rank can start out on any two of the files from a to e, and although black pawns are commonly present, they are not necessary to affect the mate.</div></div>",
                ""
            ],
            "guid": "nX}Glbq<<]",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4rk1/2R5/1n2N1pp/2Rp4/p2P4/P3P2P/qP3PPK/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rg7+ { +M6 } 1... Kh8 { +M5 } 2. Rcc7 { +M5 } 2... Nd7 { +M4 } ( 2... Ra7 { +M4 } 3. Rxa7 { +M4 } 3... Rf7 { +M3 } ( 3... Nd7 { +M3 } 4. Raxd7 { +M3 } 4... Qb3 { +M2 } ( 4... g5 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) ( 4... h5 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) ( 4... Rxf2 { +M2 } 5. Rh7+ { +M2 } ( 5. Rd8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) ( 4... Rf3 { +M2 } 5. Rh7+ { +M2 } ( 5. Rd8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) ( 4... Rf4 { +M2 } 5. Rd8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf5 { +M2 } 5. Rd8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf6 { +M2 } 5. Rd8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf7 { +M2 } 5. Rd8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Ra8 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rdg7# { +M1 } ) 4. Rgxf7 { +M3 } ( 4. Raxf7 { +M3 } 4... Nd7 { +M2 } ( 4... Qxa3 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) 4... Nd7 { +M2 } ( 4... Qxa3 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) 5. Ra8+ { +M2 } 5... Nf8 { +M1 } ( 5... Nb8 { +M1 } 6. Rxb8# { +M1 } ) 6. Raxf8# { +M1 } ) 3. Rcxd7 { +M4 } 3... Ra7 { +M3 } ( 3... Rf7 { +M3 } 4. Rdxf7 { +M3 } 4... g5 { +M2 } ( 4... Qxb2 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Rc8 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Re8 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Rb8 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Qxa3 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Qb3 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... h5 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Qb1 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) ( 4... Qc4 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rfg7# { +M1 } ) 4. Rxa7 { +M3 } 4... g5 { +M2 } ( 4... h5 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) ( 4... Rxf2 { +M2 } 5. Rh7+ { +M2 } ( 5. Ra8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) ( 4... Rf3 { +M2 } 5. Rh7+ { +M2 } ( 5. Ra8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) ( 4... Rf4 { +M2 } 5. Ra8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf5 { +M2 } 5. Ra8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf6 { +M2 } 5. Ra8+ { +M2 } ( 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Rf7 { +M2 } 5. Ra8+ { +M2 } 5... Rf8 { +M1 } 6. Rxf8# { +M1 } ) ( 4... Qxb2 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) ( 4... Qb3 { +M2 } 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } ) 5. Rh7+ { +M2 } 5... Kg8 { +M1 } 6. Rag7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Blind Swine Mate #2<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 6 moves&lt;/h3&gt;&nbsp;<br>From Rudolf Swiderski - Aron Nimzowitsch, 1905.&nbsp;lichess.org/8ZwfTJIk#60<!--EndFragment-->",
                ""
            ],
            "guid": "J-L4s5/N?v",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/1R1R1p1p/4N1p1/p7/5p2/1P4P1/r2nP1KP/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rxf7 { +M5 } 1... f3+ { +M4 } 2. Kh3 { +M4 } 2... Rc8 { +M3 } ( 2... Rd8 { +M3 } 3. Rg7+ { +M3 } ( 3. Rxh7 { +M3 } 3... Rd7 { +M2 } 4. Rhxd7 { +M2 } ( 4. Rbxd7 { +M2 } 4... f2 { +M1 } ( 4... a4 { +M1 } 5. Rdg7# { +M1 } ) ( 4... g5 { +M1 } 5. Rdg7# { +M1 } ) ( 4... fxe2 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Nb1 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Nf1 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Nxb3 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Nc4 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Ne4 { +M1 } 5. Rdg7# { +M1 } ) ( 4... Ra1 { +M1 } 5. Rdg7# { +M1 } ) 5. Rdg7# { +M1 } ) 4... f2 { +M1 } ( 4... a4 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... g5 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... fxe2 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Nb1 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Nf1 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Nxb3 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Nc4 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Ne4 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) ( 4... Ra1 { +M1 } 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) 5. Rb8# { +M1 } ( 5. Rd8# { +M1 } ) ) 3... Kh8 { +M2 } 4. Rxh7+ { +M2 } 4... Kg8 { +M1 } 5. Rbg7# { +M1 } ) ( 2... Ra8 { +M3 } 3. Rg7+ { +M3 } ( 3. Rxh7 { +M3 } 3... Ra7 { +M2 } 4. Rxa7 { +M2 } ( 4. Rhg7+ { +M2 } 4... Kh8 { +M1 } 5. Rb8# { +M1 } ) 4... f2 { +M1 } ( 4... a4 { +M1 } 5. Rag7# { +M1 } ) ( 4... g5 { +M1 } 5. Rag7# { +M1 } ) ( 4... fxe2 { +M1 } 5. Rag7# { +M1 } ) ( 4... Nb1 { +M1 } 5. Rag7# { +M1 } ) ( 4... Nf1 { +M1 } 5. Rag7# { +M1 } ) ( 4... Nxb3 { +M1 } 5. Rag7# { +M1 } ) ( 4... Nc4 { +M1 } 5. Rag7# { +M1 } ) ( 4... Ne4 { +M1 } 5. Rag7# { +M1 } ) ( 4... Ra1 { +M1 } 5. Rag7# { +M1 } ) 5. Rag7# { +M1 } ) 3... Kh8 { +M2 } 4. Rxh7+ { +M2 } 4... Kg8 { +M1 } 5. Rbg7# { +M1 } ) ( 2... Re8 { +M3 } 3. Rg7+ { +M3 } 3... Kh8 { +M2 } 4. Rxh7+ { +M2 } 4... Kg8 { +M1 } 5. Rbg7# { +M1 } ) 3. Rg7+ { +M3 } ( 3. Rxh7 { +M3 } 3... Rc7 { +M2 } 4. Rbxc7 { +M2 } ( 4. Rhxc7 { +M2 } 4... f2 { +M1 } ( 4... a4 { +M1 } 5. Rc8# { +M1 } ( 5. Rb8# { +M1 } ) ) ( 4... g5 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... fxe2 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Nb1 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Nf1 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Nxb3 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Nc4 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Ne4 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) ( 4... Ra1 { +M1 } 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) 5. Rb8# { +M1 } ( 5. Rc8# { +M1 } ) ) 4... f2 { +M1 } ( 4... a4 { +M1 } 5. Rcg7# { +M1 } ) ( 4... g5 { +M1 } 5. Rcg7# { +M1 } ) ( 4... fxe2 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Nb1 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Nf1 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Nxb3 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Nc4 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Ne4 { +M1 } 5. Rcg7# { +M1 } ) ( 4... Ra1 { +M1 } 5. Rcg7# { +M1 } ) 5. Rcg7# { +M1 } ) 3... Kh8 { +M2 } 4. Rxh7+ { +M2 } 4... Kg8 { +M1 } 5. Rbg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Blind Swine Mate #3<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 5 moves&lt;/h3&gt;&nbsp;<br>From Vassily Ivanchuk - Levon Aronian, 2006.&nbsp;lichess.org/jpepghbu#88<!--EndFragment-->",
                ""
            ],
            "guid": "dUZ%9lrJt-",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6rk/6pp/8/6N1/8/8/8/7K w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nf7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Smothered Mate #1<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt; <br><!--StartFragment-->Smothered Mate occurs when a knight checkmates a king that is smothered (surrounded) by his friendly pieces and he has nowhere to move nor is there any way to capture the knight. It is also known as \"Philidor's Legacy\" after Franois-Andr Danican Philidor, though its documentation predates Philidor by several hundred years.<!--EndFragment-->",
                ""
            ],
            "guid": "N1^_Njx1Vu",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6rk/6pp/6q1/6N1/8/7Q/6PP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxh7+ { +M2 } 1... Qxh7 { +M1 } 2. Nf7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Smothered Mate #2<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;",
                ""
            ],
            "guid": "rSKL#{^8Ak",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3r3k/1p1b1Qbp/1n2B1p1/p5N1/Pq6/8/1P4PP/R6K w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qg8+ { +M2 } 1... Rxg8 { +M1 } 2. Nf7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Smothered Mate #3<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Alexander Grischuk - Ruslan Ponomariov, 2000.&nbsp;lichess.org/994kmTot#50<!--EndFragment-->",
                ""
            ],
            "guid": "v?0;QzA}E?",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r1k4r/ppp1bq1p/2n1N3/6B1/3p2Q1/8/PPP2PPP/R5K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nc5+ { +M6 } ( 1. Nf8+ { +M6 } 1... Qf5 { +M5 } ( 1... Qe6 { +M5 } 2. Qxe6+ { +M5 } 2... Kb8 { +M4 } 3. Nd7+ { +M4 } 3... Kc8 { +M3 } 4. Nb6+ { +M3 } 4... Kb8 { +M2 } 5. Qc8+ { +M2 } 5... Rxc8 { +M1 } 6. Nd7# { +M1 } ) 2. Qxf5+ { +M5 } 2... Kb8 { +M4 } 3. Nd7+ { +M4 } 3... Kc8 { +M3 } 4. Nb6+ { +M3 } 4... Kb8 { +M2 } 5. Qc8+ { +M2 } 5... Rxc8 { +M1 } 6. Nd7# { +M1 } ) 1... Qf5 { +M5 } ( 1... Qe6 { +M5 } 2. Qxe6+ { +M5 } 2... Kb8 { +M4 } 3. Nd7+ { +M4 } 3... Kc8 { +M3 } 4. Nb6+ { +M3 } 4... Kb8 { +M2 } 5. Qc8+ { +M2 } 5... Rxc8 { +M1 } 6. Nd7# { +M1 } ) 2. Qxf5+ { +M5 } 2... Kb8 { +M4 } 3. Nd7+ { +M4 } 3... Kc8 { +M3 } 4. Nb6+ { +M3 } 4... Kb8 { +M2 } 5. Qc8+ { +M2 } 5... Rxc8 { +M1 } 6. Nd7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Smothered Mate #4<!--EndFragment-->",
                "&lt;h3&gt;Checkmate the opponent in 6 moves&lt;/h3&gt;&nbsp;<br>From Paul Morphy - Schrufer, 1859.&nbsp;lichess.org/2TLjjAhC#38<!--EndFragment-->",
                ""
            ],
            "guid": "l%2[68I,3%",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_I"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"7k/5B1p/8/8/8/8/8/5KB1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bd4# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Double Bishop Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;",
                ""
            ],
            "guid": "N;D{c(!;*W",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r1bq3k/pp2R2p/3B2p1/2pBbp2/2Pp4/3P4/P1P3PP/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bxe5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Double Bishop Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Heinrich Ranneforth - Herbert Edward Dobell, 1903.&nbsp;lichess.org/FpRHOSPy#46<!--EndFragment-->",
                ""
            ],
            "guid": "cqnNOnC`e-",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r3k2r/pbpp1ppp/1p6/2bBPP2/8/1QPp1P1q/PP1P3P/RNBR3K b kq - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qxf3+ { -M2 } 2. Bxf3 { -M1 } 2... Bxf3# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Double Bishop Mate #3<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Victor Kahn - Carl Hartlaub, 1916.&nbsp;lichess.org/0lscOyHM#29<!--EndFragment-->",
                ""
            ],
            "guid": "u`bd=18)x?",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2kr4/3p4/8/8/5B2/8/8/5BK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ba6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Boden's Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->In Boden's Mate, two attacking bishops on criss-crossing diagonals deliver mate to a king obstructed by friendly pieces, usually a rook and a pawn.<!--EndFragment-->",
                ""
            ],
            "guid": "_IJ(maLVz",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2k1rb1r/ppp3pp/2n2q2/3B1b2/5P2/2P1BQ2/PP1N1P1P/2KR3R b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qxc3+ { -M2 } 2. bxc3 { -M1 } 2... Ba3# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Boden's Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From R Schulder - Samuel Standidge Boden, 1853.&nbsp;lichess.org/Esfzyv1o#27<!--EndFragment-->",
                ""
            ],
            "guid": "Kb+`puf#~h",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2kr1b1r/pp1npppp/2p1bn2/7q/5B2/2NB1Q1P/PPP1N1P1/2KR3R w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxc6+ { +M2 } 1... bxc6 { +M1 } 2. Ba6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Boden's Mate #3<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Emil Joseph Diemer - Portz, 1948.&nbsp;lichess.org/ThxIO7nK#22<!--EndFragment-->",
                ""
            ],
            "guid": "f%Z}@$?4](",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5k2/8/6Q1/8/8/6B1/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bd6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Balestra Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->The Balestra Mate is similar to Boden's Mate, but instead of two bishops, a bishop and a queen is used. The bishop delivers the checkmate, while the queen blocks the remaining escape squares.<!--EndFragment-->",
                ""
            ],
            "guid": "pDvZVYt9>%",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"7k/5R2/5N2/8/8/8/8/7K w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rh7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Arabian Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->In the Arabian Mate, the knight and the rook team up to trap the opposing king on a corner of the board. The rook sits on a square adjacent to the king both to prevent escape along the diagonal and to deliver checkmate while the knight sits two squares away diagonally from the king to prevent escape on the square next to the king and to protect the rook.<!--EndFragment-->",
                ""
            ],
            "guid": "%!Xn*99WZ",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4nk1/pp2r1p1/2p1P2p/3p1P1N/8/8/PPPK4/6RR w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nf6+ { +M3 } 1... Kh8 { +M2 } 2. Rxh6+ { +M2 } 2... Nh7 { +M1 } ( 2... gxh6 { +M1 } 3. Rg8# { +M1 } ) 3. Rxh7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Arabian Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Zaven Andriasian - Brent Burg, 2013.&nbsp;lichess.org/xnMFsYJ5#52<!--EndFragment-->",
                ""
            ],
            "guid": "PVEJg2}KMo",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3qrk2/p1r2pp1/1p2pb2/nP1bN2Q/3PN3/P6R/5PPP/R5K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxf7+ { +M3 } 1... Rxf7 { +M2 } 2. Ng6+ { +M2 } 2... Kg8 { +M1 } 3. Rh8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Arabian Mate #3<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Gregory Kaidanov - Viswanathan Anand, 1987.&nbsp;lichess.org/lQAVAyON#48<!--EndFragment-->",
                ""
            ],
            "guid": "hBg1A5)a,L",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"7k/7p/8/6N1/8/8/8/6RK w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nf7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Corner Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->The Corner Mate works by confining the king to the corner using a rook or queen and using a knight to engage the checkmate.<!--EndFragment-->",
                ""
            ],
            "guid": "os|3n{n|ta",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/3Q1p2/6p1/P5r1/R1q1n3/7B/7P/5R1K b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qxf1+ { -M2 } 2. Bxf1 { -M1 } 2... Nf2# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Corner Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Hugh Edward Myers - Dmitri Poliakoff, 1955.&nbsp;lichess.org/JtggB3GP#95<!--EndFragment-->",
                ""
            ],
            "guid": "oifYXlzxmm",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"7k/5p1p/8/8/7B/8/8/6RK w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bf6# { +M1 } *<br>",
                "",
                "Morphy's Mate #1",
                "&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Morphy's Mate is named after Paul Morphy. It works by using the bishop to attack the enemy king while your rook and an enemy pawn helps to confine it.",
                ""
            ],
            "guid": "IS(-EbObi@",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/p4p1p/1p1rpp2/3qB3/3PR3/7P/PP3PP1/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rg4+ { +M2 } 1... Kh8 { +M1 } 2. Bxf6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Morphy's Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->A variation in Aron Nimzowitsch - Bjorn Nielsen, 1930 that was not played.&nbsp;lichess.org/lICITIAV#45<!--EndFragment-->",
                ""
            ],
            "guid": "J5Lmw<J(X~",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2r2rk1/5ppp/pp6/2q5/2P2P2/3pP1RP/P5P1/B1R3K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rxg7+ { +M6 } 1... Kh8 { +M5 } 2. Rxf7+ { +M5 } 2... Qe5 { +M4 } ( 2... Kg8 { +M4 } 3. Rg7+ { +M4 } 3... Kh8 { +M3 } 4. Rg3+ { +M3 } ( 4. Rg4+ { +M3 } 4... Qe5 { +M2 } ( 4... Qd4 { +M2 } 5. Bxd4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5. Bxe5+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 4. Rg5+ { +M3 } 4... Qe5 { +M2 } ( 4... Qd4 { +M2 } 5. Bxd4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5. Bxe5+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 4. Rg6+ { +M3 } 4... Qe5 { +M2 } ( 4... Qd4 { +M2 } 5. Bxd4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5. Bxe5+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 4... Qe5 { +M2 } ( 4... Qd4 { +M2 } 5. Bxd4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5. Bxe5+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 2... Qd4 { +M4 } 3. Bxd4+ { +M4 } 3... Kg8 { +M3 } 4. Rg7+ { +M3 } 4... Kh8 { +M2 } 5. Rg5+ { +M2 } ( 5. Rg3+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 5. Rg4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 5. Rg6+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 3. Bxe5+ { +M4 } 3... Kg8 { +M3 } 4. Rg7+ { +M3 } 4... Kh8 { +M2 } 5. Rg3+ { +M2 } ( 5. Rg4+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 5. Rg5+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) ( 5. Rg6+ { +M2 } 5... Rf6 { +M1 } 6. Bxf6# { +M1 } ) 5... Rf6 { +M1 } 6. Bxf6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Morphy's Mate #3<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 6 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Samuel Reshevsky - George Shainswit, 1951.&nbsp;lichess.org/gImCHArp#56<!--EndFragment-->",
                ""
            ],
            "guid": "tOov;gXY]X",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/5p1p/8/8/8/8/1B6/4K2R w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rg1# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Pillsbury's Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->Pillsbury's Mate is named for Harry Nelson Pillsbury and is a variation of Morphy's Mate. The rook delivers checkmate while the bishop prevents the King from fleeing to the corner square.<!--EndFragment-->",
                ""
            ],
            "guid": "LKFV?Padw^",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2rqnrk1/pp3ppp/1b1p4/3p2Q1/2n1P3/3B1P2/PB2NP1P/R5RK w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxg7+ { +M5 } 1... Nxg7 { +M4 } 2. Rxg7+ { +M4 } 2... Kh8 { +M3 } 3. Rg8+ { +M3 } 3... Kxg8 { +M2 } 4. Rg1+ { +M2 } 4... Qg5 { +M1 } 5. Rxg5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Pillsbury's Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 5 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Adolf Anderssen - Berthold Suhle, 1860.&nbsp;lichess.org/fOv9xEzv#36<!--EndFragment-->",
                ""
            ],
            "guid": "jFFGz)/hPJ",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/6p1/6P1/7Q/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qh7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Damiano's Mate #1<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><!--EndFragment-->Damiano's Mate is a classic method of checkmating and one of the oldest. It works by confining the king with a pawn or bishop and using a queen to initiate the final blow. Damiano's mate is often arrived at by first sacrificing a rook on the h-file, then checking the king with the queen on the h-file, and then moving in for the mate. The checkmate was first published by Pedro Damiano in 1512.<!--EndFragment-->",
                ""
            ],
            "guid": "J)6**I&)Lm",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"4rk2/1p1q1p2/3p1Bn1/p1pP1p2/P1P5/1PK3Q1/8/7R w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rh8+ { +M2 } 1... Nxh8 { +M1 } 2. Qg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Damiano's Mate #2<!--EndFragment-->",
                "<!--StartFragment--><!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br><!--EndFragment-->From Ulvi Bajarani - Dragan Solak, 2010.&nbsp;lichess.org/Dtn5EPFy#74<!--EndFragment-->",
                ""
            ],
            "guid": "mOl@z[/b|o",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"q1r4r/1b2kpp1/p3p3/P1b5/1pN1P3/3BBPp1/1P4P1/R3QRK1 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Rh1+ { -M5 } 2. Kxh1 { -M4 } 2... Rh8+ { -M4 } 3. Kg1 { -M3 } 3... Rh1+ { -M3 } 4. Kxh1 { -M2 } 4... Qh8+ { -M2 } 5. Kg1 { -M1 } ( 5. Bh6 { -M1 } 5... Qxh6# { -M1 } ) 5... Qh2# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Damiano's Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 5 moves&lt;/h3&gt;&nbsp;<br>From Alexander Baburin - Utut Adianto, 1993.&nbsp;lichess.org/qsMfDEhz/black#47<!--EndFragment-->",
                ""
            ],
            "guid": "H$0|1C>s#.",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6k1/5p2/5PpQ/8/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Lolli's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Lolli's Mate involves infiltrating Black's fianchetto position using both a pawn and queen. The queen often gets to the h6 square by means of sacrifices on the h-file. It is named after Giambattista Lolli.<!--EndFragment-->",
                ""
            ],
            "guid": "IZun6Rg-.<",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4r2/1q3pkp/p1b1p1n1/1p4QP/4P3/1BP3P1/P4P2/R2R2K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. h6+ { +M3 } 1... Kh8 { +M2 } ( 1... Kg8 { +M2 } 2. Qf6 { +M2 } 2... b4 { +M1 } ( 2... a5 { +M1 } 3. Qg7# { +M1 } ) ( 2... e5 { +M1 } 3. Qg7# { +M1 } ) ( 2... Nf4 { +M1 } 3. Qg7# { +M1 } ) ( 2... Nh4 { +M1 } 3. Qg7# { +M1 } ) ( 2... Ne5 { +M1 } 3. Qg7# { +M1 } ) ( 2... Ne7 { +M1 } 3. Qg7# { +M1 } ) ( 2... Nh8 { +M1 } 3. Qg7# { +M1 } ) ( 2... Bxe4 { +M1 } 3. Qg7# { +M1 } ) ( 2... Bd5 { +M1 } 3. Qg7# { +M1 } ) 3. Qg7# { +M1 } ) 2. Qf6+ { +M2 } 2... Kg8 { +M1 } 3. Qg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Lolli's Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Rudolf Spielmann - Ernst Gruenfeld, 1929.&nbsp;lichess.org/HmJ53OVT#44<!--EndFragment-->",
                ""
            ],
            "guid": "ina#[{kG]A",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"4r1qk/5p1p/pp2rPpR/2pbP1Q1/3pR3/2P5/P5PP/2B3K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Reh4 { +M6 } 1... Rxe5 { +M5 } 2. Rxh7+ { +M5 } 2... Qxh7 { +M4 } 3. Rxh7+ { +M4 } 3... Kg8 { +M3 } 4. Rh8+ { +M3 } 4... Kxh8 { +M2 } 5. Qh6+ { +M2 } 5... Kg8 { +M1 } 6. Qg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Lolli's Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 6 moves&lt;/h3&gt;&nbsp;<br>From Joseph Henry Blackburne - Alexander Steinkuehler, 1871.&nbsp;lichess.org/JOcQmfOR#54<!--EndFragment-->",
                ""
            ],
            "guid": "Di[4ZbE$Mr",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"4k3/5p2/8/6B1/8/8/8/3R2K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rd8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Opera Mate #1<!--EndFragment-->",
                "<!--StartFragment--><div>&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><div>The Opera Mate works by attacking the king on the back rank with a rook using a bishop to protect it. A pawn or other piece other than a knight of the enemy king's is used to restrict its movement. The checkmate was named after its implementation by Paul Morphy in 1858 at a game at the Paris opera against Duke Karl of Brunswick and Count Isouard, known as the \"The Opera Game\".</div></div>",
                ""
            ],
            "guid": "l>/sn;]){t",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"rn1r2k1/ppp2ppp/3q1n2/4b1B1/4P1b1/1BP1Q3/PP3PPP/RN2K1NR b KQ - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qd1+ { -M2 } 2. Bxd1 { -M1 } 2... Rxd1# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Opera Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Josef Emil Krejcik - Julius Thirring, 1898.&nbsp;lichess.org/HkBZsnJ0#19<!--EndFragment-->",
                ""
            ],
            "guid": "sG=QZw6<.l",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"rn3rk1/p5pp/2p5/3Ppb2/2q5/1Q6/PPPB2PP/R3K1NR b KQ - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qf1+ { -M3 } 2. Kxf1 { -M2 } 2... Bd3+ { -M2 } 3. Ke1 { -M1 } 3... Rf1# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Opera Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From John William Schulten - Bernhard Horwitz, 1846.&nbsp;lichess.org/bUCZDcOY/black#29<!--EndFragment-->",
                ""
            ],
            "guid": "Ov1;%L`nv5",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6k1/6P1/5K1R/8/8/8/8/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rh8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Anderssen's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>In Anderssen's mate, named for Adolf Anderssen, the rook or queen is supported by a diagonally-attacking piece such as a pawn or bishop as it checkmates the opposing king along the eighth rank.<!--EndFragment-->",
                ""
            ],
            "guid": "Q%JN5v6l4k",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1k2r3/pP3pp1/8/3P1B1p/5q2/N1P2b2/PP3Pp1/R5K1 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qh4 { -M3 } 2. Bh3 { -M2 } 2... Qxh3 { -M2 } 3. b3 { -M1 } ( 3. c4 { -M1 } 3... Qh1# { -M1 } ) ( 3. d6 { -M1 } 3... Qh1# { -M1 } ) ( 3. b4 { -M1 } 3... Qh1# { -M1 } ) ( 3. Nb1 { -M1 } 3... Qh1# { -M1 } ( 3... Re1# { -M1 } ) ) ( 3. Nc2 { -M1 } 3... Qh1# { -M1 } ) ( 3. Nc4 { -M1 } 3... Qh1# { -M1 } ) ( 3. Nb5 { -M1 } 3... Qh1# { -M1 } ) ( 3. Rb1 { -M1 } 3... Qh1# { -M1 } ) ( 3. Rc1 { -M1 } 3... Qh1# { -M1 } ) 3... Qh1# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Anderssen's Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Isidor Gunsberg - Emil Schallopp, 1886.&nbsp;lichess.org/QWv9wgQA/black#46<!--EndFragment-->",
                ""
            ],
            "guid": "h7N-#F$kb*",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2r1nrk1/p4p1p/1p2p1pQ/nPqbRN2/8/P2B4/1BP2PPP/3R2K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ne7+ { +M4 } 1... Qxe7 { +M3 } 2. Qxh7+ { +M3 } 2... Kxh7 { +M2 } 3. Rh5+ { +M2 } 3... Kg8 { +M1 } 4. Rh8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Anderssen's Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 4 moves&lt;/h3&gt;&nbsp;<br>From Rudolf Spielmann - Baldur Hoenlinger, 1929.&nbsp;lichess.org/sj6uWnS4#48<!--EndFragment-->",
                ""
            ],
            "guid": "PHBTPl=dWH",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1r6/pk6/4Q3/3P4/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qc6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Dovetail Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>In the Dovetail Mate, the mating queen is one square diagonally from the mated king which escape is blocked by two friendly non-Knight pieces.<!--EndFragment-->",
                ""
            ],
            "guid": "AY%FpUM,Zb",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r1b1q1r1/ppp3kp/1bnp4/4p1B1/3PP3/2P2Q2/PP3PPP/RN3RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qf6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Dovetail Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>From Gioachino Greco - NN, 1620.&nbsp;lichess.org/FyR2bIHK#26<!--EndFragment-->",
                ""
            ],
            "guid": "QgjLL`k{y:",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"6k1/1p1b3p/2pp2p1/p7/2Pb2Pq/1P1PpK2/P1N3RP/1RQ5 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Bxg4+ { -M4 } 2. Rxg4 { -M3 } 2... Qf2+ { -M3 } 3. Ke4 { -M2 } 3... Qf5+ { -M2 } 4. Kxd4 { -M1 } 4... Qe5# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Dovetail Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 4 moves&lt;/h3&gt;&nbsp;<br>From Juan Manuel Bellon Lopez - Jan Smejkal, 1970.&nbsp;lichess.org/FhV1tfgZ/black#63<!--EndFragment-->",
                ""
            ],
            "guid": "mz[>N.|Kb@",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"rR6/5k2/2p3q1/4Qpb1/2PB1Pb1/4P3/r5R1/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qe8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Dovetail Mate #4<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Other variations of the Dovetail Mate can occur if a queen delivers mate by checking the king from a diagonally adjacent square while supported by a friendly piece and you also control the two potential escape squares with other pieces, typically a bishop.<!--EndFragment-->",
                ""
            ],
            "guid": "c^U1oo/WoR",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/8/1Q6/8/6pk/5q2/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qh6+ { +M2 } 1... Kg3 { +M1 } 2. Qh2# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Cozio's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>Cozio's Mate is an upside down version of the Dovetail Mate. It was named after a study by Carlo Cozio that was published in 1766.<!--EndFragment-->",
                ""
            ],
            "guid": "Gb^l-L@`H5",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3r1r2/4k3/R7/3Q4/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qe6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Swallow's Tail Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>The Swallow's Tail Mate works by attacking the enemy king with a queen that is protected by a rook or other piece. The enemy king's own pieces block its means of escape. It is also known as the Guridon Mate.<!--EndFragment-->",
                ""
            ],
            "guid": "E*1[&OKfa}",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/8/2P5/3K1k2/2R3p1/2q5/8/8 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qe5# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Swallow's Tail Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>From Paul Keres - Robert James Fischer, 1959.&nbsp;lichess.org/BOxsZ6Iw/black#105<!--EndFragment-->",
                ""
            ],
            "guid": "qaTuhTP@cS",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3rkr2/8/5Q2/8/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qe6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Epaulette Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>The Epaulette Mate is a checkmate where two parallel retreat squares for a checked king are occupied by its own pieces, preventing its escape.<!--EndFragment-->",
                ""
            ],
            "guid": "gV+N$AbJe/",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1k1r4/pp1q1B1p/3bQp2/2p2r2/P6P/2BnP3/1P6/5RKR b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Rg8+ { -M2 } 2. Bxg8 { -M1 } ( 2. Bg6 { -M1 } 2... Rxg6# { -M1 } ) 2... Qg7# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Epaulette Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Loek van Wely - Alexander Morozevich, 2001.&nbsp;lichess.org/iQ8Pvq1h/black#41<!--EndFragment-->",
                ""
            ],
            "guid": "GNpTVZ|5sd",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5r2/pp3k2/5r2/q1p2Q2/3P4/6R1/PPP2PP1/1K6 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qd7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Epaulette Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>From Magnus Carlsen - Sipke Ernst, 2004.&nbsp;lichess.org/24qhejUa#56<!--EndFragment-->",
                ""
            ],
            "guid": "gpv,A2bq^%",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/7R/1pkp4/2p5/1PP5/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. b5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Pawn Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Although the Pawn Mate can take many forms, it is generally characterized as a mate in which a pawn is the final attacking piece and where enemy pawns are nearby. The Pawn Mate is sometimes also called the David and Goliath Mate, named after the biblical account of David and Goliath.<!--EndFragment-->",
                ""
            ],
            "guid": "bevI2B^$]~",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r1b3nr/ppp3qp/1bnpk3/4p1BQ/3PP3/2P5/PP3PPP/RN3RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qe8+ { +M2 } 1... Qe7 { +M1 } ( 1... Nce7 { +M1 } 2. d5# { +M1 } ) ( 1... Nge7 { +M1 } 2. d5# { +M1 } ) 2. d5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Pawn Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Gioachino Greco vs NN, 1620.&nbsp;lichess.org/Nd8hilrJ#24<!--EndFragment-->",
                ""
            ],
            "guid": "sl~9F}Ppnd",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_III"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/5p1p/8/3N4/8/8/1B6/7K w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ne7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Suffocation Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>The Suffocation Mate works by using the knight to attack the enemy king and the bishop to confine the king's escape routes.<!--EndFragment-->",
                ""
            ],
            "guid": "P).8Hz-VG1",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4k1r/1q3p1p/p1N2p2/1pp5/8/1PPP4/1P3PPP/R1B1R1K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bh6+ { +M4 } 1... Kg8 { +M3 } 2. Re3 { +M3 } 2... Qc7 { +M2 } ( 2... Qd7 { +M2 } 3. Ne7+ { +M2 } ( 3. Rg3+ { +M2 } 3... Qg4 { +M1 } 4. Rxg4# { +M1 } ( 4. Ne7# { +M1 } ) ) 3... Qxe7 { +M1 } 4. Rg3# { +M1 } ) 3. Rg3+ { +M2 } ( 3. Ne7+ { +M2 } 3... Qxe7 { +M1 } 4. Rg3# { +M1 } ) 3... Qxg3 { +M1 } 4. Ne7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Suffocation Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 4 moves&lt;/h3&gt;&nbsp;<br>From Wilhelm Steinitz - J B Brockenbrough, 1885.&nbsp;lichess.org/GO7Zudmb#36<!--EndFragment-->",
                ""
            ],
            "guid": "gPV:vRW=ec",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"7k/6p1/6Q1/8/8/1B6/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qh5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Greco's Mate #1<!--EndFragment-->",
                "<!--StartFragment--><div>&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br><div>Greco's Mate is named after the famous Italian checkmate cataloguer Gioachino Greco. It works by using the bishop to contain the black king by use of the black g-pawn and subsequently using the queen or a rook to checkmate the king by moving it to the edge of the board.</div></div>",
                ""
            ],
            "guid": "K&$-DKPdMQ",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4r1k/ppn1NBpp/4b3/4P3/3p1R2/1P6/P1P3PP/R5K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ng6+ { +M2 } 1... hxg6 { +M1 } 2. Rh4# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Greco's Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Max Euwe - Wiersma, 1920.&nbsp;lichess.org/ZwiRcFec#36<!--EndFragment-->",
                ""
            ],
            "guid": "Di*SMPlbh*",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r2q1rk1/pbp3pp/1p1b4/3N1p2/2B5/P3PPn1/1P3P1P/2RQK2R w K - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Ne7+ { +M4 } 1... Kh8 { +M3 } 2. Ng6+ { +M3 } 2... hxg6 { +M2 } 3. hxg3+ { +M2 } 3... Qh4 { +M1 } 4. Rxh4# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Greco's Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 4 moves&lt;/h3&gt;&nbsp;<br>From Sidney Paine Johnston - Frank James Marshall, 1899.&nbsp;lichess.org/CA8H3j1I#28<!--EndFragment-->",
                ""
            ],
            "guid": "Xg}}A~O94",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2Q5/5Bpk/7p/8/8/8/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qg8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Max Lange's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Max Lange's Mate is named after German chess player and problem composer Max Lange. It works by using the bishop and queen in combination to checkmate the king.<!--EndFragment-->",
                ""
            ],
            "guid": "O+8ryj2ho4",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r3k3/ppp2pp1/8/2bpP2P/4q3/1B1p1Q2/PPPP2P1/RNB4K b q - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Qh4+ { -M5 } 2. Qh3 { -M4 } 2... Qe1+ { -M4 } 3. Kh2 { -M3 } 3... Bg1+ { -M3 } 4. Kh1 { -M2 } 4... Bf2+ { -M2 } 5. Kh2 { -M1 } 5... Qg1# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Max Lange's Mate #2<!--EndFragment-->",
                "<!--StartFragment--><div>&lt;h3&gt;Checkmate the opponent in 5 moves&lt;/h3&gt;&nbsp;<br><div>From Adolf Anderssen - Max Lange, 1859.&nbsp;lichess.org/ma5k6RDR#33</div></div>",
                ""
            ],
            "guid": "ocw|;k&Gf8",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"5rk1/7p/8/6N1/8/8/1BB5/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bxh7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Blackburne's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Blackburne's Mate is named for Joseph Henry Blackburne. This checkmate utilizes an enemy rook (or bishop or queen) to confine the black king's escape to the f8 square.. One of the bishops confines the black king's movement by operating at a distance, while the knight and the other bishop operate within close range.<!--EndFragment-->",
                ""
            ],
            "guid": "s}2=i;A.Lg",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1nb5/1pk5/2p5/8/7B/8/8/3R3K w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bd8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Rti's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>Rti's Mate is named after Richard Rti, who delivered it in an 11-move game against Savielly Tartakower in 1910 in Vienna. It works by trapping the enemy king with four of its own pieces that are situated on flight squares and then attacking it with a bishop that is protected by a rook or queen.<!--EndFragment-->",
                ""
            ],
            "guid": "QYKi?j4K1w",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3q1b2/4kB2/3p4/4N3/8/2N5/8/6K1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nd5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Lgal's Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>In Lgal's Mate, the knight moves into a position to check the king. The bishop is guarded by the other knight, and the enemy pieces block the king's escape.<!--EndFragment-->",
                ""
            ],
            "guid": "EPJ(^iG`)}",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2kr4/8/1Q6/8/8/8/5PPP/3R1RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Rxd8# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Kill Box Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>The Kill Box Mate occurs when a rook is next to the enemy king and supported by a queen that also blocks the king's escape squares. The rook and the queen catch the enemy king in a 3 by 3 \"kill box\".<!--EndFragment-->",
                ""
            ],
            "guid": "cjiX+<J-H#",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/3p4/3k4/2R4Q/8/4K3/8/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qe5# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Triangle Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>A Triangle Mate is delivered by a queen attacking an enemy king, while it is supported by a rook. The queen and rook are one square away from the enemy king. They are on the same rank or file, separated by one square, with the enemy king being between them one square away, forming a triangle. The king must be restricted from escaping to the middle square behind it away from the queen and rook, by the edge of the board, a piece blocking it, or by controlling that square with a third piece.<!--EndFragment-->",
                ""
            ],
            "guid": "lW?H?8<$zr",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"4k3/R7/4N3/3r4/8/B7/4K3/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Re7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Vukovic Mate #1<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 1 move&lt;/h3&gt;&nbsp;<br>In the Vukovic Mate, a rook and knight team up to mate the king on the edge of the board. The rook delivers mate while supported by a third piece, and the knight is used to block the king's escape squares.<!--EndFragment-->",
                ""
            ],
            "guid": "Cv4|G~q<QD",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"R7/8/8/7p/6n1/6k1/3r4/5K2 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Nh2+ { -M3 } 2. Ke1 { -M2 } 2... Nf3+ { -M2 } 3. Kf1 { -M1 } 3... Rf2# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Vukovic Mate #2<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;<br>From Howard Staunton - Elijah Williams, 1851.&nbsp;lichess.org/krqAQJxS/black#151<!--EndFragment-->",
                ""
            ],
            "guid": "uP&k/EBc#-",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"2r5/8/8/5K1k/4N1R1/7P/8/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Nf6+ { +M2 } 1... Kh6 { +M1 } 2. Rg6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Vukovic Mate #3<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 2 moves&lt;/h3&gt;&nbsp;<br>From Pavol Danek - Stanislav Hanuliak, 2001.&nbsp;lichess.org/btzCqtI4#132<!--EndFragment-->",
                ""
            ],
            "guid": "B=7]6n3kC=",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Checkmate_Patterns_IV"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3kb3/8/8/3KQ3/8/8 w - - 0 1",
                "<!--StartFragment-->Keep your pieces on the opposite color squares from the enemy bishop to stay safe. Use your queen to encroach on the king and look for double attacks.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>Mate in 10 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "At-4xg>z/r",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3kn3/8/8/3KQ3/8/8 w - - 0 1",
                "<!--StartFragment-->Force the enemy king to the edge of the board while avoiding tricky knight forks.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>Mate in 12 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "RdQziFa+j3",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/3kr3/8/3KQ3/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->Normally the winning process involves the queen first winning the rook by a fork and then checkmating with the king and queen, but forced checkmates with the rook still on the board are possible in some positions or against incorrect defense.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br><!--EndFragment-->Mate in 18 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "rL!Umr,.@C",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/8/8/2BBK3/8/8 w - - 0 1",
                "<!--StartFragment-->When trying to checkmate with two bishops, there are two important principles to follow. One, the bishops are best when they are near the center of the board and on adjacent diagonals. This cuts off the opposing king. Two, the king must be used aggressively, in conjunction with the bishops.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br><!--EndFragment-->Mate in 13 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "y.4@sRTNWS",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/1k1K4/8/2BN4/8/8/8 w - - 0 1",
                "<!--StartFragment-->Of the basic checkmates, this is the most difficult one to force, because the knight and bishop cannot form a linear barrier to the enemy king from a distance. The checkmate can be forced only in a corner that the bishop controls. The mating process often requires accurate play, since a few errors could result in a draw either by the fifty-move rule or stalemate.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>Mate in 10 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "o:sWow_YQj",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/3B4/3K4/8/3N4/8 w - - 0 1<!--EndFragment-->",
                "Of the basic checkmates, this is the most difficult one to force, because the knight and bishop cannot form a linear barrier to the enemy king from a distance. The checkmate can be forced only in a corner that the bishop controls. The mating process often requires accurate play, since a few errors could result in a draw either by the fifty-move rule or stalemate.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br><!--EndFragment-->Mate in 19 if played perfectly."
            ],
            "guid": "z{U>cxy,Wd",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "6k1/6p1/8/4K3/4NN2/8/8/8 w - - 0 1",
                "<!--StartFragment-->Two knights can't force checkmate by themselves, but if the enemy has a pawn, we can avoid stalemate and force mate.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>Mate in 15 if played perfectly.<!--EndFragment-->"
            ],
            "guid": "Q7#,g?uvux",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Piece_Checkmates_II"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1k6/8/BK6/3N4/8/8/8/8 b - - 75 38\"]<br><br>{ Deep analysis start after that node } 38... Ka8 { +M3 } 39. Nb4 { +M3 } ( 39. Ne7 { +M3 } 39... Kb8 { +M2 } 40. Nc6+ { +M2 } 40... Ka8 { +M1 } 41. Bb7# { +M1 } ) ( 39. Nf6 { +M3 } 39... Kb8 { +M2 } 40. Nd7+ { +M2 } 40... Ka8 { +M1 } 41. Bb7# { +M1 } ) 39... Kb8 { +M2 } 40. Nc6+ { +M2 } 40... Ka8 { +M1 } 41. Bb7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Delivering Mate<!--EndFragment-->",
                "<!--StartFragment-->&lt;h3&gt;Checkmate the opponent in 3 moves&lt;/h3&gt;&nbsp;",
                ""
            ],
            "guid": "JO@H|u}Mx!",
            "note_model_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Knight_&_Bishop_Mate"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"k7/8/BK6/3N4/8/8/8/8 b - - 0 1\"]<br><br>{ Deep analysis start after that node } 1... Kb8 { +M3 } 2. Nb4 { +M3 } ( 2. Ne7 { +M3 } 2... Ka8 { +M2 } 3. Bb7+ { +M2 } 3... Kb8 { +M1 } 4. Nc6# { +M1 } ) ( 2. Nf6 { +M3 } 2... Ka8 { +M2 } 3. Bb7+ { +M2 } 3... Kb8 { +M1 } 4. Nd7# { +M1 } ) 2... Ka8 { +M2 } 3. Bb7+ { +M2 } 3... Kb8 { +M1 } 4. Na6# { +M1 } ( 4. Nc6# { +M1 } ) *<br>",
                "",
                "<!--StartFragment-->Exercise: Delivering Mate<!--EndFragment-->",
                "<!--StartFragment-->Checkmate the opponent in 3 moves<!--EndFragment-->",
                ""
            ],
            "guid": "r}]~q&g!OK",
            "note_model_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Knight_&_Bishop_Mate"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "4k3/8/8/8/8/8/8/4KBN1 w - - 0 1",
                "&lt;iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/UpzbiSUx2_4\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;<br><!--StartFragment-->Checkmate the opponent<!--EndFragment-->"
            ],
            "guid": "f=RYBld8V(",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Knight_&_Bishop_Mate"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "4k3/8/8/8/8/8/8/4KNB1 w - - 0 1",
                "<!--StartFragment-->Can you do it with a Dark Squared Bishop?<!--EndFragment-->"
            ],
            "guid": "yFS6]vc~r|",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Knight_&_Bishop_Mate"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "1NBK4/8/8/8/8/8/8/3k4 w - - 0 1",
                "<!--StartFragment-->A change in perspective. Can you checkmate Black on h1?<!--EndFragment-->"
            ],
            "guid": "y}Zz0(D[>P",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Checkmates::Knight_&_Bishop_Mate"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"7k/8/8/4n3/4P3/8/8/6BK w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bd4 {EV: 100.0%} Kg8 {EV: 0.0%} 2. Bxe5 {EV: 100.0%} Kh7 {EV: 0.0%} (2... Kf7<br>{EV: 0.0%}) (2... Kf8 {EV: 0.0%}) *",
                "",
                "<!--StartFragment-->Set up an absolute pin #1<!--EndFragment-->",
                "<!--StartFragment-->An absolute pin is when a piece is pinned to its king and can't move without exposing its king to a check from an opposing piece on the same line or diagonal. Pin the knight to win it.<!--EndFragment-->",
                ""
            ],
            "guid": "BH:B`WI0m<",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5k2/p1p2pp1/7p/2r5/8/1P3P2/PBP3PP/1K6 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Ba3 {EV: 99.7%} Ke7 {EV: 0.5%} (1... Ke8 {EV: 0.4%} 2. Bxc5 {EV: 99.8%}) (<br>1... Kg8 {EV: 0.3%} 2. Bxc5 {EV: 99.8%}) 2. Bxc5+ {EV: 99.8%} *",
                "",
                "<!--StartFragment-->Set up an absolute pin #2<!--EndFragment-->",
                "<!--StartFragment-->Can you set up an immediate absolute pin?<!--EndFragment-->",
                ""
            ],
            "guid": "hrN!Dc41!$",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"1k6/ppp3q1/8/4r3/8/8/3B1PPP/R4QK1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bc3 {EV: 99.7%} Re1 {EV: 0.3%} 2. Qxe1 {EV: 99.8%} (2. Rxe1 {EV: 99.9%}) (2.<br>Bxg7 {EV: 99.9%}) *",
                "",
                "<!--StartFragment-->Set up a relative pin #1<!--EndFragment-->",
                "<!--StartFragment-->A relative pin is one where the piece shielded by the pinned piece is a piece other than the king, but it's typically more valuable than the pinned piece. Moving such a pinned piece is legal but may not be prudent, as the shielded piece would then be vulnerable to capture. Do you see the immediate relative pin?<!--EndFragment-->",
                ""
            ],
            "guid": "ergzcn1p3+",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4k3/6p1/5p1p/4n3/8/7P/5PP1/4R1K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. f4 {EV: 99.4%} g5 {EV: 0.9%} 2. fxe5 {EV: 99.7%} 1-0",
                "",
                "<!--StartFragment-->Exploit the pin #1<!--EndFragment-->",
                "<!--StartFragment-->Use your knowledge of pins to win a piece.<!--EndFragment-->",
                ""
            ],
            "guid": "qS=p&#X!k>",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r4rk1/pp1p1ppp/1qp2n2/8/4P3/1P1P2Q1/PBP2PPP/R4RK1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bxf6 {EV: 99.8%} g6 {EV: 0.1%} *",
                "",
                "<!--StartFragment-->Exploit the pin #2<!--EndFragment-->",
                "<!--StartFragment-->Use your knowledge of pins to win a piece.<!--EndFragment-->",
                ""
            ],
            "guid": "kG3m0b@)+_",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4r1r1/2p5/1p1kn3/p1p1R1p1/P6p/5N1P/1PP1R1PK/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Nxg5 {EV: 83.4%} Ng7 {EV: 19.0%} *",
                "",
                "<!--StartFragment-->Exploit the pin #3<!--EndFragment-->",
                "<!--StartFragment-->Use your knowledge of pins to win a pawn. From Magnus Carlsen - Arkadij Naiditsch, 2009.<!--EndFragment-->",
                ""
            ],
            "guid": "k_:b}[EvYX",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1r1n1rk1/ppq2p2/2b2bp1/2pB3p/2P4P/4P3/PBQ2PP1/1R3RK1 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qxg6+ { +M2 } 1... Bg7 { +M1 } ( 1... Kh8 { +M1 } 2. Bxf6# { +M1 } ) 2. Qxg7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Exploit the pin #4<!--EndFragment-->",
                "<!--StartFragment-->A missed tactic in Laszlo Szabo - Samuel Reshevsky, 1953.&nbsp;lichess.org/eJfXcRqt#40<!--EndFragment-->",
                ""
            ],
            "guid": "Oe$-1cgFGP",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"q5k1/5pp1/8/1pb1P3/2p4p/2P2r1P/1P3PQ1/1N3R1K b - - 0 1\"]<br>[SetUp \"1\"]<br><br>1... Rxh3+ {EV: 99.4%} 2. Kg1 {EV: 0.6%} Rg3 {EV: 99.6%} 3. Qxg3 {EV: 0.4%} hxg3<br>{EV: 99.8%} 4. Nd2 {EV: 0.3%} (4. b4 {EV: 0.2%}) *",
                "",
                "<!--StartFragment-->Exploit the pin #5<!--EndFragment-->",
                "<!--StartFragment-->Here there are multiple pins ready to be exploited. Win white's queen! From Hampyuk - Anatoly Karpov, 1965.&nbsp;lichess.org/5pHeRMhJ/black#55<!--EndFragment-->",
                ""
            ],
            "guid": "E;Pvb%s%r[",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Pin"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/1r3k2/2q1ppp1/8/5PB1/4P3/4QK2/5R2 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bf3 {EV: 99.4%} Qc3 {EV: 1.2%} (1... Qb5 {EV: 1.4%} 2. Bxb7 {EV: 99.6%}) 2.<br>Bxb7 {EV: 99.6%} *",
                "",
                "<!--StartFragment-->Relative Skewer #1<!--EndFragment-->",
                "<!--StartFragment-->A skewer is an attack upon two pieces in a line and is similar to a pin. A skewer is sometimes described as a \"reverse pin\"; the difference is that in a skewer, the more valuable piece is in front of the piece of lesser value. If the piece being attacked is not a king, then it is a Relative Skewer.<!--EndFragment-->",
                ""
            ],
            "guid": "tgloapGFQC",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r2r2k1/2p2ppp/5n2/4p3/pB2P3/P2q3P/2R2PP1/2RQ2K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Rd2 {EV: 99.4%} Qxd2 {EV: 1.2%} 2. Bxd2 {EV: 99.0%} Nxe4 {EV: 1.1%} *",
                "",
                "<!--StartFragment-->Relative Skewer #2<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "sx6:~8QLcO",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4rr1k/ppqb2p1/3b4/2p2n2/2PpBP1P/PP4P1/2QBN3/R3K2R b KQ - 0 22\"]<br>[SetUp \"1\"]<br><br>22... Rxe4 {EV: 99.2%} 23. Qxe4 {EV: 1.0%} Bc6 {EV: 99.4%} 24. Qd3 {EV: 0.7%} (<br>24. Qe6 {EV: 0.7%} Rf6 {EV: 99.8%} (24... Bxh1 {EV: 99.3%}) (24... d3 {EV:<br>98.5%})) Bxh1 {EV: 99.5%} *",
                "",
                "<!--StartFragment-->Relative Skewer #3<!--EndFragment-->",
                "<!--StartFragment-->From Magnus - Emil Schallopp, 1868.&nbsp;lichess.org/p5ue3Xq6/black#43<!--EndFragment-->",
                ""
            ],
            "guid": "CG|,uH$OiR",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/3qkb2/8/8/4KB2/5Q2/8/8 b - - 0 1\"]<br>[SetUp \"1\"]<br><br>1... Bd5+ {EV: 100.0%} 2. Ke3 {EV: 0.0%} Bxf3 {EV: 100.0%} (2... Qe6+ {EV:<br>100.0%}) (2... Qa7+ {EV: 100.0%}) *",
                "",
                "<!--StartFragment-->Absolute Skewer #1<!--EndFragment-->",
                "<!--StartFragment-->A skewer is an attack upon two pieces in a line and is similar to a pin. A skewer is sometimes described as a \"reverse pin\"; the difference is that in a skewer, the more valuable piece is in front of the piece of lesser value. If the piece being attacked is a king, then it is an Absolute Skewer. The king is said to be skewered.<!--EndFragment-->",
                ""
            ],
            "guid": "l=3P&?O-rE",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2Q5/1p4q1/p4k2/6p1/P3b3/6BP/5PP1/6K1 w - - 4 51\"]<br>[SetUp \"1\"]<br><br>51. Be5+ {EV: 99.4%} Kxe5 {EV: 0.6%} 52. Qc3+ {EV: 99.6%} Kf5 {EV: 0.4%} 53.<br>Qxg7 {EV: 99.7%} *",
                "",
                "<!--StartFragment-->Absolute Skewer #2<!--EndFragment-->",
                "<!--StartFragment-->From Nigel Short - Rafael Vaganian, 1989.&nbsp;lichess.org/NsAmcofm#100<!--EndFragment-->",
                ""
            ],
            "guid": "j;x`Y4ejR6",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5Q2/2k2p2/3bqP2/R2p4/3P1p2/2p4P/2P3P1/7K w - - 1 1\"]<br>[SetUp \"1\"]<br><br>1. Qxf7+ {EV: 99.4%} Qxf7 {EV: 0.7%} 2. Ra7+ {EV: 99.5%} Kc6 {EV: 0.5%} 3. Rxf7<br>{EV: 99.6%} *",
                "",
                "<!--StartFragment-->Absolute Skewer #3<!--EndFragment-->",
                "<!--StartFragment-->A missed tactic from Viswanathan Anand - Vassily Ivanchuk, 2005.&nbsp;lichess.org/Eq3yut7P#86<!--EndFragment-->",
                ""
            ],
            "guid": "Ox)HcFM6F)",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5k2/pp1b4/3N1pp1/3P4/2p5/q1P1QP2/5KP1/8 w - - 0 39\"]<br>[SetUp \"1\"]<br><br>39. Qh6+ {EV: 98.0%} Ke7 {EV: 2.0%} 40. Qg7+ {EV: 99.0%} Kxd6 {EV: 0.7%} (40...<br>Kd8 {EV: 1.7%} 41. Qf8+ {EV: 99.6%} Kc7 {EV: 0.4%} 42. Nb5+ {EV: 99.7%} (42.<br>Ne8+ {EV: 99.7%})) 41. Qf8+ {EV: 99.5%} Kxd5 {EV: 0.3%} 42. Qxa3 {EV: 99.8%} *",
                "",
                "<!--StartFragment-->Absolute Skewer #4<!--EndFragment-->",
                "<!--StartFragment-->From Garry Kasparov - Stefano Tatai, 1986.&nbsp;lichess.org/4g9ER3xI#76<!--EndFragment-->",
                ""
            ],
            "guid": "yi5kHW$2G#",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.02\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"6q1/6p1/2k4p/R6B/p7/8/2P3P1/2K5 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Ra8 {EV: 42.0%} Qxa8 {EV: 1.7% Qa2 is better here} 2. Bf3+ {EV: 98.6%} Kc5 {EV: 1.9%} 3. Bxa8<br>{EV: 98.2%} *",
                "",
                "<!--StartFragment-->Absolute Skewer #5<!--EndFragment-->",
                "<!--StartFragment-->A study by Henri Rinck from page 217 of the July 1903 Deutsche Schachzeitung.<!--EndFragment-->",
                ""
            ],
            "guid": "MUtIurpkUq",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Skewer"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2q3k1/8/8/5N2/6P1/7K/8/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Ne7+ {EV: 97.7%} Kh7 {EV: 1.8%} (1... Kh8 {EV: 1.8%} 2. Nxc8 {EV: 97.8%}) 2.<br>Nxc8 {EV: 98.6%} *",
                "",
                "<!--StartFragment-->Knight Fork #1<!--EndFragment-->",
                "<!--StartFragment-->A fork is a tactic whereby a single piece makes two or more direct attacks simultaneously. Most commonly two pieces are threatened, which is also sometimes called a double attack. The attacking piece is called the forking piece; the pieces attacked are said to be forked.<!--EndFragment-->",
                ""
            ],
            "guid": "s<a@vEwo>i",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"6k1/5r1p/p2N4/nppP2q1/2P5/1P2N3/PQ5P/7K w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Qh8+ {EV: 99.3%} Kxh8 {EV: 0.7%} 2. Nxf7+ {EV: 99.6%} *",
                "",
                "<!--StartFragment-->Knight Fork #2<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Tigran Vartanovich Petrosian - Boris Spassky, 1966.&nbsp;lichess.org/udysAThq#58</div></div>",
                ""
            ],
            "guid": "t-mFg($Fz9",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"7k/8/8/4b1n1/8/8/5PPP/5R1K w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. f4 {EV: 99.4%} Bxf4 {EV: 0.7%} (1... Bc7 {EV: 0.7%} 2. fxg5 {EV: 99.7%}) 2.<br>Rxf4 {EV: 99.7%} *",
                "",
                "<!--StartFragment-->Pawn Fork #1<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "p6*[eXe?;R",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r1bqkb1r/pppp1ppp/2n5/4p3/2B1N3/5N2/PPPP1PPP/R1BQK2R b KQkq - 0 2\"]<br>[SetUp \"1\"]<br><br>2... d5 {EV: 50.0%} 3. Bd3 {EV: 49.9%} dxe4 {EV: 50.6%} 4. Bxe4 {EV: 48.6%} *",
                "",
                "<!--StartFragment-->Pawn Fork #2<!--EndFragment-->",
                "<!--StartFragment-->Equalize in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "LL1d`6>(vF",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/8/b5k1/8/8/8/1K6/3R4 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Rd6+ {EV: 98.2%} Kf5 {EV: 1.8%} (1... Kf7 {EV: 1.9%} 2. Rxa6 {EV: 99.1%}) 2.<br>Rxa6 {EV: 99.3%} *",
                "",
                "<!--StartFragment-->Rook Fork #1<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "s{wuC3J2}R",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5k2/8/8/8/8/r6P/5B2/6K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bc5+ {EV: 97.8%} Kf7 {EV: 2.3%} (1... Ke8 {EV: 2.1%} 2. Bxa3 {EV: 98.7%}) 2.<br>Bxa3 {EV: 98.9%} *",
                "",
                "<!--StartFragment-->Bishop Fork #1<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "eVh$-0*7Ef",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4k2r/2n2p1p/6p1/3n4/5Q2/8/5PPP/6K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Qe5+ {EV: 98.7%} Kd7 {EV: 1.6%} (1... Kf8 {EV: 1.5%} 2. Qxh8+ {EV: 99.4%}) 2.<br>Qxh8 {EV: 99.0%} *",
                "",
                "<!--StartFragment-->Queen Fork #1<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "whJvsRxNL?",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r3k3/7p/6p1/5p2/5r2/2NP4/PPP2PPP/R5K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Nd5 {EV: 99.6%} Rfa4 {EV: 0.6%} 2. Nc7+ {EV: 99.7%} Kd7 {EV: 0.4%} (2... Kd8<br>{EV: 0.4%} 3. Nxa8 {EV: 99.8%} Rxa8 {EV: 0.2%}) 3. Nxa8 {EV: 99.9%} Rxa8 {EV:<br>0.1%} *",
                "",
                "<!--StartFragment-->Double Attack #1<!--EndFragment-->",
                "<!--StartFragment-->A fork is often also called a double attack, because it usually attacks two targets. A fork can of course attack more than two targets, and the targets don't have to be pieces. Direct mating threats, or even an implied threat can also be excellent targets for a fork. In this position, you can fork an undefended piece and a second implied threat.<!--EndFragment-->",
                ""
            ],
            "guid": "E;qT>r9j_f",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3r1k2/pp1n2pb/q1p1Qp2/2P2r2/3Pp1Np/P1P1B2P/6P1/1R1R2K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Nh6 {EV: 100.0%} Qc4 {EV: 0.0%} (1... gxh6 {EV: 0.0%} 2. Bxh6# {EV: 100.0%})<br>2. Qxc4 {EV: 100.0%} gxh6 {EV: 0.0%} *",
                "",
                "<!--StartFragment-->Double Attack #2<!--EndFragment-->",
                "<!--StartFragment--><div><div>In this position, you can fork an undefended piece and a direct mate threat. From Hans-Dieter Mueller vs Arlette van Weersel, 2001.&nbsp;lichess.org/j0DVxaHt#46</div></div>",
                ""
            ],
            "guid": "J?=Yhil}C@",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/5pk1/8/4p3/pp1qPn2/5P2/PP2B3/2Q2K2 b - - 0 1\"]<br>[SetUp \"1\"]<br><br>1... Qg1+ {EV: 99.3%} 2. Kxg1 {EV: 0.8%} Nxe2+ {EV: 99.4%} 3. Kf2 {EV: 0.7%} (<br>3. Kf1 {EV: 1.0%} Nxc1 {EV: 99.5%}) Nxc1 {EV: 99.7%} *",
                "",
                "<!--StartFragment-->Fork Challenge #1 N<!--EndFragment-->",
                "<!--StartFragment-->From Alexander Kazimirovich Tolush - Vladimir Simagin, 1952.&nbsp;lichess.org/W6EGJjnM/black#73<!--EndFragment-->",
                ""
            ],
            "guid": "G24oN?d[#*",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4k3/R4br1/8/p3P3/4N3/5K2/8/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Nd6+ {EV: 97.2%} Kf8 {EV: 2.5%} 2. Ra8+ {EV: 98.3%} Ke7 {EV: 1.8%} 3. Nf5+<br>{EV: 98.5%} Ke6 {EV: 1.5%} 4. Nxg7+ {EV: 98.7%} *",
                "",
                "<!--StartFragment-->Fork Challenge #2 N<!--EndFragment-->",
                "<!--StartFragment-->From Magnus Carlsen - Nigel Short, 2004.&nbsp;lichess.org/0nBTFUsN#100<!--EndFragment-->",
                ""
            ],
            "guid": "i6=XzYse,)",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r5k1/ppp2p1p/6pB/4n2n/3bPp1q/2NB3P/PPP3PK/R2Q1R2 b - - 1 1\"]<br>[SetUp \"1\"]<br><br>1... f3 {EV: 96.0%} 2. Rxf3 {EV: 3.5%} Ng4+ {EV: 97.4% -- Pawn is pinned} 3. Kh1 {EV: 2.6%} Ng3+<br>{EV: 98.1%} 4. Rxg3 {EV: 55.8%} Nf2+ {EV: 97.9%} 5. Kh2 {EV: 1.8%} Nxd1 {EV:<br>98.5%} *",
                "",
                "<!--StartFragment-->Fork Challenge #3 N<!--EndFragment-->",
                "<!--StartFragment-->From Harris - Sunil Weeramantry, 1972.&nbsp;lichess.org/tKbgRJNb/black#31<!--EndFragment-->",
                ""
            ],
            "guid": "jQ9jGlAQf~",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/1q6/p3p1k1/2P1Q2p/P3P2P/2P5/4r1PK/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Qg5+ {EV: 99.2%} Kh7 {EV: 1.0%} (1... Kf7 {EV: 1.1%} 2. Qxh5+ {EV: 99.3%} Kg7<br>{EV: 0.5%} 3. Qxe2 {EV: 99.7%}) 2. Qxh5+ {EV: 99.3%} Kg7 {EV: 0.4%} 3. Qxe2 {EV:<br>99.8%} *",
                "",
                "<!--StartFragment-->Fork Challenge #4 Q<!--EndFragment-->",
                "<!--StartFragment-->From Peter Leko - Vladimir Kramnik, 2007.&nbsp;lichess.org/s32V9MIZ#97<!--EndFragment-->",
                ""
            ],
            "guid": "epPM2~n%;`",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5Bk1/1b1r2p1/q4p1p/2Q5/2P5/6PP/P4P2/4R1K1 b - - 0 31\"]<br>[SetUp \"1\"]<br><br>31... Qe6 {EV: 100.0%} 32. Qb4 {EV: 0.0%} Qxh3 {EV: 100.0%} 33. Qxb7 {EV: 0.5% as Qg2 and Qh1 were both mate}<br>Rxb7 {EV: 100.0%} *",
                "",
                "<!--StartFragment-->Fork Challenge #5 Q<!--EndFragment-->",
                "<!--StartFragment-->Can you make multiple mate threats with one move? A missed tactic from Jon Ludvig Hammer - Viswanathan Anand, 2010.&nbsp;lichess.org/j5A0iTBc/black#61<!--EndFragment-->",
                ""
            ],
            "guid": "I<f$eF}ITj",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r1bq1rk1/3np1bp/p2p1pp1/1PpP3n/4PP1B/2N2Q2/PP1N2PP/R3KB1R b KQ - 1 1\"]<br>[SetUp \"1\"]<br><br>1... Nxf4 {EV: 73.0%} 2. Qxf4 {EV: 26.6%} g5 {EV: 72.8%} 3. Qg3 {EV: 27.5%} (3.<br>Qf2 {EV: 26.1%} gxh4 {EV: 74.9%}) gxh4 {EV: 69.3%} *",
                "",
                "<!--StartFragment-->Fork Challenge #6 P<!--EndFragment-->",
                "<!--StartFragment-->From Viktor Korchnoi - John Nunn, 1988.&nbsp;lichess.org/XZoaqOcH#23<!--EndFragment-->",
                ""
            ],
            "guid": "KAteQn1^ha",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"4b1rr/4k1p1/4pp1n/pp1pP1RP/2pP1R2/P1P2B1N/2PK1P2/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Rxg7+ {EV: 65.3%} Rxg7 {EV: 35.3%} 2. exf6+ {EV: 64.1%} Kf8 {EV: 36.4%} 3.<br>fxg7+ {EV: 63.5%} *",
                "",
                "<!--StartFragment-->Fork Challenge #7 P<!--EndFragment-->",
                "<!--StartFragment-->From Judit Polgar vs Viktor Korchnoi, 2006.&nbsp;lichess.org/91HG45EO#60<!--EndFragment-->",
                ""
            ],
            "guid": "AW1;Av]JuW",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::The_Fork"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5q2/3k2pp/8/8/8/5N2/6PP/5RK1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Ne5+ {EV: 99.4%} Ke8 {EV: 1.0%} (1... Ke7 {EV: 0.5%} 2. Rxf8 {EV: 99.7%} Kxf8<br>{EV: 0.3%}) 2. Rxf8+ {EV: 99.7%} Kxf8 {EV: 0.4%} *",
                "",
                "<!--StartFragment-->Discovered Attack #1<!--EndFragment-->",
                "<!--StartFragment-->A Discovered Attack is an attack that is revealed when one piece moves out of the way of another. Discovered Attacks can be extremely powerful, as the piece moved can make a threat independently of the piece it reveals. Like many chess tactics, they succeed because the opponent is unable to meet two threats at once. While typically the consequence of a discovered attack is the gain of material, they do not have to do this to be effective; the tactic can be used merely to gain a tempo.<!--EndFragment-->",
                ""
            ],
            "guid": "k(U^t,/KiZ",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5k2/3q2pp/8/8/8/5N2/6PP/5RK1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Ne5+ {EV: 99.7%} Qf7 {EV: 0.3%} 2. Nxf7 {EV: 99.7%} (2. Rxf7+ {EV: 99.9%}) *",
                "",
                "<!--StartFragment-->Discovered Check #1<!--EndFragment-->",
                "<!--StartFragment-->When a Discovered Attack is a check, it is called a Discovered Check.<!--EndFragment-->",
                ""
            ],
            "guid": "ecOV428eID",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r4k2/2r2pp1/7p/3P4/4B3/5N2/6PP/5RK1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. d6 {EV: 99.7%} Rca7 {EV: 0.4%} (1... Raa7 {EV: 0.5%} 2. dxc7 {EV: 99.9%}) 2.<br>Bxa8 {EV: 100.0%} Rxa8 {EV: 0.2%} *",
                "",
                "<!--StartFragment-->Discovered Attack #2<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position in 2 moves<!--EndFragment-->",
                ""
            ],
            "guid": "vp$B}<H/^9",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"r2q1bnr/pp2k1pp/3p1p2/1Bp1N1B1/8/2Pp4/PP3PPP/RN1bR1K1 w - - 0 12\"]<br>[SetUp \"1\"]<br><br>12. Ng6+ {EV: 100.0%} Kf7 {EV: 0.0%} 13. Nxh8# {EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Discovered Check #2<!--EndFragment-->",
                "<!--StartFragment-->From William Norwood Potter - Matthews, 1868.&nbsp;lichess.org/2anOpAbw#22<!--EndFragment-->",
                ""
            ],
            "guid": "FsZ5KM#[eC",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r1b2rk1/ppqn1pbp/5np1/3p4/3BP3/1P1B1P1P/P2N2PN/R2Q1RK1 b - - 0 14\"]<br>[SetUp \"1\"]<br><br>14... Nxe4 {EV: 98.6%} 15. fxe4 {EV: 2.3%} Bxd4+ {EV: 98.0%} 16. Kh1 {EV: 2.0%}<br>Bxa1 {EV: 98.3%} *",
                "",
                "<!--StartFragment-->Discovered Attack #3<!--EndFragment-->",
                "<!--StartFragment-->From Marianna Bagdasarova - Ksenya Rybenko, 1998.&nbsp;lichess.org/cuznrJLK/black#27<!--EndFragment-->",
                ""
            ],
            "guid": "E{c8[l@m#R",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3k4/7R/p2P4/2p1b3/8/2P3rB/P4r2/1K2R3 w - - 3 41\"]<br>[SetUp \"1\"]<br><br>41. Rd7+ {EV: 98.3%} Ke8 {EV: 1.7%} (41... Kc8 {EV: 1.8%} 42. Rf7+ {EV: 99.4%}<br>Rxh3 {EV: 1.1%} 43. Rxf2 {EV: 99.2%}) 42. Rxe5+ {EV: 98.5%} Kf8 {EV: 0.8%} *",
                "",
                "<!--StartFragment-->Discovered Check #3<!--EndFragment-->",
                "<!--StartFragment-->From Viswanathan Anand - Vladimir Kramnik, 2005.&nbsp;lichess.org/UC3BHPaB#80<!--EndFragment-->",
                ""
            ],
            "guid": "v=@ntX~b9",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"8/8/4np2/4pk1p/RNr4P/P3KP2/1P6/8 w - - 1 1\"]<br>[SetUp \"1\"]<br><br>1. Nd5 {EV: 100.0%} Rxa4 {EV: 0.0%} (1... Nc7 {EV: 0.8%} 2. Ne7+ {EV: 99.6%} (<br>2. Rxc4 {EV: 99.7%})) (1... Rc7 {EV: 0.7%} 2. Nxc7 {EV: 99.7%} Nxc7 {EV: 0.4%})<br>2. Ne7# {EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Discovered Attack #4<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Mikhail Tal - Orest Averkin, 1973.&nbsp;lichess.org/zaDiVEsD#138</div></div>",
                ""
            ],
            "guid": "b6rJbD5~]X",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"r1bq2rk/1p1p4/p1n1pPQp/3n4/4N3/1N1Bb3/PPP3PP/R4R1K w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Qh7+ {EV: 100.0%} Kxh7 {EV: 0.0%} 2. Ng5+ {EV: 100.0%} Kh8 {EV: 0.0%} 3. Nf7#<br>{EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Discovered Check #4<!--EndFragment-->",
                "<!--StartFragment-->From Jiri Lechtynsky - Ludek Pachman, 1968.&nbsp;lichess.org/Ucsc66uS#36<!--EndFragment-->",
                ""
            ],
            "guid": "JT|iyiaE@L",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/1b1Q1ppk/p2bp2p/1p1q4/3Pp3/1P2B1P1/P6P/2R3K1 b - - 0 1\"]<br>[SetUp \"1\"]<br><br>1... Bf4 {EV: 99.2%} 2. Qxd5 {EV: 0.9%} Bxe3+ {EV: 99.2%} 3. Kf1 {EV: 0.7%} Bxd5<br>{EV: 99.7%} *",
                "",
                "<!--StartFragment-->Discovered Attack #5<!--EndFragment-->",
                "<!--StartFragment-->From Yasser Seirawan - Alexey Shirov, 1993.&nbsp;lichess.org/3JbmphQz/black#63<!--EndFragment-->",
                ""
            ],
            "guid": "L[Xl3M1(Zj",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3r4/1R1P1k1p/1p1q2p1/1Pp5/2P5/6P1/4Q1KP/8 w - - 6 51\"]<br>[SetUp \"1\"]<br><br>51. Qe8+ {EV: 99.7%} Rxe8 {EV: 0.1%} 52. d8=Q+ {EV: 100.0%} Qe7 {EV: 0.5%} (<br>52... Re7 {EV: 0.2%} 53. Qxd6 {EV: 100.0%} Rxb7 {EV: 0.4%}) 53. Rxe7+ {EV:<br>100.0%} Rxe7 {EV: 0.5%} *",
                "",
                "<!--StartFragment-->Discovered Check #5<!--EndFragment-->",
                "<!--StartFragment-->From Viktor Korchnoi - Piet Bakker, 1976.&nbsp;lichess.org/Wcbzm3HB#100<!--EndFragment-->",
                ""
            ],
            "guid": "yXe4I^Tav@",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Discovered_Attack"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"k1q5/1pp5/8/8/N7/8/8/R5K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Nb6+ {EV: 100.0%} Kb8 {EV: 0.0%} 2. Ra8# {EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Double Check Introduction<!--EndFragment-->",
                "<!--StartFragment-->A Double Check is when two pieces are delivering check simultaneously. A Double Check is generally more powerful than a normal check, because the opponent can only respond with a king move. (The pieces that are delivering check cannot both be captured or blocked with one move.)<!--EndFragment-->",
                ""
            ],
            "guid": "r}w>A}b(ya",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"0-1\"]<br>[FEN \"r3k2r/ppp2pp1/2np4/2B1p2n/2B1P1Nq/3P4/PPP2PP1/RN1Q1RK1 b kq - 0 11\"]<br>[SetUp \"1\"]<br><br>11... Qh1+ {EV: 100.0%} 12. Kxh1 {EV: 0.0%} Ng3+ {EV: 100.0%} 13. Kg1 {EV: 0.0%}<br>Rh1# {EV: 100.0%} 0-1",
                "",
                "<!--StartFragment-->Double Check #1<!--EndFragment-->",
                "<!--StartFragment-->From Schwartz - Carl Hartlaub, 1918.&nbsp;lichess.org/GayW3mMD/black#21<!--EndFragment-->",
                ""
            ],
            "guid": "e^X#yY~,T/",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"rn2kb1r/pp2pp1p/2p2p2/8/8/3Q1N2/qPPB1PPP/2KR3R w kq - 0 13\"]<br>[SetUp \"1\"]<br><br>13. Qd8+ {EV: 100.0%} Kxd8 {EV: 0.0%} 14. Ba5+ {EV: 100.0%} Kc8 {EV: 0.0%} (<br>14... Ke8 {EV: 0.0%} 15. Rd8# {EV: 100.0%}) 15. Rd8# {EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Double Check #2<!--EndFragment-->",
                "<!--StartFragment-->From Georges Koltanowski - Arthur Dunkelblum, 1923.&nbsp;lichess.org/37PDqoGW#24<!--EndFragment-->",
                ""
            ],
            "guid": "L}$=zP&u$O",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"r4k2/pppb1Pp1/2np3p/2b5/2B2Bnq/2N5/PP2Q1PP/4RR1K w - - 6 17\"]<br><br>{ Deep analysis start after that node } 17. Qe8+ { +M3 } 17... Rxe8 { +M2 } ( 17... Bxe8 { +M2 } 18. fxe8=Q+ { +M2 } ( 18. fxe8=R+ { +M2 } 18... Rxe8 { +M1 } 19. Bxd6# { +M1 } ) 18... Rxe8 { +M1 } 19. Bxd6# { +M1 } ) 18. fxe8=Q+ { +M2 } ( 18. fxe8=R+ { +M2 } 18... Bxe8 { +M1 } 19. Bxd6# { +M1 } ) 18... Bxe8 { +M1 } 19. Bxd6# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Double Check #3<!--EndFragment-->",
                "<!--StartFragment-->From Rudolf Rezso Charousek - Jakob Wollner, 1893.&nbsp;lichess.org/asjHTsB9#32<!--EndFragment-->",
                ""
            ],
            "guid": "Lx}C##yz1m",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"3r2k1/pp5p/6p1/2Ppq3/4Nr2/4B2b/PP2P2K/R1Q1R2B b - - 0 26\"]<br><br>{ Deep analysis start after that node } 26... Rf2+ { -M4 } 27. Kxh3 { -M3 } 27... Rh2+ { -M3 } 28. Kg4 { -M2 } 28... h5+ { -M2 } 29. Kf3 { -M1 } 29... dxe4# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Double Check #4<!--EndFragment-->",
                "<!--StartFragment-->From Milorad Kapelan - James Tarjan, 1983.&nbsp;lichess.org/lFzMne1R/black#51<!--EndFragment-->",
                ""
            ],
            "guid": "gQQpizF<Jh",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r3k2r/2q1np1p/p3P1p1/1p2p3/8/2PBB3/P1PR2PP/5RK1 w kq - 0 21\"]<br>[SetUp \"1\"]<br><br>21. exf7+ {EV: 98.6%} Kd7 {EV: 1.5%} 22. Bf5+ {EV: 99.3%} Kc6 {EV: 0.7%} 23.<br>Be4+ {EV: 99.5%} Nd5 {EV: 0.5%} 24. Bxd5+ {EV: 99.4%} (24. Rxd5 {EV: 99.9% Interesting Line} Qe7<br>{EV: 0.9%} 25. Rxe5+ {EV: 99.7%} (25. Bc5 {EV: 99.3%})) Kd6 {EV: 0.6%} 25. Bxa8+<br>{EV: 99.7%} *",
                "",
                "<!--StartFragment-->Double Check #5<!--EndFragment-->",
                "<!--StartFragment-->From Mikhail Tal - Alexey Suetin, 1969.&nbsp;lichess.org/SlTJaflO#40<!--EndFragment-->",
                ""
            ],
            "guid": "bx_R5^~TpY",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Double_Check"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"6k1/5pp1/4b1n1/8/8/3BR3/5PPP/6K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bxg6 {EV: 100.0%} fxg6 {EV: 0.4%} 2. Rxe6 {EV: 99.8%} *",
                "",
                "<!--StartFragment-->Overloaded #1<!--EndFragment-->",
                "<!--StartFragment-->A piece is Overloaded (also known as \"overworked\") if it has more than one responsibility, e.g. defending a piece, defending a square, blocking a check, and blockading a piece. In this example, the f7 pawn has at least two responsibilities; it is protecting the bishop on e6, but it is also protecting the knight on g6. Can you exploit this double responsibility?<!--EndFragment-->",
                ""
            ],
            "guid": "eV?X*b0fao",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2r1rbk1/5pp1/3P1n2/8/8/3Q3P/2B2PPK/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. d7 {EV: 97.2%} Rcd8 {EV: 3.4%} 2. dxe8=Q {EV: 97.1%} Rxe8 {EV: 2.2%} (2...<br>Rxd3 {EV: 3.8%}) *",
                "",
                "<!--StartFragment-->Overloaded #2<!--EndFragment-->",
                "<!--StartFragment-->In this example, the f6 knight has two responsibilities. One of those responsibilities is more important than the other. Can you exploit the situation?<!--EndFragment-->",
                ""
            ],
            "guid": "nR}^l#;|-.",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2b5/7p/3k2pP/1p1p1pP1/1P1P1K2/8/5P2/3B4 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Bh5 {EV: 98.9%} gxh5 {EV: 1.1%} (1... Be6 {EV: 1.4%} 2. Bxg6 {EV: 99.3%} Bg8<br>{EV: 0.9%} (2... hxg6 {EV: 0.8%} 3. h7 {EV: 99.5%}) 3. Bxf5 {EV: 99.3%} Ke7 {EV:<br>0.8%} 4. g6 {EV: 99.5%} (4. Ke5 {EV: 99.3%})) 2. g6 {EV: 98.9%} hxg6 {EV: 0.9%}<br>3. h7 {EV: 99.5%} *",
                "",
                "<!--StartFragment-->Overloaded #3<!--EndFragment-->",
                "<!--StartFragment-->In this example, the h7 pawn has two responsibilities. Can you exploit the situation? From Alexander Grischuk - Evgeny Alekseev, 2008.&nbsp;lichess.org/yOyudklB#104<!--EndFragment-->",
                ""
            ],
            "guid": "qkce.l(=L+",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3q3k/pp2b1pp/8/2P5/1P2RBQ1/2P5/P4rPp/7K w - - 2 29\"]<br>[SetUp \"1\"]<br><br>29. Rxe7 {EV: 100.0%} Qf8 {EV: 0.5%} (29... Rf1+ {EV: 0.0%} 30. Kxh2 {EV: 79.8%}<br>) (29... Qxe7 {EV: 0.0%} 30. Qc8+ {EV: 100.0%} Qe8 {EV: 0.0%} (30... Qf8 {EV:<br>0.0%} 31. Qxf8# {EV: 100.0%}) (30... Qd8 {EV: 0.0%} 31. Qxd8# {EV: 100.0%}) 31.<br>Qxe8# {EV: 100.0%}) 30. Qf5 {EV: 100.0%} (30. Re4 {EV: 100.0%}) (30. Bd6 {EV:<br>100.0%}) *",
                "",
                "<!--StartFragment-->Overloaded #4<!--EndFragment-->",
                "<!--StartFragment-->From Jose Raul Capablanca - Rudolf Spielmann, 1911.&nbsp;lichess.org/QN4PcsKD#56<!--EndFragment-->",
                ""
            ],
            "guid": "kGl>1z&9;S",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/1Q1rkpp1/p3p3/3nB1r1/8/3q3P/PP3R2/K1R5 w - - 2 34\"]<br>[SetUp \"1\"]<br><br>34. Rxf7+ {EV: 97.2%} Kxf7 {EV: 3.0%} 35. Qxd7+ {EV: 97.4%} Kg6 {EV: 3.3%} 36.<br>Qxg7+ {EV: 93.2%} Kf5 {EV: 4.1%} *",
                "",
                "<!--StartFragment-->Overloaded #5<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Shakhriyar Mamedyarov - Peter Svidler, 2009.&nbsp;lichess.org/ctDrrcM6#66</div></div>",
                ""
            ],
            "guid": "s5k:gq-)+k",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3r2k1/pb1r1pp1/1pn2q1p/3B4/6Q1/P4NP1/1P3PP1/3RR1K1 w - - 7 23\"]<br>[SetUp \"1\"]<br><br>23. Qxd7 {EV: 98.3%} Rxd7 {EV: 1.9%} 24. Re8+ {EV: 98.8%} Kh7 {EV: 1.2%} 25.<br>Be4+ {EV: 99.4%} g6 {EV: 0.6%} 26. Rxd7 {EV: 99.7%} *",
                "",
                "<!--StartFragment-->Overloaded #6<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Garry Kasparov - Anatoly Karpov, 1985.&nbsp;lichess.org/iK5KRqtZ#44</div></div>",
                ""
            ],
            "guid": "b24eyN:jTU",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2Q5/1p3p1k/p2prPq1/8/7p/8/PP3RP1/6K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Qxe6 {EV: 98.8%} fxe6 {EV: 0.8%} 2. f7 {EV: 99.5%} Qb1+ {EV: 1.2%} 3. Kh2<br>{EV: 99.7%} Qe1 {EV: 0.2%} (3... Qd3 {EV: 0.8%} 4. f8=Q {EV: 100.0%}) 4. f8=Q<br>{EV: 100.0%} *",
                "",
                "<!--StartFragment-->Overloaded #7<!--EndFragment-->",
                "<!--StartFragment-->From Boris Spassky - Bent Larsen, 1969.&nbsp;lichess.org/YgaPGPCz#130<!--EndFragment-->",
                ""
            ],
            "guid": "poJ@!RA-ph",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5k1r/p4p2/3Np2p/3bP3/8/3RBPb1/1r4P1/2R3K1 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Rxd5 {EV: 96.6%} exd5 {EV: 3.3%} (1... Rb3 {EV: 4.1%} 2. Bxa7 {EV: 97.0%}<br>exd5 {EV: 3.1%} 3. Nf5 {EV: 97.7%} Ke8 {EV: 3.4%} (3... Bxe5 {EV: 0.0%} 4. Rc8#<br>{EV: 100.0%}) 4. Nxg3 {EV: 98.2%}) 2. Nf5 {EV: 96.9%} Ke8 {EV: 3.8%} 3. Nxg3<br>{EV: 95.6%} *",
                "",
                "<!--StartFragment-->Overloaded #8<!--EndFragment-->",
                "<!--StartFragment-->From Yury Shulman - Loek van Wely, 2009.&nbsp;lichess.org/Jgay9DvA#54<!--EndFragment-->",
                ""
            ],
            "guid": "C|G+Oz$KhI",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces",
                "random_example"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3r2k1/1pp4p/p1n1q1p1/2Q5/1P2B3/P3P1Pb/3N1R1P/6K1 b - - 1 1\"]<br>[SetUp \"1\"]<br><br>1... Qxe4 {EV: 100.0%} 2. b5 {EV: 0.6%} (2. Qf8+ {EV: 0.0%} Rxf8 {EV: 99.2%} 3.<br>Nxe4 {EV: 0.0%} (3. Rxf8+ {EV: 0.0%} Kxf8 {EV: 100.0%} 4. Nxe4 {EV: 0.3%})) (2.<br>Nxe4 {EV: 0.0%} Rd1+ {EV: 100.0%} 3. Rf1 {EV: 0.0%} Rxf1# {EV: 100.0%}) axb5<br>{EV: 100.0%} (2... Qe7 {EV: 99.6%}) (2... Qe5 {EV: 99.4%}) 3. Qxb5 {EV: 0.2%} *",
                "",
                "<!--StartFragment-->Overloaded #9<!--EndFragment-->",
                "<!--StartFragment-->From Viktor Korchnoi - Irina Krush, 2007.&nbsp;lichess.org/rL6AKS42/black#53<!--EndFragment-->",
                ""
            ],
            "guid": "v`.a7*?bQ0",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r7/2k1Pp1p/p1n2p2/P1b1r3/2p5/2P3P1/5P1P/1R1Q2K1 w - - 2 29\"]<br>[SetUp \"1\"]<br><br>29. Rb7+ {EV: 98.2%} Kxb7 {EV: 1.8%} 30. Qd7+ {EV: 98.6%} Kb8 {EV: 1.4%} 31.<br>e8=Q+ {EV: 99.0%} Rxe8 {EV: 1.1%} 32. Qxe8+ {EV: 99.2%} Kb7 {EV: 0.9%} *",
                "",
                "<!--StartFragment-->Overloaded #10<!--EndFragment-->",
                "<!--StartFragment-->Get a winning position<!--EndFragment-->",
                ""
            ],
            "guid": "va$%F6K_gM",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Overloaded_Pieces"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"rBbqk2r/pp3ppp/5n2/8/1bpP4/8/PP2B1PP/RN1Q1KNR b kq - 0 9\"]<br>[SetUp \"1\"]<br><br>9... Nd5 {EV: 92.0%} 10. Kf2 {EV: 8.8% --- to stop Ne3 Winning the queen} Rxb8 {EV: 91.3%} 11. Bxc4 {EV: 8.8%} *",
                "",
                "<!--StartFragment-->Zwischenzug<!--EndFragment-->",
                "<!--StartFragment--><div><div>Whether you call it Zwischenzug (from German), Intermezzo (from Italian), an intermediate move or just an in-between move, it's all the same thing. It's a very common tactic that you need to know because it happens in almost all chess games. A Zwischenzug is when a player, instead of playing the expected move, often a recapture, plays another move that makes an immediate threat that the opponent must answer, before playing the original expected move.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>&nbsp;In this Savielly Tartakower - Jose Raul Capablanca game from 1924, Tartakower just played Bxb8. Instead of recapturing immediately with Rxb8, can you find a better move that makes a strong threat?</div></div>",
                ""
            ],
            "guid": "iEde5gaA83",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Zwischenzug"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2r2rk1/pp1b1ppp/1q2p3/3pP3/1B3Pn1/3B1N2/P3Q1PP/RN2KR2 b Q - 0 16\"]<br>[SetUp \"1\"]<br><br>16... Rc1+ {EV: 95.4%} 17. Kd2 {EV: 4.0%} Rxf1 {EV: 96.9%} 18. Qxf1 {EV: 3.6%}<br>Qxb4+ {EV: 97.1%} 19. Ke2 {EV: 4.3%} (19. Nc3 {EV: 3.9%}) *",
                "",
                "<!--StartFragment-->Zwischenschach<!--EndFragment-->",
                "<!--StartFragment-->A Zwischenzug that is also a check, is called a Zwischenschach, Zwischen-check, or simply an in-between check. Instead of recapturing with Qxb4 immediately, find the Zwischenschach in this Samuel Rosenthal - Cecil Valentine De Vere game from 1867.&nbsp;lichess.org/zMWc1wG6/black#31<!--EndFragment-->",
                ""
            ],
            "guid": "Bl=X2_a{G<",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Zwischenzug"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r1b5/4kq2/p1Bbp1Qp/6p1/8/4B1P1/PPP4P/6K1 w - - 0 29\"]<br>[SetUp \"1\"]<br><br>29. Qxh6 {EV: 98.6%} Bd7 {EV: 1.7%} (29... Rb8 {EV: 0.0%} 30. Bxg5+ {EV: 100.0%}<br>Qf6 {EV: 0.0%} 31. Qxf6# {EV: 100.0%} (31. Bxf6+ {EV: 100.0%})) 30. Qxg5+ {EV:<br>98.4%} (30. Bxa8 {EV: 98.8%}) Ke8 {EV: 1.1%} 31. Bxa8 {EV: 99.4%} *",
                "",
                "<!--StartFragment-->Zwischenzug Challenge #1<!--EndFragment-->",
                "<!--StartFragment-->From Wolfgang Unzicker - Mikhail Tal, 1975.&nbsp;lichess.org/RD9GHrw7#56<!--EndFragment-->",
                ""
            ],
            "guid": "C*&(v?s9M!",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Zwischenzug"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2r3k1/q5pp/4p3/2rp1p2/1p1B1P2/1P1QP3/P1R3PP/6K1 w - - 2 28\"]<br>[SetUp \"1\"]<br><br>28. Qb5 {EV: 98.1%} Rxc2 {EV: 3.5%} (28... Rxb5 {EV: 1.5%} 29. Rxc8+ {EV: 99.4%}<br>Kf7 {EV: 0.6%} 30. Bxa7 {EV: 99.6%} Ra5 {EV: 0.5%}) 29. Bxa7 {EV: 98.0%} Rxa2<br>{EV: 2.2%} (29... h6 {EV: 2.6%}) (29... Rd2 {EV: 2.1%}) (29... Rc1+ {EV: 1.4%})<br>*",
                "",
                "<!--StartFragment-->Zwischenzug Challenge #2<!--EndFragment-->",
                "<!--StartFragment-->From Alexander Kotov - Ratmir Kholmov, 1971.&nbsp;lichess.org/3UjpBuI2#54<!--EndFragment-->",
                ""
            ],
            "guid": "s?D[@eRyvU",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Zwischenzug"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2r2r1k/1pN1Qpbp/p4pp1/qb6/8/1B6/PP3PPP/2RR2K1 w - - 10 23\"]<br>[SetUp \"1\"]<br><br>23. Be6 {EV: 94.4%} Rb8 {EV: 6.2%} 24. Bxf7 {EV: 94.3%} Bc6 {EV: 10.2%} 25. Ne6<br>{EV: 91.8%} Qe5 {EV: 7.4%} *",
                "",
                "<!--StartFragment-->Zwischenzug Challenge #3<!--EndFragment-->",
                "<!--StartFragment-->From Boris Gelfand - Peter Svidler, 1996.&nbsp;lichess.org/NHlSxdZz#44<!--EndFragment-->",
                ""
            ],
            "guid": "F#T[z3}U3)",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Basic_Tactics::Zwischenzug"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"1-0\"]<br>[FEN \"3k4/8/2K5/7R/8/8/8/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Re5 {EV: 100.0%} Kc8 {EV: 0.0%} 2. Re8# {EV: 100.0%} 1-0",
                "",
                "<!--StartFragment-->Zugzwang #1<!--EndFragment-->",
                "<!--StartFragment--><div><div>The word \"Zugzwang\" comes from German, and means \"being forced to make a move\". A player is in Zugzwang when it's their turn and every possible move makes their position worse. -- In the above example, if black would only move his king to c8 then Rook to the back rank would be check mate, you can force the king to c8 by simply taking away every other option.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>White to play, mate in 2.</div></div>",
                ""
            ],
            "guid": "M[jbO7e:.8",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Zugzwang"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"0-1\"]<br>[FEN \"5rk1/6n1/8/7p/4q1pP/6P1/6RQ/6NK b - - 0 1\"]<br>[SetUp \"1\"]<br><br>1... Rf1 {EV: 100.0%} 2. Qh3 {EV: 0.0%} gxh3 {EV: 100.0%} 3. Kh2 {EV: 0.0%} (3.<br>g4 {EV: 0.0%} Qxg2# {EV: 100.0%}) Qxg2# {EV: 100.0%} 0-1",
                "",
                "<!--StartFragment-->Zugzwang #2<!--EndFragment-->",
                "<!--StartFragment-->Here you can use Zugzwang to force checkmate. How cool is that?<!--EndFragment-->",
                ""
            ],
            "guid": "CY_Oqi.YFo",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Zugzwang"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/3k4/1p1p4/1P6/2P1K3/8/8 w - - 0 1",
                "<!--StartFragment-->Use your knowledge of Zugzwang to promote one of your pawns safely.<!--EndFragment-->"
            ],
            "guid": "tN=lZf^oj9",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Zugzwang"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1k1b4/2n5/1K6/4B3/6B1/8/8/8 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Bd7 { +M4 } 1... Ka8 { +M3 } 2. Bc6+ { +M3 } 2... Kb8 { +M2 } 3. Bb7 { +M2 } 3... Be7 { +M1 } ( 3... Bf6 { +M1 } 4. Bxc7# { +M1 } ) ( 3... Bg5 { +M1 } 4. Bxc7# { +M1 } ) ( 3... Bh4 { +M1 } 4. Bxc7# { +M1 } ) 4. Bxc7# { +M1 } *<br>",
                "",
                "<!--StartFragment-->Zugzwang #4<!--EndFragment-->",
                "<!--StartFragment-->From an endgame composition by Goldberg, published in 1931.<!--EndFragment-->",
                ""
            ],
            "guid": "g80/Pi2JqT",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Zugzwang"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"1r2r1k1/p1pbqppp/Q2b1n2/3p4/P2P4/2P5/1P2BPPP/R1B1KN1R b KQ - 2 14\"]<br>[SetUp \"1\"]<br><br>14... Bb5 {EV: 100.0%} 15. Be3 {EV: 0.0%} (15. Qxb5 {EV: 0.0%} Rxb5 {EV: 100.0%}<br>) Bxa6 {EV: 100.0%} *<br><!--EndFragment-->",
                "",
                "<!--StartFragment-->Interference Introduction<!--EndFragment-->",
                "Interference occurs when the line between an attacked piece and its defender is interrupted by sacrificially interposing a piece - typically on a protected square.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>In this position, Black threatens mate on e2, but White's queen is protecting that square. Can you make a bishop move to interfere with this defense?<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>From Adolf Jay Fink - Alexander Alekhine, 1932. lichess.org/P6MkWJmU/black#27",
                ""
            ],
            "guid": "EU-,-Wz{^,",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"1k1r3r/1pp2pp1/p1p5/2Q5/7q/2Pp1Pp1/PP1N2P1/R1B1RK2 b - - 3 20\"]<br><br>{ Deep analysis start after that node } 20... Rd4 { -M7 } 21. Re8+ { -M6 } 21... Rxe8 { -M6 } 22. Qxd4 { -M5 } 22... Qh1+ { -M5 } 23. Qg1 { -M4 } 23... Re1+ { -M4 } 24. Kxe1 { -M3 } 24... Qxg1+ { -M3 } 25. Nf1 { -M2 } 25... Qf2+ { -M2 } 26. Kd1 { -M1 } 26... Qe2# { -M1 } *<br>",
                "",
                "<!--StartFragment-->Interference #2<!--EndFragment-->",
                "<!--StartFragment-->Checkmate the opponent in 7 moves<!--EndFragment-->",
                ""
            ],
            "guid": "w^9ox78pmT",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r2q2k1/pQ2bppp/4p3/8/3r1B2/6P1/P3PP1P/1R3RK1 w - - 1 17\"]<br>[SetUp \"1\"]<br><br>17. Bb8 {EV: 99.5%} Qd5 {EV: 0.6%} (17... Rxb8 {EV: 0.3%} 18. Qxb8 {EV: 99.7%}<br>Qxb8 {EV: 0.6%} 19. Rxb8+ {EV: 100.0%} Rd8 {EV: 0.3%} (19... Bd8 {EV: 0.0%}) (<br>19... Bf8 {EV: 0.0%})) (17... Qxb8 {EV: 0.8%} 18. Qxb8+ {EV: 99.7%} Rxb8 {EV:<br>0.3%} 19. Rxb8+ {EV: 100.0%} Bf8 {EV: 0.0%} (19... Rd8 {EV: 0.7%}) (19... Bd8<br>{EV: 0.0%})) 18. Qxe7 {EV: 100.0%} Qd8 {EV: 0.4%} (18... h6 {EV: 0.4%}) (18...<br>h5 {EV: 0.4%}) *",
                "",
                "<!--StartFragment-->Interference #3<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Vasily Smyslov - Alexander Kazimirovich Tolush, 1961.&nbsp;lichess.org/hqmls6OI#32</div></div>",
                ""
            ],
            "guid": "h,#%gT)OZ1",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2rqr1k1/pp1Q1pbp/2n3p1/8/4P3/4BP2/PP2B1PP/2RR2K1 b - - 0 21\"]<br>[SetUp \"1\"]<br><br>21... Bd4 {EV: 97.4%} 22. Rxd4 {EV: 4.0%} (22. Qxd8 {EV: 2.1%} Bxe3+ {EV: 98.8%}<br>23. Kf1 {EV: 1.2%} Rexd8 {EV: 99.8%} (23... Rcxd8 {EV: 99.8%})) Nxd4 {EV: 98.4%}<br>23. Qxd8 {EV: 3.1%} Nxe2+ {EV: 98.0%} (23... Rxc1+ {EV: 97.4%} 24. Bxc1 {EV:<br>3.2%} Nxe2+ {EV: 98.7%} 25. Kf2 {EV: 2.0%} Rxd8 {EV: 99.1%}) 24. Kf2 {EV: 1.4%}<br>Rexd8 {EV: 98.9%} (24... Rcxd8 {EV: 97.4%}) *",
                "",
                "<!--StartFragment-->Interference #4<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Ludwig Rellstab - Miguel Najdorf, 1950.&nbsp;lichess.org/1FJxHEA8/black#41</div></div>",
                ""
            ],
            "guid": "ias}n,<Chc",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3B2k1/6p1/3b4/1p1p3q/3P1p2/2PQ1NPb/1P2rP1P/R5K1 b - - 5 30\"]<br>[SetUp \"1\"]<br><br>30... Re3 {EV: 100.0%} 31. Qd1 {EV: 1.1%} (31. fxe3 {EV: 0.0%} Qxf3 {EV: 100.0%}<br>32. Qf1 {EV: 0.0%} (32. Qc2 {EV: 0.0%} fxg3 {EV: 100.0%} 33. hxg3 {EV: 0.0%}<br>Qxg3+ {EV: 100.0%}) Bxf1 {EV: 100.0%}) Qxf3 {EV: 99.8%} (31... Rxf3 {EV: 99.3%}<br>) *",
                "",
                "<!--StartFragment-->Interference #5<!--EndFragment-->",
                "<!--StartFragment-->From Viswanathan Anand - Levon Aronian, 2008.&nbsp;lichess.org/6CtAu1VX/black#59<!--EndFragment-->",
                ""
            ],
            "guid": "pLW#Ko6W?-",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"2r4k/5pR1/7p/4pN1q/7P/2n1P3/2Q2P1K/8 b - - 0 36\"]<br>[SetUp \"1\"]<br><br>36... e4 {EV: 96.4%} 37. Qb3 {EV: 4.0%} Qxf5 {EV: 96.5%} 38. Rxf7 {EV: 3.6%} (<br>38. Qxf7 {EV: 3.0%}) *",
                "",
                "<!--StartFragment-->Interference #6<!--EndFragment-->",
                "<!--StartFragment-->From Hikaru Nakamura - Alexander Beliavsky, 2005.&nbsp;lichess.org/QQNd684H/black#71<!--EndFragment-->",
                ""
            ],
            "guid": "s9IU*RO{f`",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"5q2/1b4pk/1p2p1n1/1P1pPp2/P2P1P1p/rB1N1R1P/1Q4PK/8 w - - 2 46\"]<br>[SetUp \"1\"]<br><br>46. Nc5 {EV: 99.3%} bxc5 {EV: 0.7%} (46... Rxb3 {EV: 1.0%} 47. Nxb3 {EV: 99.2%}<br>) 47. Qxa3 {EV: 99.7%} c4 {EV: 0.3%} 48. Qxf8 {EV: 99.9%} Nxf8 {EV: 0.2%} *",
                "",
                "<!--StartFragment-->Interference #7<!--EndFragment-->",
                "<!--StartFragment-->From Vassily Ivanchuk - Viktor Moskalenko, 1988.&nbsp;lichess.org/Ln6ZI3lO#90<!--EndFragment-->",
                ""
            ],
            "guid": "txwA8>S-:&",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Interference"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"rnbq1rk1/pppn1ppp/4p3/3pP3/1b1P4/2NB1N2/PPP2PPP/R1BQK2R w - - 1 1\"]<br>[SetUp \"1\"]<br><br>1. Bxh7+ {EV: 99.3%} Kxh7 {EV: 0.9%} 2. Ng5+ {EV: 99.2%} Kg6 {EV: 1.0%} (2...<br>Kg8 {EV: 0.2%} 3. Qd3 {EV: 95.7%} (3. Qh5 {EV: 100.0%} Qxg5 {EV: 0.3%} 4. Bxg5<br>{EV: 99.9%} (4. Qxg5 {EV: 99.5%})) f5 {EV: 1.8%} 4. Qh3 {EV: 100.0%} Nf6 {EV:<br>0.1%} (4... Rf7 {EV: 1.7%} 5. Qh7+ {EV: 99.3%} Kf8 {EV: 0.7%} 6. Nxe6+ {EV:<br>99.8%}) 5. exf6 {EV: 98.4%}) 3. h4 {EV: 99.8%} f5 {EV: 0.7%} 4. h5+ {EV: 99.8%}<br>Kh6 {EV: 0.2%} 5. Nxe6+ {EV: 100.0%} *",
                "",
                "<!--StartFragment-->Greek Gift Introduction<!--EndFragment-->",
                "<!--StartFragment--><div><div>The Greek Gift sacrifice is a common tactical theme, where one side sacrifices their bishop by capturing the rook pawn of a castled king position (white playing Bxh7+ or black playing Bxh2+) usually in order to checkmate the opponent or gain significant material advantage.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>Play the Greek Gift sacrifice and maintain a winning position for 4 moves to complete this exercise.</div></div>",
                ""
            ],
            "guid": "pbE?sA]RtU",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"rnb2rk1/pp1nqppp/4p3/3pP3/3p3P/2NB3N/PPP2PP1/R2QK2R w KQ - 0 10\"]<br><br>{ Deep analysis start after that node } 10. Bxh7+ { +M7 } 10... Kh8 { +M6 } 11. Qh5 { +M6 } 11... Qxh4 { +M5 } 12. Qxh4 { +M5 } 12... g5 { +M4 } 13. Nxg5 { +M4 } ( 13. Qh6 { +M4 } 13... Rd8 { +M3 } 14. Bg6+ { +M3 } ( 14. Nxg5 { +M3 } 14... Rf8 { +M2 } 15. Bd3+ { +M2 } ( 15. Be4+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bf5+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bg6+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bg8+ { +M2 } 15... Kxg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 14. Bd3+ { +M3 } 14... Kg8 { +M2 } 15. Nxg5 { +M2 } 15... a6 { +M1 } 16. Qh8# { +M1 } ) ( 14. Bf5+ { +M3 } 14... Kg8 { +M2 } 15. Nxg5 { +M2 } ( 15. Nf4 { +M2 } 15... d3 { +M1 } 16. Qh8# { +M1 } ) ( 15. Ng1 { +M2 } 15... d3 { +M1 } 16. Qh8# { +M1 } ) 15... d3 { +M1 } 16. Qh8# { +M1 } ) ( 14. Be4+ { +M3 } 14... Kg8 { +M2 } 15. Nxg5 { +M2 } 15... d3 { +M1 } 16. Qh8# { +M1 } ) ( 14. Bg8+ { +M3 } 14... Kxg8 { +M2 } 15. Nxg5 { +M2 } 15... d3 { +M1 } 16. Qh8# { +M1 } ) ( 14. Ng1 { +M3 } 14... Re8 { +M2 } 15. Bg6+ { +M2 } ( 15. Bd3+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Be4+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Bf5+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Bg8+ { +M2 } 15... Kxg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Qxg5 { +M2 } 15... d3 { +M1 } 16. Bxd3# { +M1 } ( 16. Bg8# { +M1 } ) ( 16. Be4# { +M1 } ) ( 16. Bf5# { +M1 } ) ) 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 14. Nf4 { +M3 } 14... g4 { +M2 } 15. Bd3+ { +M2 } ( 15. Be4+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Bf5+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Bg6+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Bg8+ { +M2 } 15... Kxg8 { +M1 } 16. Qh8# { +M1 } ) ( 15. Nh5 { +M2 } 15... d3 { +M1 } 16. Qg7# { +M1 } ) ( 15. Qg5 { +M2 } 15... d3 { +M1 } 16. Bxd3# { +M1 } ( 16. Be4# { +M1 } ) ( 16. Bf5# { +M1 } ) ( 16. Bg8# { +M1 } ) ) 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) 14... Kg8 { +M2 } 15. Qh7+ { +M2 } ( 15. Nxg5 { +M2 } 15... d3 { +M1 } 16. Bxf7# { +M1 } ( 16. Qh8# { +M1 } ) ) 15... Kf8 { +M1 } 16. Qxf7# { +M1 } ) 13... Kg7 { +M3 } 14. Qh6+ { +M3 } ( 14. Bd3 { +M3 } 14... Nf6 { +M2 } 15. Qh6+ { +M2 } 15... Kg8 { +M1 } 16. Qh8# { +M1 } ) ( 14. Bg8 { +M3 } 14... Kg6 { +M2 } 15. Qh5+ { +M2 } ( 15. g4 { +M2 } 15... d3 { +M1 } 16. Qh6# { +M1 } ) ( 15. Nf3 { +M2 } 15... d3 { +M1 } 16. Qg4# { +M1 } ( 16. Qg5# { +M1 } ) ( 16. Qh7# { +M1 } ) ) ( 15. Nxf7 { +M2 } 15... d3 { +M1 } 16. Qg4# { +M1 } ( 16. Qg5# { +M1 } ) ( 16. Qh7# { +M1 } ) ) ( 15. Nge4 { +M2 } 15... d3 { +M1 } 16. Qg4# { +M1 } ( 16. Qg5# { +M1 } ) ( 16. Qh7# { +M1 } ) ) 15... Kf5 { +M1 } 16. Nh3# { +M1 } ) ( 14. Bf5 { +M3 } 14... Nxe5 { +M2 } 15. Qh6+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 14. Be4 { +M3 } 14... Nxe5 { +M2 } 15. Qh6+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) 14... Kh8 { +M2 } 15. Bd3+ { +M2 } ( 15. Be4+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bf5+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bg6+ { +M2 } 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) ( 15. Bg8+ { +M2 } 15... Kxg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) ) 15... Kg8 { +M1 } 16. Qh7# { +M1 } ( 16. Qh8# { +M1 } ) *<br>",
                "",
                "<!--StartFragment-->Greek Gift Challenge #1<!--EndFragment-->",
                "<!--StartFragment--><div><div>From Efim Bogoljubov - NN, 1952.&nbsp;lichess.org/GskyN9HK#18</div></div>",
                ""
            ],
            "guid": "BAdd_#08JP",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r3r1k1/1b2qppp/p7/1p1Pb3/1P6/P2B4/1B2Q1PP/3R1RK1 w - - 0 21\"]<br>[SetUp \"1\"]<br><br>21. Bxh7+ {EV: 94.1%} Kxh7 {EV: 4.8%} 22. Qh5+ {EV: 95.9%} Kg8 {EV: 4.1%} 23.<br>Bxe5 {EV: 97.4%} Qxe5 {EV: 2.7%} 24. Qxf7+ {EV: 97.6%} Kh7 {EV: 3.2%} (24... Kh8<br>{EV: 3.7%} 25. Qxb7 {EV: 96.5%} Rad8 26. Qf7 {EV: 97.9%} (26. Qxa6 {EV: 97.3%})<br>) 25. Rf5 {EV: 91.5%} Qe3+ {EV: 4.0%} 26. Kh1 {EV: 96.6%} Re5 {EV: 1.8%} (26...<br>Re7 {EV: 1.3%} 27. Rh5+ {EV: 99.3%} Qh6 {EV: 0.7%} 28. Rxh6+ {EV: 99.6%} (28.<br>Qf5+ {EV: 99.6%})) (26... Bxd5 {EV: 2.4%} 27. Rh5+ {EV: 99.0%} Qh6 {EV: 1.0%}<br>28. Rxh6+ {EV: 99.4%} (28. Qxd5 {EV: 99.3%}) (28. Qf5+ {EV: 99.7%})) 27. Qh5+<br>{EV: 99.3%} Qh6 {EV: 0.4%} 28. Qxh6+ {EV: 99.7%} (28. Rxe5 {EV: 99.7%}) *",
                "",
                "<!--StartFragment-->Greek Gift Challenge #2<!--EndFragment-->",
                "<!--StartFragment-->Maintain a winning position to complete this exercise. From Carl Schlechter - Geza Maroczy, 1907.&nbsp;lichess.org/JjK94ic7#40<!--EndFragment-->",
                ""
            ],
            "guid": "PaciW%Hl}w",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.03\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r2qrbk1/5ppp/pn1p4/np2P1P1/3p4/5N2/PPB2PP1/R1BQR1K1 w - - 1 20\"]<br>[SetUp \"1\"]<br><br>20. Bxh7+ {EV: 97.7%} Kxh7 {EV: 5.8%} 21. g6+ {EV: 95.4%} fxg6 {EV: 2.1%} (<br>21... Kg8 {EV: 2.3%} 22. Ng5 {EV: 98.0%} fxg6 {EV: 1.9%} 23. Qf3 {EV: 98.6%}<br>Qxg5 {EV: 2.2%} (23... Ra7 {EV: 1.7%} 24. Qh3 {EV: 98.2%} Qxg5 {EV: 2.6%} 25.<br>Bxg5 {EV: 97.6%} dxe5 {EV: 2.9%}) 24. Bxg5 {EV: 98.1%} dxe5 {EV: 2.4%} 25. Rac1<br>{EV: 98.4%} (25. Rad1 {EV: 98.3%})) (21... Kxg6 {EV: 2.4%} 22. Qd3+ {EV: 98.7%}<br>f5 {EV: 1.4%} 23. exf6+ {EV: 100.0%} (23. g4 {EV: 99.5%}) Kf7 {EV: 0.0%} 24.<br>Ng5+ {EV: 100.0%} Kxf6 {EV: 0.0%} 25. Qf3+ {EV: 100.0%} Kg6 {EV: 0.0%} 26. Qf7+<br>{EV: 100.0%} Kh6 {EV: 0.0%} 27. Re6+ {EV: 100.0%} Rxe6 {EV: 0.0%} 28. Qxe6+ {EV:<br>100.0%} g6 {EV: 0.0%} 29. Qh3+ {EV: 100.0%} (29. Qg8 {EV: 100.0%} Kh5 {EV: 0.0%}<br>30. g4+ {EV: 100.0%} Kh4 {EV: 0.0%} 31. Qh7+ {EV: 100.0%} (31. Qh8+ {EV: 100.0%}<br>Bh6 {EV: 0.0%} 32. Qxh6+ {EV: 100.0%} Kxg4 {EV: 0.1%} 33. Qh3# {EV: 100.0%}) Bh6<br>{EV: 0.0%} 32. Qxh6+ {EV: 100.0%} Kxg4 {EV: 0.1%} 33. Qh3# {EV: 100.0%}) Kg7<br>{EV: 0.3%} 30. Qh7+ {EV: 100.0%} Kf6 {EV: 0.7%} 31. Qf7+ {EV: 100.0%} Ke5 {EV:<br>0.1%} 32. Qe6# {EV: 100.0%} (32. Bf4# {EV: 100.0%}) (32. f4# {EV: 100.0%})) 22.<br>Ng5+ {EV: 97.9%} Kg8 {EV: 2.8%} 23. Qf3 {EV: 98.4%} Qxg5 {EV: 0.9%} (23... Ra7<br>{EV: 1.1%} 24. Qh3 {EV: 99.9%} Qxg5 {EV: 3.2%} 25. Bxg5 {EV: 98.5%} dxe5 {EV:<br>2.3%}) 24. Bxg5 {EV: 98.3%} dxe5 {EV: 2.6%} 25. Rac1 {EV: 98.7%} *",
                "",
                "<!--StartFragment-->Greek Gift Challenge #3<!--EndFragment-->",
                "<!--StartFragment-->Maintain a winning position to complete this exercise. From Boris Spassky - Efim Geller, 1965.&nbsp;lichess.org/KcJkM6wQ#38<!--EndFragment-->",
                ""
            ],
            "guid": "o@CbfW1s&F",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.04\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"3r1rk1/bpq2ppp/p1b1p3/2P5/1P2B3/P4Q2/1B3PPP/2R2RK1 w - - 3 18\"]<br>[SetUp \"1\"]<br><br>18. Bxh7+ {EV: 97.8%} Kxh7 {EV: 6.5%} 19. Qh5+ {EV: 96.5%} Kg8 {EV: 3.5%} 20.<br>Bxg7 {EV: 97.0%} f5 {EV: 2.7%} (20... f6 {EV: 1.9%} 21. Qh8+ {EV: 98.7%} Kf7<br>{EV: 26.9%} 22. Bxf8 {EV: 99.3%} Rxf8 {EV: 1.0%} 23. Qh7+ {EV: 98.4%} Ke8 {EV:<br>0.1%} 24. Qxc7 {EV: 99.5%}) (20... Kxg7 {EV: 0.6%} 21. Qg5+ {EV: 100.0%} Kh8<br>{EV: 0.0%} (21... Kh7 {EV: 0.0%}) 22. Qf6+ {EV: 100.0%} Kh7 {EV: 0.3%} (22...<br>Kg8 {EV: 0.7%} 23. Rc4 {EV: 100.0%} Rd4 {EV: 0.0%} 24. Rxd4 {EV: 100.0%} Be4<br>{EV: 0.0%} 25. Rxe4 {EV: 100.0%} Qxh2+ {EV: 0.0%} 26. Kxh2 {EV: 100.0%} Bb8+<br>{EV: 0.0%} 27. Kh3 {EV: 100.0%} (27. Kh1 {EV: 100.0%} Bf4 {EV: 0.0%} 28. Rxf4<br>{EV: 100.0%} Rd8 {EV: 0.0%} (28... e5 {EV: 0.0%} 29. Rg4+ {EV: 100.0%} Kh7 {EV:<br>0.0%} 30. Qg7# {EV: 100.0%}) 29. Qxf7+ {EV: 100.0%} Kh8 {EV: 0.1%} 30. Rh4# {EV:<br>100.0%}) (27. Kg1 {EV: 100.0%} Bh2+ {EV: 0.0%} 28. Kxh2 {EV: 100.0%} Re8 {EV:<br>0.0%} 29. Rh4 {EV: 100.0%} Re7 {EV: 0.0%} 30. Rh8# {EV: 100.0%}) (27. g3 {EV:<br>100.0%} Bf4 {EV: 0.0%} 28. Rxf4 {EV: 100.0%} Rd8 {EV: 0.0%} 29. Qxf7+ {EV:<br>100.0%} Kh8 {EV: 0.1%} 30. Rh4# {EV: 100.0%}) Bf4 {EV: 0.0%} 28. Rxf4 {EV:<br>100.0%} e5 {EV: 0.0%} (28... Rd8 {EV: 0.0%} 29. Qxf7+ {EV: 100.0%} Kh8 {EV:<br>0.1%} 30. Rh4# {EV: 100.0%}) 29. Rg4+ {EV: 100.0%} Kh7 {EV: 0.0%} 30. Qg7# {EV:<br>100.0%})) 21. Qh8+ {EV: 98.3%} Kf7 {EV: 1.7%} 22. Bxf8 {EV: 99.1%} Rxf8 {EV:<br>1.2%} 23. Qh7+ {EV: 99.3%} Kf6 {EV: 0.9%} 24. Qxc7 {EV: 99.4%} *",
                "",
                "<!--StartFragment-->Greek Gift Challenge #4<!--EndFragment-->",
                "<!--StartFragment--><div><div>Maintain a winning position to complete this exercise. From Anthony Miles - Walter Shawn Browne, 1982.&nbsp;lichess.org/UnquXe54#34</div></div>",
                ""
            ],
            "guid": "L2v$.M@fbn",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.04\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"r1b2rk1/ppqn1ppB/4p3/2pnP3/1p1P4/5N2/PP1N1PPP/R2Q1RK1 b - - 0 12\"]<br>[SetUp \"1\"]<br><br>12... Kxh7 {EV: 34.7%} 13. Ng5+ {EV: 65.4%} Kg8 {EV: 35.3%} 14. Qh5 {EV: 64.7%}<br>N5f6 {EV: 35.8%} 15. exf6 {EV: 64.6%} Nxf6 {EV: 35.4%} 16. Qh4 {EV: 64.9%} *",
                "",
                "<!--StartFragment-->Defend against the Greek Gift<!--EndFragment-->",
                "<!--StartFragment-->The Greek Gift sacrifice does not always work. Defend accurately. From Miguel A Quinteros - Yasser Seirawan, 1985.&nbsp;lichess.org/cJV9njHh/black#23<!--EndFragment-->",
                ""
            ],
            "guid": "okAuNBY;la",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Intermediate_Tactics::Greek_Gift"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/1k6/8/4K3/2P5/8 w - - 0 1",
                "<!--StartFragment-->If the pawn is on the second, third, or fourth rank, there are three key squares  the square two squares in front of the pawn and the squares to the left and right of that square. Reach a key square with your king and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy2.PNG\"&gt;"
            ],
            "guid": "PsaZd/RK4?",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "4k3/8/8/8/8/1KP5/8/8 w - - 0 1",
                "<!--StartFragment--><div><div>If the pawn is on the second, third, or fourth rank, there are three key squares  the square two squares in front of the pawn and the squares to the left and right of that square. Reach a key square with your king and win.</div>&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy3.PNG\"&gt;</div>"
            ],
            "guid": "s:~e]JI,+u",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/k7/4K3/2P5/8/8/8 w - - 0 1",
                "<!--StartFragment-->If the pawn is on the second, third, or fourth rank, there are three key squares  the square two squares in front of the pawn and the squares to the left and right of that square. Reach a key square with your king and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy4.PNG\"&gt;"
            ],
            "guid": "nU3^$C3Wq<",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "3k4/8/8/1KP5/8/8/8/8 w - - 0 1<!--EndFragment-->",
                "If the pawn is on the fifth or sixth rank, there are six key squares: the square in front of the pawn and the squares to the left and right, as well as the square two squares in front of the pawn, and the squares to the left and right of it. Reach a key square with your king and win.<br>&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy5.PNG\"&gt;"
            ],
            "guid": "O7;P3zLNWU",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "2k5/8/1KP5/8/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->If the pawn is on the fifth or sixth rank, there are six key squares: the square in front of the pawn and the squares to the left and right, as well as the square two squares in front of the pawn, and the squares to the left and right of it. Reach a key square with your king and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy6.PNG\"&gt;"
            ],
            "guid": "P*=N!/Q(iR",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "k7/2K5/8/1P6/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->There is an exception to the key squares rule when a knight pawn is on its sixth rank, and the defending king is in the corner. Avoid the stalemate trick and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy7.PNG\"&gt;"
            ],
            "guid": "C-BK?z]c,;",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "6k1/8/6K1/6P1/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->Safely promote your pawn<!--EndFragment-->"
            ],
            "guid": "sgU-AZb4Mt",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/1kP1K3/8/8/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->When the pawn is on the seventh rank, the key squares are the squares on the seventh and eighth rank that touch the pawn's square. Reach a key square with your king and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy8.PNG\"&gt;"
            ],
            "guid": "xcd#*)DJNJ",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/4k3/6K1/7P/8/8/8/8 w - - 0 1",
                "<!--StartFragment-->An advanced rook pawn generally has two key squares: the two squares on the adjacent file that touch the promotion square. Reach a key square with your king and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy9.PNG\"&gt;"
            ],
            "guid": "zC[_q{gs6U",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/8/pk6/8/3K4/8 w - - 0 1",
                "<!--StartFragment-->An advanced rook pawn generally has two key squares: the two squares on the adjacent file that touch the promotion square. Reach a key square and win. Prevent the black king from reaching a key square to draw the game.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy10.PNG\"&gt;"
            ],
            "guid": "I2$4!pt<QA",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "5k2/8/8/8/8/2P5/8/3K4 w - - 0 1",
                "<!--StartFragment-->With a king and pawn versus a lone king, it is important to get the attacking king to any key square and the path to a key square is not always direct. Reach a key square and win.<br><!--EndFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy11.PNG\"&gt;"
            ],
            "guid": "{0_ndy]u8",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Key_Squares"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/2k5/8/8/2PK4/8/8/8 w - - 0 1",
                "<!--StartFragment-->Direct Opposition is a position in which the kings are on the same rank or file and they are separated by one square. In such a situation, the player not having to move is said to \"have the opposition\". The side without the opposition may have to move the king away, potentially allowing the opposing king access to important squares. Take the opposition to reach a key square and win!<!--EndFragment-->"
            ],
            "guid": "AJ6>iUQ.M1",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/4p3/4k3/8/8/4K3 w - - 0 1<!--EndFragment-->",
                "Take the opposition to prevent black from reaching a key square and hold the draw."
            ],
            "guid": "iH-5l#_c+<",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/4k3/8/8/2P1K3/8/8/8 w - - 0 1",
                "<!--StartFragment-->Take the opposition to reach a key square and win!<!--EndFragment-->"
            ],
            "guid": "g>Rl<cU+4.",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/7k/8/1p6/7K/2P5/8 w - - 0 1",
                "<!--StartFragment--><div><div>Take the opposition to reach a key square and win!</div></div>"
            ],
            "guid": "HI,s05O@Fp",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/4R2n/4K1pk/6p1/7P/8/8/8 w - - 0 1",
                "<!--StartFragment-->Use your knowledge of Direct Opposition to win the game.<!--EndFragment-->"
            ],
            "guid": "I;87OspPn+",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/5kp1/8/8/8/6K1 w - - 0 1",
                "<!--StartFragment-->Distant Opposition is a position in which the kings are on the same rank or file but are separated by more than one square. If there are an odd number of squares between the kings, the player not having the move has the (distant) opposition. Take the Distant Opposition to hold the draw.<!--EndFragment-->"
            ],
            "guid": "q4vEeuK@Wg",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "4k3/8/8/1p5p/1P5P/8/8/4K3 w - - 0 1",
                "<!--StartFragment-->Take the Distant Opposition to win the game.<!--EndFragment-->"
            ],
            "guid": "GrBsul{q{/",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/4k3/8/2PK4/8/8/8 w - - 0 1",
                "<!--StartFragment-->White can take Direct Opposition, but is that the best move? Remember the key squares.<!--EndFragment-->"
            ],
            "guid": "uLQ:6ed4G4",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::Opposition"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "7K/8/Q7/8/8/6k1/5p2/8 w - - 0 1",
                "<!--StartFragment-->In this study, we're going to look at the endgame where one side has a Queen and the other side has a pawn on the 7th rank. We're going to look at the following situations:&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>&lt;ol&gt;<br>&lt;li&gt; Queen in front of the pawn = Win&nbsp;<br>&lt;li&gt; Not a Bishop or Rook pawn = Win&nbsp;<br>&lt;li&gt; Rook or Bishop pawn without King assistance = Draw&nbsp;<br>&lt;li&gt; Rook or Bishop pawn with King assistance = Win&nbsp;<br>&lt;/ol&gt;<br>&lt;br&gt;&lt;br&gt;<br>Let's start with a simple exercise to prove a first point: If the Queen can get in front of the pawn, the side with the Queen will win.&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>Win this game."
            ],
            "guid": "q,XZQJ;H{%",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "7K/8/1Q6/8/8/8/3kp3/8 w - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is NOT a Bishop or Rook pawn, the side with the Queen can win.&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>The key to winning these positions is to get our King near the pawn so we can capture it safely. To do this, we must force Black to block their own pawn with their King. This will give us a free move which we can use to get our King closer.<!--EndFragment-->"
            ],
            "guid": "h&_Q`N1.R@",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "7K/8/1Q6/8/8/8/3pk3/8 w - - 0 1",
                "<!--StartFragment--><div><div>If the pawn on the 7th rank is NOT a Bishop or Rook pawn, the side with the Queen can win.&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>The key to winning these positions is to get our King near the pawn so we can capture it safely. To do this, we must force Black to block their own pawn with their King. This will give us a free move which we can use to get our King closer.</div></div>"
            ],
            "guid": "OM#JKM45lw",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "7K/8/1Q6/8/8/8/1pk5/8 w - - 0 1",
                "<!--StartFragment--><div><div>If the pawn on the 7th rank is NOT a Bishop or Rook pawn, the side with the Queen can win.&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>The key to winning these positions is to get our King near the pawn so we can capture it safely. To do this, we must force Black to block their own pawn with their King. This will give us a free move which we can use to get our King closer.</div></div>"
            ],
            "guid": "zH!GXZW5S^",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/1K6/P7/8/3q4/8/8/7k w - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is a Bishop or Rook pawn, and the side with the Queen does not have their King near the pawn, the side with the pawn can draw.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>When it's a Rook pawn, the side with the pawn just needs to promote it if allowed, or otherwise keep their King in or near the corner. The side with the Queen won't have any time to get their King closer.<!--EndFragment-->"
            ],
            "guid": "RFFF3kf84",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "7K/8/4Q3/8/8/8/2p5/1k6 b - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is a Bishop or Rook pawn, and the side with the Queen does not have their King near the pawn, the side with the pawn can draw.&nbsp;<br>&lt;br&gt;&lt;br&gt;<br>When it's a Bishop pawn, the side with the pawn just needs to promote it if allowed, or threaten to promote it, or exploit the possible stalemate situation. If played correctly, the side with the Queen won't have any time to get their King closer.<!--EndFragment-->"
            ],
            "guid": "Mtp]gQ02/E",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/K7/2Q5/8/p7/1k6 w - - 0 1",
                "If the pawn on the 7th rank is a Rook pawn, and the side with the Queen has their King on one of the green squares (or closer) on their move, they can win the game. (ref:&nbsp;https://lichess.org/practice/pawn-endgames/7th-rank-rook-pawn/pt20yRkT/K8Hmhh0e)<br>&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy24.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<br>The side with the Queen can allow the pawn to promote and deliver checkmate. White can accomplish this by having their Queen on the d2 square (other squares can also work) and the King on b3 when the pawn has promoted.<!--EndFragment-->"
            ],
            "guid": "F77ur+xxDP",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/8/8/2QK4/8/p7/1k6 w - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is a Rook pawn, and the side with the Queen has their King on one of the green squares (or closer) on their move, they can win the game.&nbsp;<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy25.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>The side with the Queen can allow the pawn to promote and deliver checkmate. White can accomplish this by having their Queen on the d2 square (other squares can also work) and the King on one of the orange squares (d3, d2, d1) when the pawn has promoted.<!--EndFragment-->"
            ],
            "guid": "j!XSD+r;Dl",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/8/Q7/8/6K1/8/2pk4/8 w - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is a Bishop pawn, and the side with the Queen has their King on one of the green squares on their move, they can win the game.&nbsp;<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy27.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>The side with the Queen can allow the pawn to promote and deliver checkmate. When both Kings are on the long side, the attacker can accomplish this by having their King on one of the orange squares (f3, f2, f1) when the pawn promotes.<!--EndFragment-->"
            ],
            "guid": "B3MYnjV*]A",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "8/4Q3/8/8/K7/8/1kp5/8 w - - 0 1",
                "<!--StartFragment-->If the pawn on the 7th rank is a Bishop pawn, and the side with the Queen has their King on one of the green squares on their move, they can win the game.<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy26.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>The side with the Queen can allow the pawn to promote and deliver checkmate. When both Kings are on the short side, the attacker can accomplish this by having their King on b3 when the pawn promotes.<!--EndFragment-->"
            ],
            "guid": "sa~@GDLS?$",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"????.??.??\"]<br>[Round \"?\"]<br>[White \"?\"]<br>[Black \"?\"]<br>[Result \"*\"]<br>[FEN \"8/4Q3/8/8/8/8/1kp5/4K3 w - - 0 1\"]<br><br>{ Deep analysis start after that node } 1. Qb4+ { +M4 } 1... Ka1 { +M3 } ( 1... Ka2 { +M3 } 2. Kd2 { +M3 } 2... c1=Q+ { +M2 } ( 2... c1=R { +M2 } 3. Kxc1 { +M2 } 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa5# { +M1 } ) ( 4. Qa4# { +M1 } ) ) ( 2... c1=B+ { +M2 } 3. Kxc1 { +M2 } ( 3. Kc2 { +M2 } 3... Bb2 { +M1 } ( 3... Bd2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ) ( 3... Ba3 { +M1 } 4. Qb1# { +M1 } ) ( 3... Be3 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Bf4 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Bg5 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Bh6 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Ka1 { +M1 } 4. Qb1# { +M1 } ) 4. Qxb2# { +M1 } ) 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa5# { +M1 } ) ( 4. Qa4# { +M1 } ) ) ( 2... c1=N { +M2 } 3. Kxc1 { +M2 } ( 3. Kc2 { +M2 } 3... Ne2 { +M1 } ( 3... Nb3 { +M1 } 4. Qa4# { +M1 } ) ( 3... Nd3 { +M1 } 4. Qa4# { +M1 } ( 4. Qa5# { +M1 } ) ) ( 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ) 4. Qa4# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa5# { +M1 } ) ) 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa5# { +M1 } ) ( 4. Qa4# { +M1 } ) ) ( 2... Ka1 { +M2 } 3. Kxc2 { +M2 } ( 3. Kc1 { +M2 } 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ) 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) 3. Kxc1 { +M2 } 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa5# { +M1 } ) ( 4. Qa4# { +M1 } ) ) 2. Kd2 { +M3 } 2... c1=Q+ { +M2 } ( 2... c1=R { +M2 } 3. Kxc1 { +M2 } 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ) ( 2... c1=B+ { +M2 } 3. Kxc1 { +M2 } 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ) ( 2... c1=N { +M2 } 3. Kxc1 { +M2 } ( 3. Kc2 { +M2 } 3... Na2 { +M1 } ( 3... Ne2 { +M1 } 4. Qb1# { +M1 } ( 4. Qa3# { +M1 } ) ( 4. Qb2# { +M1 } ) ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Nb3 { +M1 } 4. Qa3# { +M1 } ( 4. Qa4# { +M1 } ) ) ( 3... Nd3 { +M1 } 4. Qb1# { +M1 } ( 4. Qa4# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa5# { +M1 } ) ) ( 3... Ka2 { +M1 } 4. Qa4# { +M1 } ( 4. Qa5# { +M1 } ) ( 4. Qb2# { +M1 } ) ) 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ) 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) ) ( 2... Ka2 { +M2 } 3. Kxc2 { +M2 } ( 3. Kc1 { +M2 } 3... Ka1 { +M1 } 4. Qb2# { +M1 } ( 4. Qa3# { +M1 } ) ( 4. Qa4# { +M1 } ) ( 4. Qa5# { +M1 } ) ) 3... Ka1 { +M1 } 4. Qb1# { +M1 } ( 4. Qb2# { +M1 } ) ( 4. Qa5# { +M1 } ) ( 4. Qa3# { +M1 } ) ( 4. Qa4# { +M1 } ) ) 3. Kxc1 { +M2 } 3... Ka2 { +M1 } 4. Qb2# { +M1 } ( 4. Qa4# { +M1 } ) *<br>",
                "",
                "<!--StartFragment-->Exercise: Bishop pawn, defending King on short side, King assistance on long sid<!--EndFragment-->",
                "<!--StartFragment-->If the pawn on the 7th rank is a Bishop pawn, and the side with the Queen has their King on one of the green squares on their move, they can win the game.&nbsp;<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy28.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>The side with the Queen can allow the pawn to promote and deliver checkmate. When the attacking King is on the long side, and the defending King is on the short side, the attacker can accomplish this by having their King on d2 when the pawn promotes.<!--EndFragment-->",
                ""
            ],
            "guid": "M2opQ>E)I-",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Pawn_endGames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.06\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"R7/P4k2/8/8/8/r7/6K1/8 w - - 0 1\"]<br>[SetUp \"1\"]<br><br>1. Rh8 {&lt;img src=\"_LichessStudy13.PNG\"&gt; &lt;br&gt;&lt;br&gt;We are now threatening to promote. However, Black can't play Rxa7 due to Rh7+, winning the rook on a7. The best Black can do is to delay the eventual loss.} Ra2+ {<!--StartFragment-->We move towards the promotion square<!--EndFragment-->} 2. Kf3 Ra3+ 3. Ke4<br>Ra4+ 4. Kd5 Ra5+ 5. Kc6&nbsp;Ra6+ 6. Kb7 {<!--StartFragment-->We are now threatening a8=Q, so Black has to give up their Rook.<!--EndFragment-->} Rxa7+ 7. Kxa7 {Congratulations! You completed this lesson.<!--EndFragment-->} *",
                "",
                "<!--StartFragment-->Since the Black king is not on one of the red squares, we know this is a win for White. Let's win this game by playing the only winning move .<!--EndFragment-->",
                "<!--StartFragment--><div><div><div>&lt;h3&gt;King on f7&lt;/h3&gt;<br>In this Study, we're going to look at Rook endgames where both sides have a Rook, but one side has a pawn on the 7th-rank and their Rook is passive, or \"trapped\", in front of the pawn.<br>&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy12.PNG\"&gt;<br>&lt;br&gt;&lt;br&gt;<br>If Black's King is on any of the red squares when it's White to move, this position is a draw.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on b6 or b7, Black will simply capture the pawn on the next move.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on c6 or c7, Black will play Kb7 on the next move and be able to either capture the pawn or occupy the promotion square by playing Ka8.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on a1, a2, or a6, it's impossible for White to move their Rook away from the promotion square with tempo as no checks are available. White either has to move their Rook and lose the pawn, or move their King. The White King has nowhere to hide, so black can just check White forever.<br>&lt;br&gt;&lt;br&gt;<br>If the black King is on any square other than the red squares, it is a win for White.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on d7, e7 or f7, White can play Rh8. Black can't respond with Rxa7 due to Rh7+, winning the rook on a7. The best Black can do is to delay the eventual loss.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on any other square not mentioned, White can move their Rook away from the promotion square with a check and promote their pawn on the next move.</div></div></div><div><br><br><!--EndFragment--></div>",
                ""
            ],
            "guid": "f6tb915$3%",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[FEN \"R7/P5k1/8/8/8/r7/6K1/8 b - - 0 1\"]<br><br>1... Kh7&nbsp;{Right now, White isn't threatening anything, so we can just shuffle our King between g7 and h7.} 2. Kf2&nbsp;Kg7 3. Ke2 Kh7 4. Kd2 Kg7 5. Kc2<br>Kh7&nbsp;{ } 6. Kb2 {&lt;img src=\"_LichessStudy15.PNG\"&gt; &lt;br&gt;&lt;br&gt;<!--StartFragment-->Our Rook is threatened, so we move it away while keeping it on the promotion file.}<!--EndFragment-->&nbsp;Ra6 7. Kb3 {<!--StartFragment-->White has no threats, so we keep shuffling.}<!--EndFragment-->&nbsp;Kg7 8. Kb4 Kh7 9. Kb5&nbsp;{&lt;img src=\"_LichessStudy16.PNG\"&gt; &lt;br&gt;&lt;br&gt;Our Rook is threatened, so we move it away while keeping it on the promotion file.}<br>Ra1 10. Kb6&nbsp;{&lt;img src=\"_LichessStudy17.PNG\"&gt; &lt;br&gt;&lt;br&gt;<!--StartFragment-->White is now protecting their pawn and threatens to move their Rook away from the promotion square, followed by a8=Q. Continuing to shuffle with Kg7 would be a losing blunder for Black. Instead, we have to check White's King away from the pawn.<!--EndFragment-->} Rb1+ 11. Kc5 {&lt;img src=\"_LichessStudy18.PNG\"&gt; &lt;br&gt;&lt;br&gt;<!--StartFragment-->We stay on the promotion file when we can.}<!--EndFragment-->&nbsp;Ra1 12. Kb4&nbsp;{White has no threats, so we keep shuffling.} Kg7 13. Kb3<br>Kh7 14. Kb2 {<!--StartFragment-->Our Rook is threatened, so we move it away while keeping it on the promotion file.}<!--EndFragment-->&nbsp;Ra6",
                "",
                "<!--StartFragment--><div>To draw this position as Black we keep our King on g7 or h7, and we keep our Rook on the promotion file whenever we can. If White moves their King next to their pawn we have to check it away.<br></div>",
                "&lt;h3&gt;King on g7&lt;/h3&gt;<br><!--StartFragment-->If Black's King is on any of the red squares when it's White to move, this position is a draw.<br>&lt;br&gt;&lt;br&gt;<br>&lt;img src=\"_LichessStudy14.PNG\"&gt;<br><!--StartFragment-->&lt;br&gt;&lt;br&gt;<!--EndFragment--><br>With Black's King on b6 or b7, Black will simply capture the pawn on the next move.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on c6 or c7, Black will play Kb7 on the next move and be able to either capture the pawn or occupy the promotion square by playing Ka8.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on a1, a2, or a6, it's impossible for White to move their Rook away from the promotion square with tempo as no checks are available. White either has to move their Rook and lose the pawn, or move their King. The White King has nowhere to hide, so black can just check White forever.<br>&lt;br&gt;&lt;br&gt;<br>If the black King is on any square other than the red squares, it is a win for White.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on d7, e7 or f7, White can play Rh8. Black can't respond with Rxa7 due to Rh7+, winning the rook on a7. The best Black can do is to delay the eventual loss.<br>&lt;br&gt;&lt;br&gt;<br>With Black's King on any other square not mentioned, White can move their Rook away from the promotion square with a check and promote their pawn on the next move.<!--EndFragment-->",
                ""
            ],
            "guid": "fiTNT8BUk@",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[FEN \"R7/P5k1/8/8/8/r5P1/6K1/8 w - - 0 1\"]<br><br>1. g4 {<!--StartFragment-->White has no threats, so Black shuffles.}<!--EndFragment-->&nbsp;Kh7 {&lt;b&gt;Move:&lt;/b&gt;&nbsp;g5} 2. g5 Kg7 {&lt;b&gt;Move:&lt;/b&gt;&nbsp;g6} 3. g6&nbsp;{&lt;img src=\"_LichessStudy20.PNG\"&gt;&lt;br&gt;&lt;br&gt;<!--StartFragment-->Black can no longer shuffle their King because h7 is unavailable, but Black's King can still occupy g7 and Black can still do nothing by moving their Rook back and forth on the promotion file. Note that Kxg6 would be a losing blunder for Black due to Rg8+ followed by a8=Q.<!--EndFragment-->} Ra4 {&lt;b&gt;Move:&lt;/b&gt;&nbsp;Kf3&lt;br&gt;&lt;br&gt;We can try to help our pawn with our King.}<!--EndFragment-->&nbsp;4. Kf3 { } Ra6&nbsp;{&lt;b&gt;Move:&lt;/b&gt;&nbsp;Ke4}<br>5. Ke4 Ra1&nbsp;{&lt;b&gt;Move:&lt;/b&gt;&nbsp;Kd5} 6. Kd5 Ra2&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kc6} 7. Kc6 Ra1&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kb7} 8. Kb7 {We are now threatening to move our Rook from the promotion square followed by a8=Q, so Black has to check our King away.}<!--EndFragment-->&nbsp;Rb1+ {&lt;b&gt;Move:&lt;/b&gt; Ka6&lt;br&gt;&lt;br&gt;<!--StartFragment-->Let's try to hunt down the Rook.<!--EndFragment-->}<!--EndFragment--><br>9. Ka6 { } Ra1+&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kb5} 10. Kb5 Rb1+&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Ka4} 11. Ka4 Ra1+&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kb3} 12. Kb3 Ra6&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kb4}<br>13. Kb4 Ra1&nbsp;{&lt;b&gt;Move:&lt;/b&gt; Kb3} 14. Kb3",
                "",
                "&lt;h3&gt;King on g7, extra g-pawn&lt;/h3&gt;<br>An extra pawn on g3 has been introduced. What difference does it make? Well, if we push it to g6, it takes away the h7 square from Black's King.",
                "&lt;img src=\"_LichessStudy19.PNG\"&gt;",
                ""
            ],
            "guid": "e`R;=?ec{X",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[FEN \"R7/P5k1/8/8/8/r4P2/6K1/8 w - - 0 1\"]<br><br>1. f4 { } Ra1&nbsp;<!--StartFragment-->{&lt;b&gt;Move:&lt;/b&gt; f5}<!--EndFragment-->&nbsp;2. f5 Ra6 {&lt;b&gt;Move:&lt;/b&gt; f6+}&nbsp;3. f6+ { &lt;img src=\"_LichessStudy22.PNG\"&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;<!--StartFragment-->Kh7 loses due to f7 followed by f8=Q.&lt;li&gt;Kxf6 loses due to Rf8+ followed by a8=Q.&lt;li&gt;Rxf6 loses due to Rb8 followed by a8=Q.&lt;li&gt;What happens after Kf7?&lt;/ul&gt;<!--EndFragment-->} Kf7 {&lt;img src=\"_LichessStudy23.PNG\"&gt;&lt;br&gt;&lt;br&gt;<!--StartFragment-->With Black's King off g7 and h7, we can exploit the skewer as before.}<!--EndFragment-->&nbsp;4. Rh8 { } Rxa7 { }<br>5. Rh7+ Kxf6 6. Rxa7",
                "",
                "<!--StartFragment-->An extra g-pawn does not help White, but an extra b-, c-, d-, e-, or f-pawn does win for White. Why? Because we can now force Black's King away from g7 and h7.<!--EndFragment-->",
                "&lt;img src=\"_LichessStudy21.PNG\"&gt;",
                ""
            ],
            "guid": "Op,{;xAG`A",
            "note_model_uuid": "52ca70c5-8f2f-11eb-94da-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "R7/P5k1/8/8/8/r1PK4/8/8 w - - 0 1",
                "<!--StartFragment-->We know that an extra b-, c-, d-, e-, or f-pawn win for White. Prove it.<!--EndFragment-->"
            ],
            "guid": "xPCt+&p{NF",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "R7/P5k1/6p1/8/5P1P/8/r7/6K1 w - - 0 1",
                "<!--StartFragment-->We know that an extra b-, c-, d-, e-, or f-pawn win for White. Force a win.<!--EndFragment-->"
            ],
            "guid": "H(6^B4!Rtg",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "R7/8/P4k2/5p2/r7/5PK1/8/8 w - - 3 59",
                "<!--StartFragment--><div><div><div>In this game, White forced an f-pawn and won the game. From [Hochstrasser - Papa, Swiss National Championship A, 2012.](https://lichess.org/TRt0CSTK#110).</div></div></div>"
            ],
            "guid": "jtX&+Ec_fe",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.06\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"R7/P5k1/5pp1/4p2p/4P2P/3K1P2/r5P1/8 b - - 8 46\"]<br>[SetUp \"1\"]<br><br>46... Rxg2 47. Rb8 {EV: 100.0%} (47. Rc8 {EV: 100.0%}) (47. Rd8 {EV: 100.0%}) (<br>47. Re8 {EV: 100.0%}) *",
                "",
                "",
                "<!--StartFragment--><div><br></div>",
                ""
            ],
            "guid": "lw])r^xGut",
            "note_model_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.06\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"R7/P5k1/2K2pp1/4p2p/4P2P/5P2/6P1/r7 b - - 18 51\"]<br>[SetUp \"1\"]<br><br>51... Ra2 52. Rd8 {EV: 97.0%} Rxa7 {EV: 3.3%} 53. Rd7+ {EV: 96.9%} Rxd7 {EV:<br>3.3%} 54. Kxd7 {EV: 96.8%} Kf7 {EV: 3.1%} (54... g5 {EV: 3.1%}) *",
                "",
                "",
                "",
                ""
            ],
            "guid": "Dp&a?~icqn",
            "note_model_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "[Event \"?\"]<br>[Site \"?\"]<br>[Date \"2021.03.06\"]<br>[Round \"?\"]<br>[White \"White\"]<br>[Black \"Black\"]<br>[Result \"*\"]<br>[FEN \"8/3K2k1/5pp1/4p2p/4P2P/5P2/6P1/8 b - - 0 54\"]<br>[SetUp \"1\"]<br><br>54... Kf7 55. Kd6 {EV: 97.4%} Kf8 {EV: 3.4%} (55... Kg7 {EV: 2.9%} 56. Ke6 {EV:<br>98.1%} (56. Ke7 {EV: 97.1%})) (55... Kg8 {EV: 3.4%} 56. Ke7 {EV: 97.8%} (56. Ke6<br>{EV: 97.0%})) (55... g5 {EV: 2.9%} 56. hxg5 {EV: 97.6%}) 56. Ke6 {EV: 96.3%} *",
                "",
                "",
                "",
                ""
            ],
            "guid": "xK-H:2C!]8",
            "note_model_uuid": "52ca2293-8f2f-11eb-86eb-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "R7/P6k/5pp1/4p2p/4P2P/5P2/r5PK/8 w - - 1 43",
                "<!--StartFragment-->In this game, White did not force an e- or f-pawn, but rather sacrificed the a7 pawn to trade Rooks into a winning 4v4 pawn endgame. This is a useful concept to remember. From [Bartholomew - Thaler, 2012](https://lichess.org/0OQ4CsA3#84).<!--EndFragment-->"
            ],
            "guid": "chyIzT`j)>",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        },
        {
            "__type__": "Note",
            "fields": [
                "R7/P5pk/5p2/4p2p/4P2P/5P2/6PK/r7 w - - 3 46",
                "<!--StartFragment-->Due to the pawn on g7, White is unable to sacrifice the a7 pawn in order to trade Rooks. White can't force the trade of Rooks, but has to force an e- or f-pawn.<!--EndFragment-->"
            ],
            "guid": "r5CT[/>_Wx",
            "note_model_uuid": "52cae5f7-8f2f-11eb-a271-d45d6450590b",
            "tags": [
                "Lichess::Rook_Endgames::7th-Rank_Rook_Pawn"
            ]
        }
    ]
}